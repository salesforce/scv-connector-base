!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SCVConnectorBase",[],e):"object"==typeof exports?exports.SCVConnectorBase=e():t.SCVConnectorBase=e()}(this,(function(){return function(t){var e={};function E(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,E),a.l=!0,a.exports}return E.m=t,E.c=e,E.d=function(t,e,n){E.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},E.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},E.t=function(t,e){if(1&e&&(t=E(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(E.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)E.d(n,a,function(e){return t[e]}.bind(null,a));return n},E.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return E.d(e,"a",e),e},E.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},E.p="",E(E.s=7)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,E){return e in t?Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[e]=E,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){t.exports=E(6)},function(t,e){function E(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=E=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=E=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),E(e)}t.exports=E,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e,E,n,a,r,T){try{var o=t[r](T),i=o.value}catch(t){return void E(t)}o.done?e(i):Promise.resolve(i).then(n,a)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var T=t.apply(e,n);function o(t){E(T,a,r,o,i,"next",t)}function i(t){E(T,a,r,o,i,"throw",t)}o(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e){for(var E=0;E<e.length;E++){var n=e[E];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){var n=function(t){"use strict";var e=Object.prototype,E=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",T=n.toStringTag||"@@toStringTag";function o(t,e,E){return Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,E){return t[e]=E}}function i(t,e,E,n){var a=e&&e.prototype instanceof N?e:N,r=Object.create(a.prototype),T=new I(n||[]);return r._invoke=function(t,e,E){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return h()}for(E.method=a,E.arg=r;;){var T=E.delegate;if(T){var o=d(T,E);if(o){if(o===s)continue;return o}}if("next"===E.method)E.sent=E._sent=E.arg;else if("throw"===E.method){if("suspendedStart"===n)throw n="completed",E.arg;E.dispatchException(E.arg)}else"return"===E.method&&E.abrupt("return",E.arg);n="executing";var i=_(t,e,E);if("normal"===i.type){if(n=E.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:E.done}}"throw"===i.type&&(n="completed",E.method="throw",E.arg=i.arg)}}}(t,E,T),r}function _(t,e,E){try{return{type:"normal",arg:t.call(e,E)}}catch(t){return{type:"throw",arg:t}}}t.wrap=i;var s={};function N(){}function l(){}function c(){}var u={};u[a]=function(){return this};var A=Object.getPrototypeOf,R=A&&A(A(L([])));R&&R!==e&&E.call(R,a)&&(u=R);var O=c.prototype=N.prototype=Object.create(u);function C(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){var n;this._invoke=function(a,r){function T(){return new e((function(n,T){!function n(a,r,T,o){var i=_(t[a],t,r);if("throw"!==i.type){var s=i.arg,N=s.value;return N&&"object"==typeof N&&E.call(N,"__await")?e.resolve(N.__await).then((function(t){n("next",t,T,o)}),(function(t){n("throw",t,T,o)})):e.resolve(N).then((function(t){s.value=t,T(s)}),(function(t){return n("throw",t,T,o)}))}o(i.arg)}(a,r,n,T)}))}return n=n?n.then(T,T):T()}}function d(t,e){var E=t.iterator[e.method];if(void 0===E){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,d(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=_(E,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,s;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(E.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:h}}function h(){return{value:void 0,done:!0}}return l.prototype=O.constructor=c,c.constructor=l,l.displayName=o(c,T,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,o(t,T,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},C(P.prototype),P.prototype[r]=function(){return this},t.AsyncIterator=P,t.async=function(e,E,n,a,r){void 0===r&&(r=Promise);var T=new P(i(e,E,n,a),r);return t.isGeneratorFunction(E)?T:T.next().then((function(t){return t.done?t.value:T.next()}))},C(O),o(O,T,"Generator"),O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var E in t)e.push(E);return e.reverse(),function E(){for(;e.length;){var n=e.pop();if(n in t)return E.value=n,E.done=!1,E}return E.done=!0,E}},t.values=L,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&E.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(E,n){return T.type="throw",T.arg=t,e.next=E,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],T=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=E.call(r,"catchLoc"),i=E.call(r,"finallyLoc");if(o&&i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&E.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var T=r?r.completion:{};return T.type=t,T.arg=e,r?(this.method="next",this.next=r.finallyLoc,s):this.complete(T)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.finallyLoc===t)return this.complete(E.completion,E.afterLoc),S(E),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.tryLoc===t){var n=E.completion;if("throw"===n.type){var a=n.arg;S(E)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,E){return this.delegate={iterator:L(t),resultName:e,nextLoc:E},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,E){"use strict";E.r(e),E.d(e,"initializeConnector",(function(){return Nt})),E.d(e,"publishEvent",(function(){return ut})),E.d(e,"publishError",(function(){return ct})),E.d(e,"publishLog",(function(){return lt})),E.d(e,"Constants",(function(){return p})),E.d(e,"ActiveCallsResult",(function(){return L})),E.d(e,"AgentConfigResult",(function(){return h})),E.d(e,"AgentConfig",(function(){return f})),E.d(e,"RecordingToggleResult",(function(){return D})),E.d(e,"ParticipantResult",(function(){return G})),E.d(e,"SignedRecordingUrlResult",(function(){return y})),E.d(e,"PhoneContactsResult",(function(){return v})),E.d(e,"CallResult",(function(){return b})),E.d(e,"HangupResult",(function(){return Y})),E.d(e,"HoldToggleResult",(function(){return g})),E.d(e,"InitResult",(function(){return U})),E.d(e,"GenericResult",(function(){return m})),E.d(e,"MuteToggleResult",(function(){return I})),E.d(e,"LogoutResult",(function(){return V})),E.d(e,"CallInfo",(function(){return M})),E.d(e,"PhoneCall",(function(){return w})),E.d(e,"PhoneCallAttributes",(function(){return H})),E.d(e,"Contact",(function(){return k})),E.d(e,"Phone",(function(){return S})),E.d(e,"AgentStatusInfo",(function(){return F})),E.d(e,"AudioStatsGroup",(function(){return B})),E.d(e,"AudioStats",(function(){return W})),E.d(e,"StatsInfo",(function(){return K})),E.d(e,"VendorConnector",(function(){return x}));var n=E(1),a=E.n(n),r=E(4),T=E.n(r),o=E(3),i=E.n(o),_=E(2),s=E.n(_),N={MESSAGE_TYPE:{SETUP_CONNECTOR:"SETUP_CONNECTOR",CONNECTOR_READY:"CONNECTOR_READY",LOG:"LOG",TELEPHONY_EVENT_DISPATCHED:"TELEPHONY_EVENT_DISPATCHED",ACCEPT_CALL:"ACCEPT_CALL",DECLINE_CALL:"DECLINE_CALL",END_CALL:"END_CALL",MUTE:"MUTE",UNMUTE:"UNMUTE",HOLD:"HOLD",RESUME:"RESUME",SET_AGENT_STATUS:"SET_AGENT_STATUS",DIAL:"DIAL",SEND_DIGITS:"SEND_DIGITS",GET_PHONE_CONTACTS:"GET_PHONE_CONTACTS",SWAP_PARTICIPANTS:"SWAP_PARTICIPANTS",ADD_PARTICIPANT:"ADD_PARTICIPANT",CONFERENCE:"CONFERENCE",PAUSE_RECORDING:"PAUSE_RECORDING",RESUME_RECORDING:"RESUME_RECORDING",LOGOUT:"LOGOUT",MESSAGE:"MESSAGE",WRAP_UP_CALL:"WRAP_UP_CALL",AGENT_AVAILABLE:"AGENT_AVAILABLE",SET_AGENT_CONFIG:"SET_AGENT_CONFIG",GET_SIGNED_RECORDING_URL:"GET_SIGNED_RECORDING_URL",DOWNLOAD_VENDOR_LOGS:"DOWNLOAD_VENDOR_LOGS"},EVENT_TYPE:{QUEUED_CALL_STARTED:"QUEUED_CALL_STARTED",CALL_STARTED:"CALL_STARTED",CALL_CONNECTED:"CALL_CONNECTED",CALL_FAILED:"CALL_FAILED",MUTE_TOGGLE:"MUTE_TOGGLE",HOLD_TOGGLE:"HOLD_TOGGLE",HANGUP:"HANGUP",ERROR:"ERROR",PHONE_CONTACTS:"PHONE_CONTACTS",PARTICIPANT_ADDED:"PARTICIPANT_ADDED",PARTICIPANT_CONNECTED:"PARTICIPANT_CONNECTED",PARTICIPANT_REMOVED:"PARTICIPANT_REMOVED",LOGIN_STARTED:"LOGIN_STARTED",LOGIN_RESULT:"LOGIN_RESULT",LOGOUT_RESULT:"LOGOUT_RESULT",RECORDING_TOGGLE:"RECORDING_TOGGLE",PARTICIPANTS_SWAPPED:"PARTICIPANTS_SWAPPED",PARTICIPANTS_CONFERENCED:"PARTICIPANTS_CONFERENCED",SHOW_LOGIN:"SHOW_LOGIN",SET_AGENT_STATUS_RESULT:"SET_AGENT_STATUS_RESULT",WRAP_UP_ENDED:"WRAP_UP_ENDED",MESSAGE:"MESSAGE",AFTER_CALL_WORK_STARTED:"AFTER_CALL_WORK_STARTED",AGENT_CONFIG_UPDATED:"AGENT_CONFIG_UPDATED",AGENT_ERROR:"AGENT_ERROR",SOFTPHONE_ERROR:"SOFTPHONE_ERROR",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",UPDATE_AUDIO_STATS:"UPDATE_AUDIO_STATS"},ERROR_TYPE:{GENERIC_ERROR:"GENERIC_ERROR",AGENT_ERROR:"AGENT_ERROR",MICROPHONE_NOT_SHARED:"MICROPHONE_NOT_SHARED",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",INVALID_AGENT_STATUS:"INVALID_AGENT_STATUS",CAN_NOT_SET_AGENT_STATUS:"CAN_NOT_SET_AGENT_STATUS",LOGIN_REQUIRED:"LOGIN_REQUIRED",CAN_NOT_ACCEPT_THE_CALL:"CAN_NOT_ACCEPT_THE_CALL",CAN_NOT_DECLINE_THE_CALL:"CAN_NOT_DECLINE_THE_CALL",CAN_NOT_END_THE_CALL:"CAN_NOT_END_THE_CALL",CAN_NOT_HOLD_CALL:"CAN_NOT_HOLD_CALL",CAN_NOT_RESUME_CALL:"CAN_NOT_RESUME_CALL",CAN_NOT_MUTE_CALL:"CAN_NOT_MUTE_CALL",CAN_NOT_UNMUTE_CALL:"CAN_NOT_UNMUTE_CALL",CAN_NOT_TOGGLE_MUTE:"CAN_NOT_TOGGLE_MUTE",CAN_NOT_TOGGLE_HOLD:"CAN_NOT_TOGGLE_HOLD",CAN_NOT_TOGGLE_RECORD:"CAN_NOT_TOGGLE_RECORD",INVALID_PARTICIPANT:"INVALID_PARTICIPANT",CAN_NOT_LOG_IN:"CAN_NOT_LOG_IN",CAN_NOT_LOG_OUT:"CAN_NOT_LOG_OUT",INVALID_PARAMS:"INVALID_PARAMS",CAN_NOT_GET_PHONE_CONTACTS:"CAN_NOT_GET_PHONE_CONTACTS",CAN_NOT_SWAP_PARTICIPANTS:"CAN_NOT_SWAP_PARTICIPANTS",CAN_NOT_CONFERENCE:"CAN_NOT_CONFERENCE",INVALID_DESTINATION:"INVALID_DESTINATION",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",CAN_NOT_HANGUP_PARTICIPANT:"CAN_NOT_HANGUP_PARTICIPANT",CAN_NOT_ADD_PARTICIPANT:"CAN_NOT_ADD_PARTICIPANT",CAN_NOT_CONNECT_PARTICIPANT:"CAN_NOT_CONNECT_PARTICIPANT",CAN_NOT_START_THE_CALL:"CAN_NOT_START_THE_CALL",CAN_NOT_PAUSE_RECORDING:"CAN_NOT_PAUSE_RECORDING",CAN_NOT_RESUME_RECORDING:"CAN_NOT_RESUME_RECORDING",CAN_NOT_SET_AGENT_CONFIG:"CAN_NOT_SET_AGENT_CONFIG",CAN_NOT_UPDATE_PHONE_NUMBER:"CAN_NOT_UPDATE_PHONE_NUMBER",CAN_NOT_GET_SIGNED_RECORDING_URL:"CAN_NOT_GET_SIGNED_RECORDING_URL"},AGENT_STATUS:{ONLINE:"Online",OFFLINE:"Offline",ACW:"AfterCallWork",CALLBACK_MISSED_OR_REJECTED:"CallbackMissedOrRejected"},PARTICIPANT_TYPE:{AGENT:"Agent",INITIAL_CALLER:"Initial_Caller",THIRD_PARTY:"Third_Party"},CALL_TYPE:{INBOUND:"Inbound",OUTBOUND:"Outbound",CALLBACK:"Callback",ADD_PARTICIPANT:"AddParticipant"},CONTACT_TYPE:{PHONEBOOK:"PhoneBook",QUEUE:"Queue",PHONENUMBER:"PhoneNumber",AGENT:"Agent"},AGENT_CONFIG_TYPE:{SHOW_AGENT_SETTINGS:"SHOW_AGENT_SETTINGS",MUTE:"MUTE",RECORD:"RECORD",MERGE:"MERGE",SWAP:"SWAP",PHONES:"PHONES",SELECTED_PHONE:"SELECTED_PHONE",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",DEBUG_ENABLED:"DEBUG_ENABLED",CONTACT_SEARCH:"CONTACT_SEARCH",VENDOR_PROVIDED_AVAILABILITY:"VENDOR_PROVIDED_AVAILABILITY"},CALL_STATE:{RINGING:"ringing",CONNECTED:"connected",TRANSFERRING:"transferring",TRANSFERRED:"transferred",ENDED:"ended"},PHONE_TYPE:{DESK_PHONE:"DESK_PHONE",SOFT_PHONE:"SOFT_PHONE"},HANGUP_REASON:{PHONE_CALL_ERROR:"error",PHONE_CALL_ENDED:"ended"},AGENT_AVAILABILITY:{AVAILABLE:"AVAILABLE",BUSY:"BUSY",OFFLINE:"OFFLINE"}},l=E(5),c=E.n(l),u=E(0),A=E.n(u);function R(t,e){var E=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),E.push.apply(E,n)}return E}function O(t){for(var e=1;e<arguments.length;e++){var E=null!=arguments[e]?arguments[e]:{};e%2?R(Object(E),!0).forEach((function(e){a()(t,e,E[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(E)):R(Object(E)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(E,e))}))}return t}var C,P,d,p={EVENT_TYPE:{LOGIN_RESULT:N.EVENT_TYPE.LOGIN_RESULT,LOGOUT_RESULT:N.EVENT_TYPE.LOGOUT_RESULT,CALL_STARTED:N.EVENT_TYPE.CALL_STARTED,QUEUED_CALL_STARTED:N.EVENT_TYPE.QUEUED_CALL_STARTED,CALL_CONNECTED:N.EVENT_TYPE.CALL_CONNECTED,HANGUP:N.EVENT_TYPE.HANGUP,MUTE_TOGGLE:N.EVENT_TYPE.MUTE_TOGGLE,HOLD_TOGGLE:N.EVENT_TYPE.HOLD_TOGGLE,RECORDING_TOGGLE:N.EVENT_TYPE.RECORDING_TOGGLE,PARTICIPANTS_SWAPPED:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,PARTICIPANTS_CONFERENCED:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_ADDED,PARTICIPANT_CONNECTED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,PARTICIPANT_REMOVED:N.EVENT_TYPE.PARTICIPANT_REMOVED,MESSAGE:N.EVENT_TYPE.MESSAGE,AFTER_CALL_WORK_STARTED:N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,WRAP_UP_ENDED:N.EVENT_TYPE.WRAP_UP_ENDED,AGENT_ERROR:N.EVENT_TYPE.AGENT_ERROR,SOFTPHONE_ERROR:N.EVENT_TYPE.SOFTPHONE_ERROR,UPDATE_AUDIO_STATS:N.EVENT_TYPE.UPDATE_AUDIO_STATS},ERROR_TYPE:{GENERIC_ERROR:N.ERROR_TYPE.GENERIC_ERROR,INVALID_PARTICIPANT:N.ERROR_TYPE.INVALID_PARTICIPANT,INVALID_DESTINATION:N.ERROR_TYPE.INVALID_DESTINATION,INVALID_PARAMS:N.ERROR_TYPE.INVALID_PARAMS,INVALID_AGENT_STATUS:N.ERROR_TYPE.INVALID_AGENT_STATUS,CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER},AGENT_STATUS:O({},N.AGENT_STATUS),PARTICIPANT_TYPE:O({},N.PARTICIPANT_TYPE),CALL_TYPE:O({},N.CALL_TYPE),CONTACT_TYPE:O({},N.CONTACT_TYPE),CALL_STATE:O({},N.CALL_STATE),HANGUP_REASON:O({},N.HANGUP_REASON),PHONE_TYPE:O({},N.PHONE_TYPE),AGENT_AVAILABILITY:O({},N.AGENT_AVAILABILITY)},S=function t(e){var E=e.type,n=e.number;A()(this,t),j.validateEnum(E,Object.values(N.PHONE_TYPE)),n&&j.validateString(n),this.type=E,this.number=n},I=function t(e){var E=e.isMuted;A()(this,t),this.isMuted=E},L=function t(e){var E=e.activeCalls,n=void 0===E?[]:E;A()(this,t),n.length>0&&n.forEach((function(t){j.validateClassObject(t,w)})),this.activeCalls=n},h=function t(e){var E=e.hasMute,n=void 0===E||E,a=e.hasRecord,r=void 0===a||a,T=e.hasMerge,o=void 0===T||T,i=e.hasSwap,_=void 0===i||i,s=e.hasSignedRecordingUrl,N=void 0!==s&&s,l=e.phones,c=void 0===l?[]:l,u=e.selectedPhone,R=e.debugEnabled,O=void 0!==R&&R,C=e.hasContactSearch,P=void 0!==C&&C,d=e.hasAgentAvailability,p=void 0!==d&&d,I=e.supportsMos,L=void 0!==I&&I;A()(this,t),j.validateBoolean(n),j.validateBoolean(r),j.validateBoolean(o),j.validateBoolean(_),j.validateBoolean(N),j.validateClassObject(c,Array),j.validateBoolean(O),u&&j.validateClassObject(u,S),j.validateBoolean(P),j.validateBoolean(p),j.validateBoolean(L),this.hasMute=n,this.hasRecord=r,this.hasMerge=o,this.hasSwap=_,this.hasSignedRecordingUrl=N,this.phones=c,this.selectedPhone=u,this.debugEnabled=O,this.hasContactSearch=P,this.hasAgentAvailability=p,this.supportsMos=L},f=function t(e){var E=e.selectedPhone;A()(this,t),j.validateClassObject(E,S),this.selectedPhone=E},D=function t(e){var E=e.isRecordingPaused,n=e.contactId,a=void 0===n?null:n,r=e.initialContactId,T=void 0===r?null:r,o=e.instanceId,i=void 0===o?null:o,_=e.region,s=void 0===_?null:_;A()(this,t),this.isRecordingPaused=E,this.contactId=a,this.initialContactId=T,this.instanceId=i,this.region=s},G=function t(e){var E=e.initialCallHasEnded,n=e.callInfo,a=e.phoneNumber,r=e.callId;A()(this,t),j.validateClassObject(n,M),this.initialCallHasEnded=E,this.callInfo=n,this.phoneNumber=a,this.callId=r},v=function t(e){var E=e.contacts,n=void 0===E?[]:E;A()(this,t),n.length>0&&n.forEach((function(t){j.validateClassObject(t,k)})),this.contacts=n},b=function t(e){var E=e.call;A()(this,t),void 0!==E&&j.validateClassObject(E,w),this.call=E},Y=function t(e){var E=e.calls;A()(this,t),E instanceof Array?(E.forEach((function(t){return j.validateClassObject(t,w)})),this.calls=E):(j.validateClassObject(E,w),this.calls=[E])},g=function t(e){var E=e.isThirdPartyOnHold,n=e.isCustomerOnHold,a=e.calls;A()(this,t),a&&(Object.values(a).forEach((function(t){j.validateClassObject(t,w)})),this.calls=a),this.isThirdPartyOnHold=E,this.isCustomerOnHold=n},y=function t(e){var E=e.success,n=e.url,a=e.duration,r=e.callId;A()(this,t),E&&(j.validateString(n),j.validateString(r),a&&j.validateNumber(a)),this.success=E,this.url=n,this.duration=a,this.callId=r},U=function t(e){var E=e.showLogin,n=void 0!==E&&E,a=e.loginFrameHeight,r=void 0===a?350:a;A()(this,t),this.showLogin=n,this.loginFrameHeight=r},m=function t(e){var E=e.success;A()(this,t),this.success=E},V=function t(e){var E=e.success,n=e.loginFrameHeight,a=void 0===n?350:n;A()(this,t),this.success=E,this.loginFrameHeight=a},M=function t(e){var E=e.callStateTimestamp,n=void 0===E?null:E,a=e.isOnHold,r=e.isMuted,T=void 0!==r&&r,o=e.isRecordingPaused,i=void 0!==o&&o,_=e.initialCallId,s=e.isSoftphoneCall,N=void 0===s||s,l=e.acceptEnabled,c=void 0===l||l,u=e.declineEnabled,R=void 0===u||u,O=e.muteEnabled,C=void 0===O||O,P=e.swapEnabled,d=void 0===P||P,p=e.conferenceEnabled,S=void 0===p||p,I=e.holdEnabled,L=void 0===I||I,h=e.recordEnabled,f=void 0===h||h,D=e.addCallerEnabled,G=void 0===D||D,v=e.extensionEnabled,b=void 0===v||v,Y=e.isReplayable,g=void 0===Y||Y;A()(this,t),n&&j.validateDate(n),j.validateBoolean(i),j.validateBoolean(T),j.validateBoolean(N),j.validateBoolean(c),j.validateBoolean(R),j.validateBoolean(C),j.validateBoolean(d),j.validateBoolean(S),j.validateBoolean(L),j.validateBoolean(f),j.validateBoolean(G),j.validateBoolean(b),this.callStateTimestamp=n,this.isRecordingPaused=i,this.isMuted=T,this.isOnHold=a,this.initialCallId=_,this.isSoftphoneCall=N,this.acceptEnabled=c,this.declineEnabled=R,this.muteEnabled=C,this.swapEnabled=d,this.conferenceEnabled=S,this.holdEnabled=L,this.recordEnabled=f,this.addCallerEnabled=G,this.extensionEnabled=b,this.isReplayable=g},k=function t(e){var E=e.phoneNumber,n=e.id,a=e.type,r=e.name,T=e.prefix,o=e.extension,i=e.endpointARN,_=e.queue,s=e.availability;A()(this,t),E&&j.validateString(E),a&&j.validateEnum(a,Object.values(N.CONTACT_TYPE)),n&&j.validateString(n),r&&j.validateString(r),T&&j.validateString(T),o&&j.validateString(o),s&&j.validateEnum(s,Object.values(N.AGENT_AVAILABILITY)),this.phoneNumber=E,this.id=n,this.type=a,this.name=r,this.prefix=T,this.extension=o,this.endpointARN=i,this.queue=_,N.CONTACT_TYPE.AGENT===this.type?this.availability=s:this.availability=null},H=function t(e){var E=e.voiceCallId,n=e.participantType,a=e.parentId,r=e.isOnHold;A()(this,t),E&&j.validateString(E),n&&j.validateEnum(n,Object.values(N.PARTICIPANT_TYPE)),a&&j.validateString(a),void 0!==r&&j.validateBoolean(r),this.voiceCallId=E,this.participantType=n,this.parentId=a,this.isOnHold=r},w=function t(e){var E=e.callId,n=e.callType,a=e.contact,r=e.state,T=e.callAttributes,o=e.phoneNumber,i=e.callInfo,_=e.reason,s=e.closeCallOnError,l=e.agentStatus,c=e.mos;A()(this,t),E&&(j.validateString(E),this.callId=E),n&&(j.validateEnum(n,Object.values(N.CALL_TYPE)),this.callType=n),o&&(j.validateString(o),this.phoneNumber=o),i&&(j.validateClassObject(i,M),this.callInfo=i),a&&(j.validateClassObject(a,k),this.contact=a),_&&(this.reason=_),s&&(this.closeCallOnError=s),l&&(this.agentStatus=l),c&&(this.mos=c),this.state=r,this.callAttributes=T},x=function(){function t(){A()(this,t)}return c()(t,[{key:"init",value:function(t){throw new Error("Not implemented")}},{key:"getActiveCalls",value:function(){throw new Error("Not implemented")}},{key:"acceptCall",value:function(t){throw new Error("Not implemented")}},{key:"declineCall",value:function(t){throw new Error("Not implemented")}},{key:"endCall",value:function(t,e){throw new Error("Not implemented")}},{key:"mute",value:function(){throw new Error("Not implemented")}},{key:"unmute",value:function(){throw new Error("Not implemented")}},{key:"hold",value:function(t){throw new Error("Not implemented")}},{key:"resume",value:function(t){throw new Error("Not implemented")}},{key:"setAgentStatus",value:function(t,e){throw new Error("Not implemented")}},{key:"dial",value:function(t){throw new Error("Not implemented")}},{key:"sendDigits",value:function(t){throw new Error("Not implemented")}},{key:"getPhoneContacts",value:function(){throw new Error("Not implemented")}},{key:"swap",value:function(t,e){throw new Error("Not implemented")}},{key:"conference",value:function(t){throw new Error("Not implemented")}},{key:"addParticipant",value:function(t,e){throw new Error("Not implemented")}},{key:"pauseRecording",value:function(t){throw new Error("Not implemented")}},{key:"resumeRecording",value:function(t){throw new Error("Not implemented")}},{key:"getAgentConfig",value:function(){throw new Error("Not implemented")}},{key:"setAgentConfig",value:function(t){throw new Error("Not implemented")}},{key:"logout",value:function(){throw new Error("Not implemented")}},{key:"handleMessage",value:function(t){throw new Error("Not implemented")}},{key:"wrapUpCall",value:function(t){throw new Error("Not implemented")}},{key:"getSignedRecordingUrl",value:function(t,e,E){throw new Error("Not implemented")}},{key:"downloadLogs",value:function(){throw new Error("Not implemented")}},{key:"logMessageToVendor",value:function(t,e,E){}}]),t}(),j=function(){function t(){A()(this,t)}return c()(t,null,[{key:"validateString",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument. Expecting a string but got ".concat(i()(t)));return this}},{key:"validateNumber",value:function(t){if("number"!=typeof t)throw new Error("Invalid argument. Expecting a number but got ".concat(i()(t)));return this}},{key:"validateBoolean",value:function(t){if("boolean"!=typeof t)throw new Error("Invalid argument. Expecting a boolean but got ".concat(i()(t)));return this}},{key:"validateEnum",value:function(t,e){if(!new RegExp(e.join("|"),"i").test(t))throw new Error("Invalid argument. Expecting a value from ".concat(JSON.stringify(e)," but got ").concat(t));return this}},{key:"validateDate",value:function(t){if(!(t instanceof Date))throw new Error("Invalid argument. Expecting a Date object but got ".concat(i()(t)));return this}},{key:"validateClassObject",value:function(t,e){if(!(t instanceof e))throw new Error("Invalid className. Expecting object of class ".concat(e," but got ").concat(i()(t)));return this}}]),t}(),F=function t(e){var E=e.statusId,n=e.statusApiName,a=e.statusName;A()(this,t),j.validateString(E),j.validateString(n),j.validateString(a),this.statusId=E,this.statusApiName=n,this.statusName=a},B=function t(e){var E=e.stats;A()(this,t),j.validateClassObject(E,Array),E.forEach((function(t){return j.validateClassObject(t,W)})),this.stats=E},W=function t(e){var E=e.inputChannelStats,n=e.outputChannelStats;A()(this,t),E&&j.validateClassObject(E,K),n&&j.validateClassObject(n,K),this.inputChannelStats=E,this.outputChannelStats=n},K=function t(e){var E=e.packetsCount,n=e.packetsLost,a=e.jitterBufferMillis,r=e.roundTripTimeMillis;A()(this,t),E=null==E||E<0?0:E,n=null==n||n<0?0:n,a=null==a||a<0?0:a,r=null==r||r<0?0:r,this.statsCount=0,this.packetsCount=E,this.packetsLost=n,this.jitterBufferMillis=a,this.roundTripTimeMillis=r},Q=!1;function q(t){var e=function(t){var e=C[t];return{packetsCount:e.packetsCount/e.statsCount,packetsLost:e.packetsLost/e.statsCount,jitterBufferMillis:e.jitterBufferMillis/e.statsCount,roundTripTimeMillis:e.roundTripTimeMillis/e.statsCount}}(t),E=e.roundTripTimeMillis+2*e.jitterBufferMillis+10,n=0;return n=E<160?93.2-E/40:93.2-(E-120)/10,1+.035*(n-=e.packetsLost/e.packetsCount*2.5)+7e-6*n*(n-60)*(100-n)}function J(){Q=!0}function z(){if(Q&&C){var t=q("inputChannelStats"),e=q("outputChannelStats");return C=null,isNaN(e)&&isNaN(t)?0:isNaN(e)?t:isNaN(t)?e:Math.min(t,e)}}function $(){C=new W({inputChannelStats:new K({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0}),outputChannelStats:new K({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0})})}function X(t){C&&t.stats.forEach((function(t){t.inputChannelStats&&(C.inputChannelStats.statsCount++,C.inputChannelStats.packetsCount+=0|t.inputChannelStats.packetsCount,C.inputChannelStats.packetsLost+=0|t.inputChannelStats.packetsLost,C.inputChannelStats.jitterBufferMillis+=0|t.inputChannelStats.jitterBufferMillis,C.inputChannelStats.roundTripTimeMillis+=0|t.inputChannelStats.roundTripTimeMillis),t.outputChannelStats&&(C.outputChannelStats.statsCount++,C.outputChannelStats.packetsCount+=0|t.outputChannelStats.packetsCount,C.outputChannelStats.packetsLost+=0|t.outputChannelStats.packetsLost,C.outputChannelStats.jitterBufferMillis+=0|t.outputChannelStats.jitterBufferMillis,C.outputChannelStats.roundTripTimeMillis+=0|t.outputChannelStats.roundTripTimeMillis)}))}function Z(t){return t&&t.type?t.type:t}function tt(t){return t&&t.message?t.message:t}function et(t,e,E){var n=function t(e){if(e&&"object"===i()(e)){var E=Array.isArray(e),n=E?[]:{};if(E)e.forEach((function(e){n.push(t(e))}));else for(var a in e)"phoneNumber"!==a&&"number"!==a&&"name"!==a&&"callAttributes"!==a&&(n[a]=t(e[a]));return n}return e}(e);P.postMessage({type:N.MESSAGE_TYPE.LOG,payload:{eventType:t,payload:n,isError:E}})}function Et(t,e){var E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];P.postMessage({type:N.MESSAGE_TYPE.TELEPHONY_EVENT_DISPATCHED,payload:{telephonyEventType:t,telephonyEventPayload:e}}),E&&et(t,e,!1)}function nt(t,e,E){console.error("SCV dispatched error ".concat(t," for eventType ").concat(E),e),Et(N.EVENT_TYPE.ERROR,{message:N.ERROR_TYPE[t]},!1),et(E,{errorType:t,error:e},!0)}function at(){return rt.apply(this,arguments)}function rt(){return(rt=T()(s.a.mark((function t(){var e,E,n,r,T,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.getAgentConfig();case 3:return E=t.sent,j.validateClassObject(E,h),E.supportsMos&&J(),t.next=8,d.getActiveCalls();case 8:n=t.sent,j.validateClassObject(n,L),r=n.activeCalls,T=N.MESSAGE_TYPE.CONNECTOR_READY,o={agentConfig:(e={},a()(e,N.AGENT_CONFIG_TYPE.MUTE,E.hasMute),a()(e,N.AGENT_CONFIG_TYPE.RECORD,E.hasRecord),a()(e,N.AGENT_CONFIG_TYPE.MERGE,E.hasMerge),a()(e,N.AGENT_CONFIG_TYPE.SWAP,E.hasSwap),a()(e,N.AGENT_CONFIG_TYPE.PHONES,E.phones),a()(e,N.AGENT_CONFIG_TYPE.SIGNED_RECORDING_URL,E.hasSignedRecordingUrl),a()(e,N.AGENT_CONFIG_TYPE.SELECTED_PHONE,E.selectedPhone),a()(e,N.AGENT_CONFIG_TYPE.DEBUG_ENABLED,E.debugEnabled),a()(e,N.AGENT_CONFIG_TYPE.CONTACT_SEARCH,E.hasContactSearch),a()(e,N.AGENT_CONFIG_TYPE.VENDOR_PROVIDED_AVAILABILITY,E.hasAgentAvailability),e),callInProgress:r.length>0?r[0]:null},P.postMessage({type:T,payload:o}),et(T,o,!1),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),P.postMessage({type:N.MESSAGE_TYPE.CONNECTOR_READY,payload:{}}),et(N.MESSAGE_TYPE.CONNECTOR_READY,{},!1);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}function Tt(t){return ot.apply(this,arguments)}function ot(){return(ot=T()(s.a.mark((function t(e){var E,n,a,r,T,o,i,_,l,c,u,A,R,O,C,P,p,S,I,h,f,D,G,g,U,M,H,w,x,F,B,W,K,Q,q,J,X,at,rt,Tt,ot,it,_t;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:et(E=e.data.type,e.data,!1),t.t0=E,t.next=t.t0===N.MESSAGE_TYPE.ACCEPT_CALL?5:t.t0===N.MESSAGE_TYPE.DECLINE_CALL?21:t.t0===N.MESSAGE_TYPE.END_CALL?34:t.t0===N.MESSAGE_TYPE.MUTE?50:t.t0===N.MESSAGE_TYPE.UNMUTE?61:t.t0===N.MESSAGE_TYPE.HOLD?72:t.t0===N.MESSAGE_TYPE.RESUME?89:t.t0===N.MESSAGE_TYPE.SET_AGENT_STATUS?106:t.t0===N.MESSAGE_TYPE.DIAL?126:t.t0===N.MESSAGE_TYPE.SEND_DIGITS?148:t.t0===N.MESSAGE_TYPE.GET_PHONE_CONTACTS?157:t.t0===N.MESSAGE_TYPE.SWAP_PARTICIPANTS?170:t.t0===N.MESSAGE_TYPE.CONFERENCE?181:t.t0===N.MESSAGE_TYPE.ADD_PARTICIPANT?192:t.t0===N.MESSAGE_TYPE.PAUSE_RECORDING?210:t.t0===N.MESSAGE_TYPE.RESUME_RECORDING?221:t.t0===N.MESSAGE_TYPE.LOGOUT?232:t.t0===N.MESSAGE_TYPE.MESSAGE?245:t.t0===N.MESSAGE_TYPE.WRAP_UP_CALL?247:t.t0===N.MESSAGE_TYPE.AGENT_AVAILABLE?249:t.t0===N.MESSAGE_TYPE.SET_AGENT_CONFIG?278:t.t0===N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL?290:t.t0===N.MESSAGE_TYPE.DOWNLOAD_VENDOR_LOGS?305:t.t0===N.MESSAGE_TYPE.LOG?307:310;break;case 5:if(t.prev=5,!e.data.call||!e.data.call.callType||e.data.call.callType.toLowerCase()!==N.CALL_TYPE.OUTBOUND.toLowerCase()){t.next=8;break}return t.abrupt("return");case 8:return $(),t.next=11,d.acceptCall(e.data.call);case 11:n=t.sent,j.validateClassObject(n,b),Et((a=n.call).callType.toLowerCase()===N.CALL_TYPE.CALLBACK.toLowerCase()?N.EVENT_TYPE.CALL_STARTED:N.EVENT_TYPE.CALL_CONNECTED,a),t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),nt(N.ERROR_TYPE.CAN_NOT_ACCEPT_THE_CALL,t.t1,N.MESSAGE_TYPE.ACCEPT_CALL);case 20:return t.abrupt("break",311);case 21:return t.prev=21,t.next=24,d.declineCall(e.data.call);case 24:r=t.sent,j.validateClassObject(r,b),T=r.call,Et(N.EVENT_TYPE.HANGUP,T),t.next=33;break;case 30:t.prev=30,t.t2=t.catch(21),nt(N.ERROR_TYPE.CAN_NOT_DECLINE_THE_CALL,t.t2,N.MESSAGE_TYPE.DECLINE_CALL);case 33:return t.abrupt("break",311);case 34:return t.prev=34,t.next=37,d.endCall(e.data.call,e.data.agentStatus);case 37:return o=t.sent,t.next=40,d.getActiveCalls();case 40:i=t.sent,j.validateClassObject(i,L),0===i.activeCalls.length&&(j.validateClassObject(o,Y),_=o.calls,l=z(),_.forEach((function(t){t.mos=l})),Et(N.EVENT_TYPE.HANGUP,_)),t.next=49;break;case 46:t.prev=46,t.t3=t.catch(34),nt(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,t.t3,N.MESSAGE_TYPE.END_CALL);case 49:return t.abrupt("break",311);case 50:return t.prev=50,t.next=53,d.mute();case 53:c=t.sent,ut({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:c}),t.next=60;break;case 57:t.prev=57,t.t4=t.catch(50),nt(N.ERROR_TYPE.CAN_NOT_MUTE_CALL,t.t4,N.MESSAGE_TYPE.MUTE);case 60:return t.abrupt("break",311);case 61:return t.prev=61,t.next=64,d.unmute();case 64:u=t.sent,ut({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:u}),t.next=71;break;case 68:t.prev=68,t.t5=t.catch(61),nt(N.ERROR_TYPE.CAN_NOT_UNMUTE_CALL,t.t5,N.MESSAGE_TYPE.UNMUTE);case 71:return t.abrupt("break",311);case 72:return t.prev=72,t.next=75,d.hold(e.data.call);case 75:A=t.sent,ut({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:A}),t.next=88;break;case 79:t.prev=79,t.t6=t.catch(72),t.t7=Z(t.t6),t.next=t.t7===N.ERROR_TYPE.INVALID_PARTICIPANT?84:86;break;case 84:return nt(N.ERROR_TYPE.INVALID_PARTICIPANT,tt(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",88);case 86:return nt(N.ERROR_TYPE.CAN_NOT_HOLD_CALL,tt(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",88);case 88:return t.abrupt("break",311);case 89:return t.prev=89,t.next=92,d.resume(e.data.call);case 92:R=t.sent,ut({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:R}),t.next=105;break;case 96:t.prev=96,t.t8=t.catch(89),t.t9=Z(t.t8),t.next=t.t9===N.ERROR_TYPE.INVALID_PARTICIPANT?101:103;break;case 101:return nt(N.ERROR_TYPE.INVALID_PARTICIPANT,tt(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",105);case 103:return nt(N.ERROR_TYPE.CAN_NOT_RESUME_CALL,tt(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",105);case 105:return t.abrupt("break",311);case 106:return t.prev=106,O=e.data.statusInfo||{},t.next=110,d.setAgentStatus(e.data.agentStatus,O);case 110:C=t.sent,j.validateClassObject(C,m),P=C.success,Et(N.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:P}),t.next=125;break;case 116:t.prev=116,t.t10=t.catch(106),t.t11=Z(t.t10),t.next=t.t11===N.ERROR_TYPE.INVALID_AGENT_STATUS?121:123;break;case 121:return nt(N.ERROR_TYPE.INVALID_AGENT_STATUS,tt(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",125);case 123:return nt(N.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,tt(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",125);case 125:return t.abrupt("break",311);case 126:return t.prev=126,t.next=129,d.dial(new k(e.data.contact));case 129:p=t.sent,j.validateClassObject(p,b),S=p.call,Et(N.EVENT_TYPE.CALL_STARTED,S),t.next=147;break;case 135:t.prev=135,t.t12=t.catch(126),Et(N.EVENT_TYPE.CALL_FAILED),t.t13=Z(t.t12),t.next=t.t13===N.ERROR_TYPE.INVALID_DESTINATION?141:t.t13===N.ERROR_TYPE.GENERIC_ERROR?143:145;break;case 141:return nt(N.ERROR_TYPE.INVALID_DESTINATION,tt(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",147);case 143:return nt(N.ERROR_TYPE.GENERIC_ERROR,tt(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",147);case 145:return nt(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,tt(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",147);case 147:return t.abrupt("break",311);case 148:return t.prev=148,t.next=151,d.sendDigits(e.data.digits);case 151:t.next=156;break;case 153:t.prev=153,t.t14=t.catch(148),et(N.MESSAGE_TYPE.SEND_DIGITS,e.data.digits,!0);case 156:return t.abrupt("break",311);case 157:return t.prev=157,t.next=160,d.getPhoneContacts(e.data.filter);case 160:I=t.sent,j.validateClassObject(I,v),h=I.contacts.map((function(t){return{id:t.id,endpointARN:t.endpointARN,queue:t.queue,phoneNumber:t.phoneNumber,name:t.name,type:t.type,extension:t.extension,availability:t.availability}})),Et(N.EVENT_TYPE.PHONE_CONTACTS,{contacts:h}),t.next=169;break;case 166:t.prev=166,t.t15=t.catch(157),nt(N.ERROR_TYPE.CAN_NOT_GET_PHONE_CONTACTS,t.t15,N.MESSAGE_TYPE.GET_PHONE_CONTACTS);case 169:return t.abrupt("break",311);case 170:return t.prev=170,t.next=173,d.swap(e.data.callToHold,e.data.callToResume);case 173:f=t.sent,ut({eventType:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,payload:f}),t.next=180;break;case 177:t.prev=177,t.t16=t.catch(170),nt(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,t.t16,N.MESSAGE_TYPE.SWAP_PARTICIPANTS);case 180:return t.abrupt("break",311);case 181:return t.prev=181,t.next=184,d.conference(e.data.calls);case 184:D=t.sent,ut({eventType:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,payload:D}),t.next=191;break;case 188:t.prev=188,t.t17=t.catch(181),nt(N.ERROR_TYPE.CAN_NOT_CONFERENCE,t.t17,N.MESSAGE_TYPE.CONFERENCE);case 191:return t.abrupt("break",311);case 192:return t.prev=192,t.next=195,d.addParticipant(new k(e.data.contact),e.data.call);case 195:G=t.sent,ut({eventType:N.EVENT_TYPE.PARTICIPANT_ADDED,payload:G}),t.next=209;break;case 199:t.prev=199,t.t18=t.catch(192),Et(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:N.EVENT_TYPE.ERROR.toLowerCase()}),t.t19=Z(t.t18),t.next=t.t19===N.ERROR_TYPE.INVALID_DESTINATION?205:207;break;case 205:return nt(N.ERROR_TYPE.INVALID_DESTINATION,tt(t.t18),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",209);case 207:return nt(N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,tt(t.t18),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",209);case 209:return t.abrupt("break",311);case 210:return t.prev=210,t.next=213,d.pauseRecording(e.data.call);case 213:g=t.sent,ut({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:g}),t.next=220;break;case 217:t.prev=217,t.t20=t.catch(210),nt(N.ERROR_TYPE.CAN_NOT_PAUSE_RECORDING,t.t20,N.MESSAGE_TYPE.PAUSE_RECORDING);case 220:return t.abrupt("break",311);case 221:return t.prev=221,t.next=224,d.resumeRecording(e.data.call);case 224:U=t.sent,ut({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:U}),t.next=231;break;case 228:t.prev=228,t.t21=t.catch(221),nt(N.ERROR_TYPE.CAN_NOT_RESUME_RECORDING,t.t21,N.MESSAGE_TYPE.RESUME_RECORDING);case 231:return t.abrupt("break",311);case 232:return t.prev=232,t.next=235,d.logout();case 235:M=t.sent,j.validateClassObject(M,V),H=M.success,w=M.loginFrameHeight,Et(N.EVENT_TYPE.LOGOUT_RESULT,{success:H,loginFrameHeight:w}),t.next=244;break;case 241:t.prev=241,t.t22=t.catch(232),nt(N.ERROR_TYPE.CAN_NOT_LOG_OUT,t.t22,N.MESSAGE_TYPE.LOGOUT);case 244:return t.abrupt("break",311);case 245:return d.handleMessage(e.data.message),t.abrupt("break",311);case 247:return d.wrapUpCall(e.data.call),t.abrupt("break",311);case 249:if(!e.data.isAvailable){t.next=277;break}return t.next=253,d.getActiveCalls();case 253:x=t.sent,j.validateClassObject(x,L),F=x.activeCalls,t.t23=s.a.keys(F);case 257:if((t.t24=t.t23()).done){t.next=277;break}if(B=t.t24.value,W=F[B],!(!W.callInfo||W.callInfo.isReplayable)){t.next=275;break}W.isReplayedCall=!0,t.t25=W.state,t.next=t.t25===N.CALL_STATE.CONNECTED?266:t.t25===N.CALL_STATE.RINGING?268:t.t25===N.CALL_STATE.TRANSFERRING?270:t.t25===N.CALL_STATE.TRANSFERRED?272:274;break;case 266:return Et(N.EVENT_TYPE.CALL_CONNECTED,W),t.abrupt("break",275);case 268:return Et(N.EVENT_TYPE.CALL_STARTED,W),t.abrupt("break",275);case 270:return Et(N.EVENT_TYPE.PARTICIPANT_ADDED,{phoneNumber:W.contact.phoneNumber,callInfo:W.callInfo,initialCallHasEnded:W.callAttributes.initialCallHasEnded,callId:W.callId}),t.abrupt("break",275);case 272:return Et(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{phoneNumber:W.contact.phoneNumber,callInfo:W.callInfo,initialCallHasEnded:W.callAttributes.initialCallHasEnded,callId:W.callId}),t.abrupt("break",275);case 274:return t.abrupt("break",275);case 275:t.next=257;break;case 277:return t.abrupt("break",311);case 278:return t.prev=278,t.next=281,d.setAgentConfig(e.data.config);case 281:K=t.sent,j.validateClassObject(K,m),Et(N.EVENT_TYPE.AGENT_CONFIG_UPDATED,K),t.next=289;break;case 286:t.prev=286,t.t26=t.catch(278),nt(Z(t.t26)===N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER?N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_SET_AGENT_CONFIG,tt(t.t26),N.MESSAGE_TYPE.SET_AGENT_CONFIG);case 289:return t.abrupt("break",311);case 290:return t.prev=290,Q=e.data,q=Q.recordingUrl,J=Q.vendorCallKey,X=Q.callId,t.next=294,d.getSignedRecordingUrl(q,J,X);case 294:at=t.sent,j.validateClassObject(at,y),Et(N.EVENT_TYPE.SIGNED_RECORDING_URL,at),t.next=304;break;case 299:t.prev=299,t.t27=t.catch(290),rt=new y({success:!1}),Et(N.EVENT_TYPE.SIGNED_RECORDING_URL,rt,!1),et(N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL,rt,!0);case 304:return t.abrupt("break",311);case 305:return d.downloadLogs(),t.abrupt("break",311);case 307:return Tt=e.data,ot=Tt.logLevel,it=Tt.logMessage,_t=Tt.payload,d.logMessageToVendor(ot,it,_t),t.abrupt("break",311);case 310:return t.abrupt("break",311);case 311:case"end":return t.stop()}}),t,null,[[5,17],[21,30],[34,46],[50,57],[61,68],[72,79],[89,96],[106,116],[126,135],[148,153],[157,166],[170,177],[181,188],[192,199],[210,217],[221,228],[232,241],[278,286],[290,299]])})))).apply(this,arguments)}function it(t){return _t.apply(this,arguments)}function _t(){return(_t=T()(s.a.mark((function t(e){var E,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next=t.t0===N.MESSAGE_TYPE.SETUP_CONNECTOR?3:29;break;case 3:if(E=/^http[s]?:\/\/[\w-.]+(\.lightning\.force\.com|\.lightning\.pc-rnd\.force\.com|\.stm\.force\.com|\.salesforce\.com|\.my\.salesforce-sites\.com|\.lightning\.localhost\.[\w]+\.force.com)$/,n=new URL(e.origin),a=n.protocol+"//"+n.hostname,!E.test(a)){t.next=27;break}return(P=e.ports[0]).onmessage=Tt,et(N.MESSAGE_TYPE.SETUP_CONNECTOR,null,!1),t.prev=10,t.next=13,d.init(e.data.connectorConfig);case 13:r=t.sent,j.validateClassObject(r,U),r.showLogin?Et(N.EVENT_TYPE.SHOW_LOGIN,{loginFrameHeight:r.loginFrameHeight}):at(),t.next=27;break;case 18:t.prev=18,t.t1=t.catch(10),t.t2=Z(t.t1),t.next=t.t2===N.ERROR_TYPE.INVALID_PARAMS?23:25;break;case 23:return nt(N.ERROR_TYPE.INVALID_PARAMS,tt(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 25:return nt(N.ERROR_TYPE.CAN_NOT_LOG_IN,tt(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 27:return window.removeEventListener("message",it),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:case"end":return t.stop()}}),t,null,[[10,18]])})))).apply(this,arguments)}function st(t,e,E,n){try{return j.validateClassObject(t,e),!0}catch(t){return E&&nt(E,t,n),!1}}function Nt(t){d=t,window.addEventListener("message",it)}function lt(t){et(t.eventType,t.payload,t.isError)}function ct(t){var e=t.eventType,E=t.error;switch(e){case N.EVENT_TYPE.LOGIN_RESULT:nt(N.ERROR_TYPE.CAN_NOT_LOG_IN,E,N.EVENT_TYPE.LOGIN_RESULT);break;case N.EVENT_TYPE.LOGOUT_RESULT:nt(N.ERROR_TYPE.CAN_NOT_LOG_OUT,E,N.EVENT_TYPE.LOGOUT_RESULT);break;case N.EVENT_TYPE.CALL_STARTED:nt(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_STARTED);break;case N.EVENT_TYPE.QUEUED_CALL_STARTED:nt(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.QUEUED_CALL_STARTED);break;case N.EVENT_TYPE.CALL_CONNECTED:nt(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_CONNECTED);break;case N.EVENT_TYPE.HANGUP:nt(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,E,N.EVENT_TYPE.HANGUP);break;case N.EVENT_TYPE.PARTICIPANT_ADDED:nt(Z(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_ADDED);break;case N.EVENT_TYPE.PARTICIPANT_CONNECTED:nt(N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_CONNECTED);break;case N.EVENT_TYPE.PARTICIPANT_REMOVED:nt(N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_REMOVED);break;case N.EVENT_TYPE.MUTE_TOGGLE:nt(N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,E,N.EVENT_TYPE.MUTE_TOGGLE);break;case N.EVENT_TYPE.HOLD_TOGGLE:nt(Z(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,E,N.EVENT_TYPE.HOLD_TOGGLE);break;case N.EVENT_TYPE.RECORDING_TOGGLE:nt(N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,E,N.EVENT_TYPE.RECORDING_TOGGLE);break;case N.EVENT_TYPE.PARTICIPANTS_SWAPPED:nt(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,E,N.EVENT_TYPE.PARTICIPANTS_SWAPPED);break;case N.EVENT_TYPE.PARTICIPANTS_CONFERENCED:nt(N.ERROR_TYPE.CAN_NOT_CONFERENCE,E,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED);break;case N.EVENT_TYPE.AGENT_ERROR:nt(N.ERROR_TYPE.AGENT_ERROR,E,N.EVENT_TYPE.AGENT_ERROR);break;case N.EVENT_TYPE.SOFTPHONE_ERROR:switch(Z(E)){case N.ERROR_TYPE.UNSUPPORTED_BROWSER:nt(N.ERROR_TYPE.UNSUPPORTED_BROWSER,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;case N.ERROR_TYPE.MICROPHONE_NOT_SHARED:nt(N.ERROR_TYPE.MICROPHONE_NOT_SHARED,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;default:nt(N.ERROR_TYPE.GENERIC_ERROR,E,N.EVENT_TYPE.SOFTPHONE_ERROR)}break;default:console.error("Unhandled error scenario with arguments ",arguments)}}function ut(t){return At.apply(this,arguments)}function At(){return(At=T()(s.a.mark((function t(e){var E,n,a,r,T,o,i,_,l,c,u,A,R,O,C,P,p,S,h,f,v,y,U,M,k,H,w,x,j,F,W;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E=e.eventType,n=e.payload,a=e.registerLog,r=void 0===a||a,t.t0=E,t.next=t.t0===N.EVENT_TYPE.LOGIN_RESULT?4:t.t0===N.EVENT_TYPE.LOGOUT_RESULT?6:t.t0===N.EVENT_TYPE.CALL_STARTED?8:t.t0===N.EVENT_TYPE.QUEUED_CALL_STARTED?10:t.t0===N.EVENT_TYPE.CALL_CONNECTED?12:t.t0===N.EVENT_TYPE.HANGUP?14:t.t0===N.EVENT_TYPE.PARTICIPANT_ADDED?16:t.t0===N.EVENT_TYPE.PARTICIPANT_CONNECTED?18:t.t0===N.EVENT_TYPE.PARTICIPANT_REMOVED?20:t.t0===N.EVENT_TYPE.MESSAGE?27:t.t0===N.EVENT_TYPE.AFTER_CALL_WORK_STARTED?29:t.t0===N.EVENT_TYPE.WRAP_UP_ENDED?31:t.t0===N.EVENT_TYPE.REMOTE_CONTROLLER?33:t.t0===N.EVENT_TYPE.MUTE_TOGGLE?35:t.t0===N.EVENT_TYPE.HOLD_TOGGLE?37:t.t0===N.EVENT_TYPE.RECORDING_TOGGLE?40:t.t0===N.EVENT_TYPE.PARTICIPANTS_SWAPPED?43:t.t0===N.EVENT_TYPE.PARTICIPANTS_CONFERENCED?45:t.t0===N.EVENT_TYPE.UPDATE_AUDIO_STATS?47:49;break;case 4:return st(n,m,N.ERROR_TYPE.CAN_NOT_LOG_IN,N.EVENT_TYPE.LOGIN_RESULT)&&(Et(N.EVENT_TYPE.LOGIN_RESULT,n,r),n.success&&at()),t.abrupt("break",49);case 6:return st(n,V,N.ERROR_TYPE.CAN_NOT_LOG_OUT,N.EVENT_TYPE.LOGOUT_RESULT)&&Et(N.EVENT_TYPE.LOGOUT_RESULT,{success:n.success,loginFrameHeight:n.loginFrameHeight},r),t.abrupt("break",49);case 8:return st(n,b,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_STARTED)&&Et(N.EVENT_TYPE.CALL_STARTED,n.call,r),t.abrupt("break",49);case 10:return st(n,b,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.QUEUED_CALL_STARTED)&&Et(N.EVENT_TYPE.QUEUED_CALL_STARTED,n.call,r),t.abrupt("break",49);case 12:return st(n,b,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_CONNECTED)&&($(),Et(N.EVENT_TYPE.CALL_CONNECTED,n.call,r)),t.abrupt("break",49);case 14:return st(n,Y,N.ERROR_TYPE.CAN_NOT_END_THE_CALL,N.EVENT_TYPE.HANGUP)&&(T=z(),n.calls.forEach((function(t){t.mos=T})),Et(N.EVENT_TYPE.HANGUP,n.calls,r)),t.abrupt("break",49);case 16:return st(n,G,N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_ADDED)&&(o=n.initialCallHasEnded,i=n.callInfo,_=n.phoneNumber,l=n.callId,Et(N.EVENT_TYPE.PARTICIPANT_ADDED,{initialCallHasEnded:o,callInfo:i,phoneNumber:_,callId:l},r)),t.abrupt("break",49);case 18:return st(n,G,N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_CONNECTED)&&(c=n.initialCallHasEnded,u=n.callInfo,A=n.phoneNumber,R=n.callId,Et(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:c,callInfo:u,phoneNumber:A,callId:R},r)),t.abrupt("break",49);case 20:if(!st(n,b,N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_REMOVED)){t.next=26;break}return O=n.call,t.next=24,d.getActiveCalls();case 24:st(C=t.sent,L)&&(0===(P=C.activeCalls).length?(p=z(),O.mos=p,Et(N.EVENT_TYPE.HANGUP,O,r)):O&&O.callAttributes&&O.callAttributes.participantType===N.PARTICIPANT_TYPE.INITIAL_CALLER?(S=Object.values(P).filter((function(t){return t.callType===N.CALL_TYPE.ADD_PARTICIPANT})).pop(),Et(S.state===N.CALL_STATE.TRANSFERRING?N.EVENT_TYPE.PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:!0})):Et(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:O?O.reason:null},r));case 26:return t.abrupt("break",49);case 27:return Et(N.EVENT_TYPE.MESSAGE,n,r),t.abrupt("break",49);case 29:return Et(N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,n,r),t.abrupt("break",49);case 31:return Et(N.EVENT_TYPE.WRAP_UP_ENDED,n,r),t.abrupt("break",49);case 33:return Tt(n),t.abrupt("break",49);case 35:return st(n,I,N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,N.EVENT_TYPE.MUTE_TOGGLE)&&Et(N.EVENT_TYPE.MUTE_TOGGLE,n,r),t.abrupt("break",49);case 37:return h=n.isThirdPartyOnHold,f=n.isCustomerOnHold,v=n.calls,st(n,g,N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,N.EVENT_TYPE.HOLD_TOGGLE)&&Et(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:h,isCustomerOnHold:f,calls:v},r),t.abrupt("break",49);case 40:return y=n.isRecordingPaused,U=n.contactId,M=n.initialContactId,k=n.instanceId,H=n.region,st(n,D,N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,N.EVENT_TYPE.RECORDING_TOGGLE)&&Et(N.EVENT_TYPE.RECORDING_TOGGLE,{isRecordingPaused:y,contactId:U,initialContactId:M,instanceId:k,region:H},r),t.abrupt("break",49);case 43:return st(n,g,N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,N.EVENT_TYPE.PARTICIPANTS_SWAPPED)&&(w=n.isThirdPartyOnHold,x=n.isCustomerOnHold,j=n.calls,Et(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:w,isCustomerOnHold:x,calls:j},r)),t.abrupt("break",49);case 45:return st(n,g,N.ERROR_TYPE.CAN_NOT_CONFERENCE,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED)&&(F=n.isThirdPartyOnHold,W=n.isCustomerOnHold,Et(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:F,isCustomerOnHold:W},r)),t.abrupt("break",49);case 47:return st(n,B)&&X(n),t.abrupt("break",49);case 49:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}])}));
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SCVConnectorBase",[],e):"object"==typeof exports?exports.SCVConnectorBase=e():t.SCVConnectorBase=e()}(this,(function(){return function(t){var e={};function E(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,E),a.l=!0,a.exports}return E.m=t,E.c=e,E.d=function(t,e,n){E.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},E.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},E.t=function(t,e){if(1&e&&(t=E(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(E.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)E.d(n,a,function(e){return t[e]}.bind(null,a));return n},E.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return E.d(e,"a",e),e},E.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},E.p="",E(E.s=12)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){t.exports=function(t,e,E){return e in t?Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[e]=E,t}},function(t,e,E){t.exports=E(9)},function(t,e){function E(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=E=function(t){return typeof t}:t.exports=E=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(e)}t.exports=E},function(t,e){function E(t,e,E,n,a,r,T){try{var _=t[r](T),i=_.value}catch(t){return void E(t)}_.done?e(i):Promise.resolve(i).then(n,a)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var T=t.apply(e,n);function _(t){E(T,a,r,_,i,"next",t)}function i(t){E(T,a,r,_,i,"throw",t)}_(void 0)}))}}},function(t,e){function E(e){return t.exports=E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E(e)}t.exports=E},function(t,e){function E(t,e){for(var E=0;E<e.length;E++){var n=e[E];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}},function(t,e,E){var n=E(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,E){var n=E(3),a=E(11);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}},function(t,e,E){var n=function(t){"use strict";var e=Object.prototype,E=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",T=n.toStringTag||"@@toStringTag";function _(t,e,E){return Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{_({},"")}catch(t){_=function(t,e,E){return t[e]=E}}function i(t,e,E,n){var a=e&&e.prototype instanceof s?e:s,r=Object.create(a.prototype),T=new d(n||[]);return r._invoke=function(t,e,E){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return h()}for(E.method=a,E.arg=r;;){var T=E.delegate;if(T){var _=S(T,E);if(_){if(_===N)continue;return _}}if("next"===E.method)E.sent=E._sent=E.arg;else if("throw"===E.method){if("suspendedStart"===n)throw n="completed",E.arg;E.dispatchException(E.arg)}else"return"===E.method&&E.abrupt("return",E.arg);n="executing";var i=o(t,e,E);if("normal"===i.type){if(n=E.done?"completed":"suspendedYield",i.arg===N)continue;return{value:i.arg,done:E.done}}"throw"===i.type&&(n="completed",E.method="throw",E.arg=i.arg)}}}(t,E,T),r}function o(t,e,E){try{return{type:"normal",arg:t.call(e,E)}}catch(t){return{type:"throw",arg:t}}}t.wrap=i;var N={};function s(){}function A(){}function c(){}var l={};l[a]=function(){return this};var R=Object.getPrototypeOf,u=R&&R(R(p([])));u&&u!==e&&E.call(u,a)&&(l=u);var O=c.prototype=s.prototype=Object.create(l);function P(t){["next","throw","return"].forEach((function(e){_(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){var n;this._invoke=function(a,r){function T(){return new e((function(n,T){!function n(a,r,T,_){var i=o(t[a],t,r);if("throw"!==i.type){var N=i.arg,s=N.value;return s&&"object"==typeof s&&E.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,T,_)}),(function(t){n("throw",t,T,_)})):e.resolve(s).then((function(t){N.value=t,T(N)}),(function(t){return n("throw",t,T,_)}))}_(i.arg)}(a,r,n,T)}))}return n=n?n.then(T,T):T()}}function S(t,e){var E=t.iterator[e.method];if(void 0===E){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return N;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var n=o(E,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,N;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,N):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,N)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function p(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(E.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:h}}function h(){return{value:void 0,done:!0}}return A.prototype=O.constructor=c,c.constructor=A,A.displayName=_(c,T,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===A||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_(t,T,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},P(C.prototype),C.prototype[r]=function(){return this},t.AsyncIterator=C,t.async=function(e,E,n,a,r){void 0===r&&(r=Promise);var T=new C(i(e,E,n,a),r);return t.isGeneratorFunction(E)?T:T.next().then((function(t){return t.done?t.value:T.next()}))},P(O),_(O,T,"Generator"),O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var E in t)e.push(E);return e.reverse(),function E(){for(;e.length;){var n=e.pop();if(n in t)return E.value=n,E.done=!1,E}return E.done=!0,E}},t.values=p,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&E.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(E,n){return T.type="throw",T.arg=t,e.next=E,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],T=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var _=E.call(r,"catchLoc"),i=E.call(r,"finallyLoc");if(_&&i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(_){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&E.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var T=r?r.completion:{};return T.type=t,T.arg=e,r?(this.method="next",this.next=r.finallyLoc,N):this.complete(T)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),N},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.finallyLoc===t)return this.complete(E.completion,E.afterLoc),L(E),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.tryLoc===t){var n=E.completion;if("throw"===n.type){var a=n.arg;L(E)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,E){return this.delegate={iterator:p(t),resultName:e,nextLoc:E},"next"===this.method&&(this.arg=void 0),N}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){function E(e,n){return t.exports=E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},E(e,n)}t.exports=E},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,E){"use strict";E.r(e),E.d(e,"initializeConnector",(function(){return bt})),E.d(e,"publishEvent",(function(){return Vt})),E.d(e,"publishError",(function(){return Ut})),E.d(e,"publishLog",(function(){return Yt})),E.d(e,"log",(function(){return G})),E.d(e,"Constants",(function(){return m})),E.d(e,"ActiveCallsResult",(function(){return H})),E.d(e,"AgentConfigResult",(function(){return w})),E.d(e,"AgentConfig",(function(){return x})),E.d(e,"RecordingToggleResult",(function(){return B})),E.d(e,"ParticipantResult",(function(){return j})),E.d(e,"SignedRecordingUrlResult",(function(){return q})),E.d(e,"PhoneContactsResult",(function(){return F})),E.d(e,"CallResult",(function(){return W})),E.d(e,"HangupResult",(function(){return K})),E.d(e,"HoldToggleResult",(function(){return Q})),E.d(e,"InitResult",(function(){return J})),E.d(e,"GenericResult",(function(){return X})),E.d(e,"MuteToggleResult",(function(){return k})),E.d(e,"LogoutResult",(function(){return z})),E.d(e,"CallInfo",(function(){return $})),E.d(e,"PhoneCall",(function(){return et})),E.d(e,"PhoneCallAttributes",(function(){return tt})),E.d(e,"Contact",(function(){return Z})),E.d(e,"Phone",(function(){return M})),E.d(e,"AgentStatusInfo",(function(){return at})),E.d(e,"AudioStatsElement",(function(){return _t})),E.d(e,"AudioStats",(function(){return Tt})),E.d(e,"StatsInfo",(function(){return it})),E.d(e,"VendorConnector",(function(){return Et})),E.d(e,"SuperviseCallResult",(function(){return ot})),E.d(e,"SupervisorHangupResult",(function(){return Nt})),E.d(e,"SupervisedCallInfo",(function(){return rt}));var n=E(2),a=E.n(n),r=E(1),T=E.n(r),_=E(4),i=E.n(_),o=E(3),N=E.n(o),s={MESSAGE_TYPE:{SETUP_CONNECTOR:"SETUP_CONNECTOR",CONNECTOR_READY:"CONNECTOR_READY",LOG:"LOG",TELEPHONY_EVENT_DISPATCHED:"TELEPHONY_EVENT_DISPATCHED",ACCEPT_CALL:"ACCEPT_CALL",DECLINE_CALL:"DECLINE_CALL",END_CALL:"END_CALL",MUTE:"MUTE",UNMUTE:"UNMUTE",HOLD:"HOLD",RESUME:"RESUME",SET_AGENT_STATUS:"SET_AGENT_STATUS",GET_AGENT_STATUS:"GET_AGENT_STATUS",DIAL:"DIAL",SEND_DIGITS:"SEND_DIGITS",GET_PHONE_CONTACTS:"GET_PHONE_CONTACTS",SWAP_PARTICIPANTS:"SWAP_PARTICIPANTS",ADD_PARTICIPANT:"ADD_PARTICIPANT",CONFERENCE:"CONFERENCE",PAUSE_RECORDING:"PAUSE_RECORDING",RESUME_RECORDING:"RESUME_RECORDING",LOGOUT:"LOGOUT",MESSAGE:"MESSAGE",WRAP_UP_CALL:"WRAP_UP_CALL",AGENT_AVAILABLE:"AGENT_AVAILABLE",SET_AGENT_CONFIG:"SET_AGENT_CONFIG",GET_SIGNED_RECORDING_URL:"GET_SIGNED_RECORDING_URL",DOWNLOAD_VENDOR_LOGS:"DOWNLOAD_VENDOR_LOGS",SUPERVISE_CALL:"SUPERVISE_CALL",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN",SUPERVISOR_DISCONNECT:"SUPERVISOR_DISCONNECT"},EVENT_TYPE:{PREVIEW_CALL_STARTED:"PREVIEW_CALL_STARTED",QUEUED_CALL_STARTED:"QUEUED_CALL_STARTED",CALL_STARTED:"CALL_STARTED",CALL_CONNECTED:"CALL_CONNECTED",CALL_FAILED:"CALL_FAILED",MUTE_TOGGLE:"MUTE_TOGGLE",HOLD_TOGGLE:"HOLD_TOGGLE",HANGUP:"HANGUP",ERROR:"ERROR",PHONE_CONTACTS:"PHONE_CONTACTS",PARTICIPANT_ADDED:"PARTICIPANT_ADDED",PARTICIPANT_CONNECTED:"PARTICIPANT_CONNECTED",PARTICIPANT_REMOVED:"PARTICIPANT_REMOVED",LOGIN_STARTED:"LOGIN_STARTED",LOGIN_RESULT:"LOGIN_RESULT",LOGOUT_RESULT:"LOGOUT_RESULT",RECORDING_TOGGLE:"RECORDING_TOGGLE",PARTICIPANTS_SWAPPED:"PARTICIPANTS_SWAPPED",PARTICIPANTS_CONFERENCED:"PARTICIPANTS_CONFERENCED",SHOW_LOGIN:"SHOW_LOGIN",SET_AGENT_STATUS_RESULT:"SET_AGENT_STATUS_RESULT",GET_AGENT_STATUS_RESULT:"GET_AGENT_STATUS_RESULT",WRAP_UP_ENDED:"WRAP_UP_ENDED",MESSAGE:"MESSAGE",AFTER_CALL_WORK_STARTED:"AFTER_CALL_WORK_STARTED",AGENT_CONFIG_UPDATED:"AGENT_CONFIG_UPDATED",AGENT_ERROR:"AGENT_ERROR",SOFTPHONE_ERROR:"SOFTPHONE_ERROR",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",UPDATE_AUDIO_STATS:"UPDATE_AUDIO_STATS",UPDATE_AUDIO_STATS_COMPLETED:"UPDATE_AUDIO_STATS_COMPLETED",SUPERVISOR_BARGED_IN:"SUPERVISOR_BARGED_IN",SUPERVISOR_CALL_STARTED:"SUPERVISOR_CALL_STARTED",SUPERVISOR_CALL_CONNECTED:"SUPERVISOR_CALL_CONNECTED",SUPERVISOR_HANGUP:"SUPERVISOR_HANGUP",CALL_BARGED_IN:"CALL_BARGED_IN",SET_AGENT_STATUS:"SET_AGENT_STATUS",GET_AGENT_STATUS:"GET_AGENT_STATUS"},ERROR_TYPE:{GENERIC_ERROR:"GENERIC_ERROR",AGENT_ERROR:"AGENT_ERROR",MICROPHONE_NOT_SHARED:"MICROPHONE_NOT_SHARED",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",INVALID_AGENT_STATUS:"INVALID_AGENT_STATUS",CAN_NOT_SET_AGENT_STATUS:"CAN_NOT_SET_AGENT_STATUS",LOGIN_REQUIRED:"LOGIN_REQUIRED",CAN_NOT_ACCEPT_THE_CALL:"CAN_NOT_ACCEPT_THE_CALL",CAN_NOT_DECLINE_THE_CALL:"CAN_NOT_DECLINE_THE_CALL",CAN_NOT_END_THE_CALL:"CAN_NOT_END_THE_CALL",CAN_NOT_HOLD_CALL:"CAN_NOT_HOLD_CALL",CAN_NOT_RESUME_CALL:"CAN_NOT_RESUME_CALL",CAN_NOT_MUTE_CALL:"CAN_NOT_MUTE_CALL",CAN_NOT_UNMUTE_CALL:"CAN_NOT_UNMUTE_CALL",CAN_NOT_TOGGLE_MUTE:"CAN_NOT_TOGGLE_MUTE",CAN_NOT_TOGGLE_HOLD:"CAN_NOT_TOGGLE_HOLD",CAN_NOT_TOGGLE_RECORD:"CAN_NOT_TOGGLE_RECORD",INVALID_PARTICIPANT:"INVALID_PARTICIPANT",CAN_NOT_LOG_IN:"CAN_NOT_LOG_IN",CAN_NOT_LOG_OUT:"CAN_NOT_LOG_OUT",INVALID_PARAMS:"INVALID_PARAMS",CAN_NOT_GET_PHONE_CONTACTS:"CAN_NOT_GET_PHONE_CONTACTS",CAN_NOT_SWAP_PARTICIPANTS:"CAN_NOT_SWAP_PARTICIPANTS",CAN_NOT_CONFERENCE:"CAN_NOT_CONFERENCE",INVALID_DESTINATION:"INVALID_DESTINATION",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",CAN_NOT_HANGUP_PARTICIPANT:"CAN_NOT_HANGUP_PARTICIPANT",CAN_NOT_ADD_PARTICIPANT:"CAN_NOT_ADD_PARTICIPANT",CAN_NOT_CONNECT_PARTICIPANT:"CAN_NOT_CONNECT_PARTICIPANT",CAN_NOT_START_THE_CALL:"CAN_NOT_START_THE_CALL",CAN_NOT_PAUSE_RECORDING:"CAN_NOT_PAUSE_RECORDING",CAN_NOT_RESUME_RECORDING:"CAN_NOT_RESUME_RECORDING",CAN_NOT_SET_AGENT_CONFIG:"CAN_NOT_SET_AGENT_CONFIG",CAN_NOT_UPDATE_PHONE_NUMBER:"CAN_NOT_UPDATE_PHONE_NUMBER",CAN_NOT_GET_SIGNED_RECORDING_URL:"CAN_NOT_GET_SIGNED_RECORDING_URL",CAN_NOT_SUPERVISE_CALL:"CAN_NOT_SUPERVISE_CALL",CAN_NOT_DISCONNECT_SUPERVISOR:"CAN_NOT_DISCONNECT_SUPERVISOR",CAN_NOT_BARGE_IN_SUPERVISOR:"CAN_NOT_BARGE_IN_SUPERVISOR",CAN_NOT_BARGE_IN_CALL:"CAN_NOT_BARGE_IN_CALL",CAN_NOT_GET_AGENT_STATUS:"CAN_NOT_GET_AGENT_STATUS"},AGENT_STATUS:{ONLINE:"Online",OFFLINE:"Offline",ACW:"AfterCallWork",CALLBACK_MISSED_OR_REJECTED:"CallbackMissedOrRejected"},PARTICIPANT_TYPE:{AGENT:"Agent",INITIAL_CALLER:"Initial_Caller",THIRD_PARTY:"Third_Party",SUPERVISOR:"Supervisor"},CALL_TYPE:{INBOUND:"Inbound",OUTBOUND:"Outbound",CALLBACK:"Callback",ADD_PARTICIPANT:"AddParticipant"},DIALER_TYPE:{OUTBOUND_PREVIEW:"OutboundPreview",NONE:"None"},CONTACT_TYPE:{PHONEBOOK:"PhoneBook",QUEUE:"Queue",PHONENUMBER:"PhoneNumber",AGENT:"Agent"},AGENT_CONFIG_TYPE:{SHOW_AGENT_SETTINGS:"SHOW_AGENT_SETTINGS",MUTE:"MUTE",RECORD:"RECORD",MERGE:"MERGE",SWAP:"SWAP",PHONES:"PHONES",SELECTED_PHONE:"SELECTED_PHONE",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",DEBUG_ENABLED:"DEBUG_ENABLED",CONTACT_SEARCH:"CONTACT_SEARCH",VENDOR_PROVIDED_AVAILABILITY:"VENDOR_PROVIDED_AVAILABILITY",SUPERVISOR_LISTEN_IN:"SUPERVISOR_LISTEN_IN",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN",MOS:"MOS",BLIND_TRANSFER:"BLIND_TRANSFER"},CALL_STATE:{RINGING:"ringing",CONNECTED:"connected",TRANSFERRING:"transferring",TRANSFERRED:"transferred",ENDED:"ended"},PHONE_TYPE:{DESK_PHONE:"DESK_PHONE",SOFT_PHONE:"SOFT_PHONE"},HANGUP_REASON:{PHONE_CALL_ERROR:"error",PHONE_CALL_ENDED:"ended"},AGENT_AVAILABILITY:{AVAILABLE:"AVAILABLE",BUSY:"BUSY",OFFLINE:"OFFLINE"},REMOVE_PARTICIPANT_VARIANT:{ALWAYS:"ALWAYS",NEVER:"NEVER",ALWAYS_EXCEPT_ON_HOLD:"ALWAYS_EXCEPT_ON_HOLD"},LOG_LEVEL:{ERROR:"ERROR",INFO:"INFO"},LOG_SOURCE:{SYSTEM:"SYSTEM",PARTNER:"PARTNER"},AGENT_STATUS_TYPE:{SALESFORCE_PRESENCE:"SALESFORCE_PRESENCE",EXTERNAL_PRESENCE:"EXTERNAL_PRESENCE"}},A=["/internalNameLabel","/reqGeneralInfo/reqAdapterUrl","/reqGeneralInfo/reqVendorInfoApiName","isACWAllowed","isHVSEnabled","orgDomainName","phoneServiceChannelId","telephonySettingsComponentFqn"],c=["/reqHvcc"],l=E(7),R=E.n(l),u=E(8),O=E.n(u),P=E(5),C=E.n(P),S=E(6),I=E.n(S),L=E(0),d=E.n(L);var p=function(t){return"string"==typeof t?t:JSON.stringify(t)},h=0,f=[];function G(t,e,E){!function(t,e,E){if(!e)throw new Error("Log Message required");t=t||s.LOG_LEVEL.INFO,E=E||s.LOG_SOURCE.PARTNER;var n=[(new Date).toISOString(),p(t),p(E),"".concat(p(e),"\n")].join("|");h+n.length>=75e5&&(f=[],h=0),h+=n.length,f.push(n)}(e,t,E)}function D(){!function(t,e,E){if(document&&t){var n="string"==typeof t?t:JSON.stringify(t),a=new Blob([n],{type:E}),r=document.createElement("a"),T=URL.createObjectURL(a);r.download=e,r.href=T,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(T)}}(f.join(""),"log-".concat((new Date).getTime(),".txt"),"text/plain")}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var E,n=C()(t);if(e){var a=C()(this).constructor;E=Reflect.construct(n,arguments,a)}else E=n.apply(this,arguments);return O()(this,E)}}function b(t,e){var E=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),E.push.apply(E,n)}return E}function Y(t){for(var e=1;e<arguments.length;e++){var E=null!=arguments[e]?arguments[e]:{};e%2?b(Object(E),!0).forEach((function(e){T()(t,e,E[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(E)):b(Object(E)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(E,e))}))}return t}var U,V,g,y,m={EVENT_TYPE:{LOGIN_RESULT:s.EVENT_TYPE.LOGIN_RESULT,LOGOUT_RESULT:s.EVENT_TYPE.LOGOUT_RESULT,CALL_STARTED:s.EVENT_TYPE.CALL_STARTED,QUEUED_CALL_STARTED:s.EVENT_TYPE.QUEUED_CALL_STARTED,PREVIEW_CALL_STARTED:s.EVENT_TYPE.PREVIEW_CALL_STARTED,CALL_CONNECTED:s.EVENT_TYPE.CALL_CONNECTED,HANGUP:s.EVENT_TYPE.HANGUP,MUTE_TOGGLE:s.EVENT_TYPE.MUTE_TOGGLE,HOLD_TOGGLE:s.EVENT_TYPE.HOLD_TOGGLE,RECORDING_TOGGLE:s.EVENT_TYPE.RECORDING_TOGGLE,PARTICIPANTS_SWAPPED:s.EVENT_TYPE.PARTICIPANTS_SWAPPED,PARTICIPANTS_CONFERENCED:s.EVENT_TYPE.PARTICIPANTS_CONFERENCED,PARTICIPANT_ADDED:s.EVENT_TYPE.PARTICIPANT_ADDED,PARTICIPANT_CONNECTED:s.EVENT_TYPE.PARTICIPANT_CONNECTED,PARTICIPANT_REMOVED:s.EVENT_TYPE.PARTICIPANT_REMOVED,MESSAGE:s.EVENT_TYPE.MESSAGE,AFTER_CALL_WORK_STARTED:s.EVENT_TYPE.AFTER_CALL_WORK_STARTED,WRAP_UP_ENDED:s.EVENT_TYPE.WRAP_UP_ENDED,AGENT_ERROR:s.EVENT_TYPE.AGENT_ERROR,SOFTPHONE_ERROR:s.EVENT_TYPE.SOFTPHONE_ERROR,UPDATE_AUDIO_STATS:s.EVENT_TYPE.UPDATE_AUDIO_STATS,SUPERVISOR_BARGED_IN:s.EVENT_TYPE.SUPERVISOR_BARGED_IN,SUPERVISOR_CALL_STARTED:s.EVENT_TYPE.SUPERVISOR_CALL_STARTED,SUPERVISOR_CALL_CONNECTED:s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,SUPERVISOR_HANGUP:s.EVENT_TYPE.SUPERVISOR_HANGUP,SET_AGENT_STATUS:s.EVENT_TYPE.SET_AGENT_STATUS,GET_AGENT_STATUS:s.EVENT_TYPE.GET_AGENT_STATUS},ERROR_TYPE:{GENERIC_ERROR:s.ERROR_TYPE.GENERIC_ERROR,INVALID_PARTICIPANT:s.ERROR_TYPE.INVALID_PARTICIPANT,INVALID_DESTINATION:s.ERROR_TYPE.INVALID_DESTINATION,INVALID_PARAMS:s.ERROR_TYPE.INVALID_PARAMS,INVALID_AGENT_STATUS:s.ERROR_TYPE.INVALID_AGENT_STATUS,CAN_NOT_UPDATE_PHONE_NUMBER:s.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER},AGENT_STATUS:Y({},s.AGENT_STATUS),PARTICIPANT_TYPE:Y({},s.PARTICIPANT_TYPE),CALL_TYPE:Y({},s.CALL_TYPE),DIALER_TYPE:Y({},s.DIALER_TYPE),CONTACT_TYPE:Y({},s.CONTACT_TYPE),CALL_STATE:Y({},s.CALL_STATE),HANGUP_REASON:Y({},s.HANGUP_REASON),PHONE_TYPE:Y({},s.PHONE_TYPE),AGENT_AVAILABILITY:Y({},s.AGENT_AVAILABILITY),REMOVE_PARTICIPANT_VARIANT:Y({},s.REMOVE_PARTICIPANT_VARIANT),LOG_LEVEL:Y({},s.LOG_LEVEL),AgentStatusType:Y({},s.AGENT_STATUS_TYPE)},M=function t(e){var E=e.type,n=e.number;d()(this,t),nt.validateEnum(E,Object.values(s.PHONE_TYPE)),n&&nt.validateString(n),this.type=E,this.number=n},k=function t(e){var E=e.isMuted;d()(this,t),this.isMuted=E},H=function t(e){var E=e.activeCalls,n=void 0===E?[]:E;d()(this,t),n.length>0&&n.forEach((function(t){nt.validateClassObject(t,et)})),this.activeCalls=n},w=function t(e){var E=e.hasMute,n=void 0===E||E,a=e.hasRecord,r=void 0===a||a,T=e.hasMerge,_=void 0===T||T,i=e.hasSwap,o=void 0===i||i,N=e.hasSignedRecordingUrl,A=void 0!==N&&N,c=e.phones,l=void 0===c?[s.PHONE_TYPE.SOFT_PHONE]:c,R=e.selectedPhone,u=void 0===R?new M({type:s.PHONE_TYPE.SOFT_PHONE}):R,O=e.debugEnabled,P=void 0===O||O,C=e.hasContactSearch,S=void 0!==C&&C,I=e.hasAgentAvailability,L=void 0!==I&&I,p=e.supportsMos,h=void 0!==p&&p,f=e.hasSupervisorListenIn,G=void 0!==f&&f,D=e.hasSupervisorBargeIn,v=void 0!==D&&D,b=e.hasBlindTransfer,Y=void 0!==b&&b;d()(this,t),nt.validateBoolean(n),nt.validateBoolean(r),nt.validateBoolean(_),nt.validateBoolean(o),nt.validateBoolean(A),nt.validateClassObject(l,Array),nt.validateBoolean(P),nt.validateClassObject(u,M),nt.validateBoolean(S),nt.validateBoolean(L),nt.validateBoolean(h),nt.validateBoolean(G),nt.validateBoolean(v),nt.validateBoolean(Y),this.hasMute=n,this.hasRecord=r,this.hasMerge=_,this.hasSwap=o,this.hasSignedRecordingUrl=A,this.phones=l,this.selectedPhone=u,this.debugEnabled=P,this.hasContactSearch=S,this.hasAgentAvailability=L,this.supportsMos=h,this.hasSupervisorListenIn=G,this.hasSupervisorBargeIn=v,this.hasBlindTransfer=Y},x=function t(e){var E=e.selectedPhone;d()(this,t),nt.validateClassObject(E,M),this.selectedPhone=E},B=function t(e){var E=e.isRecordingPaused,n=e.contactId,a=void 0===n?null:n,r=e.initialContactId,T=void 0===r?null:r,_=e.instanceId,i=void 0===_?null:_,o=e.region,N=void 0===o?null:o;d()(this,t),this.isRecordingPaused=E,this.contactId=a,this.initialContactId=T,this.instanceId=i,this.region=N},j=function t(e){var E=e.initialCallHasEnded,n=e.callInfo,a=e.phoneNumber,r=e.callId;d()(this,t),nt.validateClassObject(n,$),this.initialCallHasEnded=E,this.callInfo=n,this.phoneNumber=a,this.callId=r},F=function t(e){var E=e.contacts,n=void 0===E?[]:E;d()(this,t),n.length>0&&n.forEach((function(t){nt.validateClassObject(t,Z)})),this.contacts=n},W=function t(e){var E=e.call;d()(this,t),void 0!==E&&nt.validateClassObject(E,et),this.call=E},K=function t(e){var E=e.calls;d()(this,t),E instanceof Array?(E.forEach((function(t){return nt.validateClassObject(t,et)})),this.calls=E):(nt.validateClassObject(E,et),this.calls=[E])},Q=function t(e){var E=e.isThirdPartyOnHold,n=e.isCustomerOnHold,a=e.calls;d()(this,t),a&&(Object.values(a).forEach((function(t){nt.validateClassObject(t,et)})),this.calls=a),this.isThirdPartyOnHold=E,this.isCustomerOnHold=n},q=function t(e){var E=e.success,n=e.url,a=e.duration,r=e.callId;d()(this,t),E&&(nt.validateString(n),nt.validateString(r),a&&nt.validateNumber(a)),this.success=E,this.url=n,this.duration=a,this.callId=r},J=function t(e){var E=e.showLogin,n=void 0!==E&&E,a=e.loginFrameHeight,r=void 0===a?350:a;d()(this,t),this.showLogin=n,this.loginFrameHeight=r},X=function t(e){var E=e.success;d()(this,t),this.success=E},z=function t(e){var E=e.success,n=e.loginFrameHeight,a=void 0===n?350:n;d()(this,t),this.success=E,this.loginFrameHeight=a},$=function t(e){var E=e.callStateTimestamp,n=void 0===E?null:E,a=e.isOnHold,r=e.isMuted,T=void 0!==r&&r,_=e.isRecordingPaused,i=void 0!==_&&_,o=e.initialCallId,N=e.isSoftphoneCall,A=void 0===N||N,c=e.acceptEnabled,l=void 0===c||c,R=e.declineEnabled,u=void 0===R||R,O=e.muteEnabled,P=void 0===O||O,C=e.swapEnabled,S=void 0===C||C,I=e.conferenceEnabled,L=void 0===I||I,p=e.holdEnabled,h=void 0===p||p,f=e.recordEnabled,G=void 0===f||f,D=e.addCallerEnabled,v=void 0===D||D,b=e.extensionEnabled,Y=void 0===b||b,U=e.isReplayable,V=void 0===U||U,g=e.isBargeable,y=void 0!==g&&g,M=e.isExternalTransfer,k=e.removeParticipantVariant,H=void 0===k?m.REMOVE_PARTICIPANT_VARIANT.ALWAYS:k;d()(this,t),n&&nt.validateDate(n),nt.validateBoolean(i),nt.validateBoolean(T),nt.validateBoolean(A),nt.validateBoolean(l),nt.validateBoolean(u),nt.validateBoolean(P),nt.validateBoolean(S),nt.validateBoolean(L),nt.validateBoolean(h),nt.validateBoolean(G),nt.validateBoolean(v),nt.validateBoolean(Y),nt.validateBoolean(y),void 0!==M&&nt.validateBoolean(M),nt.validateEnum(H,Object.values(s.REMOVE_PARTICIPANT_VARIANT)),this.callStateTimestamp=n,this.isRecordingPaused=i,this.isMuted=T,this.isOnHold=a,this.initialCallId=o,this.isSoftphoneCall=A,this.acceptEnabled=l,this.declineEnabled=u,this.muteEnabled=P,this.swapEnabled=S,this.conferenceEnabled=L,this.holdEnabled=h,this.recordEnabled=G,this.addCallerEnabled=v,this.extensionEnabled=Y,this.isReplayable=V,this.isBargeable=y,this.isExternalTransfer=M,this.removeParticipantVariant=H},Z=function t(e){var E=e.phoneNumber,n=e.id,a=e.type,r=e.name,T=e.prefix,_=e.extension,i=e.endpointARN,o=e.queue,N=e.availability;d()(this,t),E&&nt.validateString(E),a&&nt.validateEnum(a,Object.values(s.CONTACT_TYPE)),n&&nt.validateString(n),r&&nt.validateString(r),T&&nt.validateString(T),_&&nt.validateString(_),N&&nt.validateEnum(N,Object.values(s.AGENT_AVAILABILITY)),this.phoneNumber=E,this.id=n,this.type=a,this.name=r,this.prefix=T,this.extension=_,this.endpointARN=i,this.queue=o,s.CONTACT_TYPE.AGENT===this.type?this.availability=N:this.availability=null},tt=function t(e){var E=e.voiceCallId,n=e.participantType,a=e.dialerType,r=void 0===a?m.DIALER_TYPE.NONE:a,T=e.parentId,_=e.isOnHold;d()(this,t),E&&nt.validateString(E),n&&nt.validateEnum(n,Object.values(s.PARTICIPANT_TYPE)),T&&nt.validateString(T),void 0!==_&&nt.validateBoolean(_),nt.validateEnum(r,Object.values(s.DIALER_TYPE)),this.voiceCallId=E,this.participantType=n,this.parentId=T,this.isOnHold=_,this.dialerType=r},et=function t(e){var E=e.callId,n=e.callType,a=e.contact,r=e.state,T=e.callAttributes,_=e.phoneNumber,i=e.callInfo,o=e.reason,N=e.closeCallOnError,A=e.agentStatus;d()(this,t),E&&(nt.validateString(E),this.callId=E),n&&(nt.validateEnum(n,Object.values(s.CALL_TYPE)),this.callType=n),_&&(nt.validateString(_),this.phoneNumber=_),i&&(nt.validateClassObject(i,$),this.callInfo=i),a&&(nt.validateClassObject(a,Z),this.contact=a),o&&(this.reason=o),N&&(this.closeCallOnError=N),A&&(this.agentStatus=A),this.state=r,this.callAttributes=T},Et=function(){function t(){d()(this,t)}return I()(t,[{key:"init",value:function(t){throw new Error("Not implemented")}},{key:"getActiveCalls",value:function(){throw new Error("Not implemented")}},{key:"acceptCall",value:function(t){throw new Error("Not implemented")}},{key:"declineCall",value:function(t){throw new Error("Not implemented")}},{key:"endCall",value:function(t,e){throw new Error("Not implemented")}},{key:"mute",value:function(){throw new Error("Not implemented")}},{key:"unmute",value:function(){throw new Error("Not implemented")}},{key:"hold",value:function(t){throw new Error("Not implemented")}},{key:"resume",value:function(t){throw new Error("Not implemented")}},{key:"setAgentStatus",value:function(t,e){throw new Error("Not implemented")}},{key:"getAgentStatus",value:function(){this.logMessageToVendor(s.LOG_LEVEL.INFO,"getAgentStatus API is NOT Implemented")}},{key:"dial",value:function(t){throw new Error("Not implemented")}},{key:"sendDigits",value:function(t){throw new Error("Not implemented")}},{key:"getPhoneContacts",value:function(){throw new Error("Not implemented")}},{key:"swap",value:function(t,e){throw new Error("Not implemented")}},{key:"conference",value:function(t){throw new Error("Not implemented")}},{key:"addParticipant",value:function(t,e){throw new Error("Not implemented")}},{key:"pauseRecording",value:function(t){throw new Error("Not implemented")}},{key:"resumeRecording",value:function(t){throw new Error("Not implemented")}},{key:"getAgentConfig",value:function(){throw new Error("Not implemented")}},{key:"setAgentConfig",value:function(t){throw new Error("Not implemented")}},{key:"logout",value:function(){throw new Error("Not implemented")}},{key:"handleMessage",value:function(t){throw new Error("Not implemented")}},{key:"wrapUpCall",value:function(t){throw new Error("Not implemented")}},{key:"getSignedRecordingUrl",value:function(t,e,E){throw new Error("Not implemented")}},{key:"downloadLogs",value:function(){D()}},{key:"logMessageToVendor",value:function(t,e,E){}},{key:"superviseCall",value:function(t){throw new Error("Not implemented")}},{key:"supervisorDisconnect",value:function(t){throw new Error("Not implemented")}},{key:"supervisorBargeIn",value:function(t){throw new Error("Not implemented")}}]),t}(),nt=function(){function t(){d()(this,t)}return I()(t,null,[{key:"validateString",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument. Expecting a string but got ".concat(N()(t)));return this}},{key:"validateNumber",value:function(t){if("number"!=typeof t)throw new Error("Invalid argument. Expecting a number but got ".concat(N()(t)));return this}},{key:"validateBoolean",value:function(t){if("boolean"!=typeof t)throw new Error("Invalid argument. Expecting a boolean but got ".concat(N()(t)));return this}},{key:"validateEnum",value:function(t,e){if(!new RegExp(e.join("|"),"i").test(t))throw new Error("Invalid argument. Expecting a value from ".concat(JSON.stringify(e)," but got ").concat(t));return this}},{key:"validateDate",value:function(t){if(!(t instanceof Date))throw new Error("Invalid argument. Expecting a Date object but got ".concat(N()(t)));return this}},{key:"validateClassObject",value:function(t,e){if(!(t instanceof e))throw new Error("Invalid className. Expecting object of class ".concat(e," but got ").concat(N()(t)));return this}}]),t}(),at=function t(e){var E=e.statusType,n=void 0===E?s.AGENT_STATUS_TYPE.SALESFORCE_PRESENCE:E,a=e.statusId,r=e.statusApiName,T=e.statusName;d()(this,t),nt.validateString(a),nt.validateEnum(n,Object.values(s.AGENT_STATUS_TYPE)),r&&nt.validateString(r),T&&nt.validateString(T),this.statusId=a,this.statusApiName=r,this.statusName=T,this.statusType=n},rt=function t(e){var E=e.callId,n=e.voiceCallId,a=e.callType,r=e.from,T=e.to,_=e.supervisorName,i=e.isBargedIn;d()(this,t),nt.validateString(E),this.callId=E,this.voiceCallId=n,this.callType=a,this.from=r,this.to=T,this.supervisorName=_,this.isBargedIn=i},Tt=function t(e){var E=e.callId,n=e.stats,a=e.isAudioStatsCompleted;d()(this,t),E&&(nt.validateString(E),this.callId=E),n&&(nt.validateClassObject(n,Array),n.forEach((function(t){return nt.validateClassObject(t,_t)})),this.stats=n),a&&(nt.validateBoolean(a),this.isAudioStatsCompleted=a)},_t=function t(e){var E=e.inputChannelStats,n=e.outputChannelStats;d()(this,t),E&&nt.validateClassObject(E,it),n&&nt.validateClassObject(n,it),this.inputChannelStats=E,this.outputChannelStats=n},it=function t(e){var E=e.packetsCount,n=e.packetsLost,a=e.jitterBufferMillis,r=e.roundTripTimeMillis;d()(this,t),E=null==E||E<0?0:E,n=null==n||n<0?0:n,a=null==a||a<0?0:a,r=null==r||r<0?0:r,this.statsCount=0,this.packetsCount=E,this.packetsLost=n,this.jitterBufferMillis=a,this.roundTripTimeMillis=r},ot=function t(e){var E=e.call;d()(this,t),nt.validateClassObject(E,et),this.call=E},Nt=function(t){R()(E,t);var e=v(E);function E(t){var n=t.calls;return d()(this,E),e.call(this,{calls:n})}return E}(K),st=!1;function At(t){var e=function(t){var e=U[t];return{packetsCount:e.packetsCount/e.statsCount,packetsLost:e.packetsLost/e.statsCount,jitterBufferMillis:e.jitterBufferMillis/e.statsCount,roundTripTimeMillis:e.roundTripTimeMillis/e.statsCount}}(t),E=e.roundTripTimeMillis+2*e.jitterBufferMillis+10,n=0;return n=E<160?93.2-E/40:93.2-(E-120)/10,1+.035*(n-=e.packetsLost/e.packetsCount*2.5)+7e-6*n*(n-60)*(100-n)}function ct(){st=!0}function lt(){if(st&&U){var t=At("inputChannelStats"),e=At("outputChannelStats");return U=null,isNaN(e)&&isNaN(t)?0:isNaN(e)?t:isNaN(t)?e:Math.min(t,e)}}function Rt(){U=new _t({inputChannelStats:new it({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0}),outputChannelStats:new it({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0})})}function ut(t){U&&t.forEach((function(t){t.inputChannelStats&&(U.inputChannelStats.statsCount++,U.inputChannelStats.packetsCount+=0|t.inputChannelStats.packetsCount,U.inputChannelStats.packetsLost+=0|t.inputChannelStats.packetsLost,U.inputChannelStats.jitterBufferMillis+=0|t.inputChannelStats.jitterBufferMillis,U.inputChannelStats.roundTripTimeMillis+=0|t.inputChannelStats.roundTripTimeMillis),t.outputChannelStats&&(U.outputChannelStats.statsCount++,U.outputChannelStats.packetsCount+=0|t.outputChannelStats.packetsCount,U.outputChannelStats.packetsLost+=0|t.outputChannelStats.packetsLost,U.outputChannelStats.jitterBufferMillis+=0|t.outputChannelStats.jitterBufferMillis,U.outputChannelStats.roundTripTimeMillis+=0|t.outputChannelStats.roundTripTimeMillis)}))}function Ot(t){return t&&t.type?t.type:t}function Pt(t){return t&&t.message?t.message:t}function Ct(t,e,E){var n=function t(e){if(e){if("function"==typeof e)return;if("object"===N()(e)){var E=Array.isArray(e),n=E?[]:{};if(E)e.forEach((function(e){n.push(t(e))}));else for(var a in e)"phoneNumber"!==a&&"number"!==a&&"name"!==a&&"callAttributes"!==a&&(n[a]=t(e[a]));return n}}return e}(e);G({eventType:t,payload:e},E?s.LOG_LEVEL.ERROR:s.LOG_LEVEL.INFO,s.LOG_SOURCE.SYSTEM),V.postMessage({type:s.MESSAGE_TYPE.LOG,payload:{eventType:t,payload:n,isError:E}})}function St(t,e){var E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];V.postMessage({type:s.MESSAGE_TYPE.TELEPHONY_EVENT_DISPATCHED,payload:{telephonyEventType:t,telephonyEventPayload:e}}),E&&Ct(t,e,!1)}function It(t,e,E){console.error("SCV dispatched error ".concat(t," for eventType ").concat(E),e),St(s.EVENT_TYPE.ERROR,{message:s.ERROR_TYPE[t]},!1),Ct(E,{errorType:t,error:e},!0)}function Lt(){return dt.apply(this,arguments)}function dt(){return(dt=i()(a.a.mark((function t(){var e,E,n,r,_,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getAgentConfig();case 3:return E=t.sent,nt.validateClassObject(E,w),E.supportsMos&&ct(),t.next=8,g.getActiveCalls();case 8:n=t.sent,nt.validateClassObject(n,H),r=n.activeCalls,_=s.MESSAGE_TYPE.CONNECTOR_READY,i={agentConfig:(e={},T()(e,s.AGENT_CONFIG_TYPE.MUTE,E.hasMute),T()(e,s.AGENT_CONFIG_TYPE.RECORD,E.hasRecord),T()(e,s.AGENT_CONFIG_TYPE.MERGE,E.hasMerge),T()(e,s.AGENT_CONFIG_TYPE.SWAP,E.hasSwap),T()(e,s.AGENT_CONFIG_TYPE.PHONES,E.phones),T()(e,s.AGENT_CONFIG_TYPE.SIGNED_RECORDING_URL,E.hasSignedRecordingUrl),T()(e,s.AGENT_CONFIG_TYPE.SELECTED_PHONE,E.selectedPhone),T()(e,s.AGENT_CONFIG_TYPE.DEBUG_ENABLED,E.debugEnabled),T()(e,s.AGENT_CONFIG_TYPE.CONTACT_SEARCH,E.hasContactSearch),T()(e,s.AGENT_CONFIG_TYPE.VENDOR_PROVIDED_AVAILABILITY,E.hasAgentAvailability),T()(e,s.AGENT_CONFIG_TYPE.SUPERVISOR_LISTEN_IN,E.hasSupervisorListenIn),T()(e,s.AGENT_CONFIG_TYPE.SUPERVISOR_BARGE_IN,E.hasSupervisorBargeIn),T()(e,s.AGENT_CONFIG_TYPE.MOS,E.supportsMos),T()(e,s.AGENT_CONFIG_TYPE.BLIND_TRANSFER,E.hasBlindTransfer),e),callInProgress:r.length>0?r[0]:null},V.postMessage({type:_,payload:i}),Ct(_,i,!1),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),V.postMessage({type:s.MESSAGE_TYPE.CONNECTOR_READY,payload:{}}),Ct(s.MESSAGE_TYPE.CONNECTOR_READY,{},!1);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}function pt(t){return ht.apply(this,arguments)}function ht(){return(ht=i()(a.a.mark((function t(e){var E,n,r,T,_,i,o,N,A,c,l,R,u,O,P,C,S,I,L,d,p,h,f,G,D,v,b,Y,U,V,m,M,k,w,x,B,j,Q,J,$,tt,et,Et,rt,Tt,_t,it,st,At,ct;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(E=e.data.type)!==s.MESSAGE_TYPE.LOG&&Ct(E,e.data,!1),t.t0=E,t.next=t.t0===s.MESSAGE_TYPE.ACCEPT_CALL?5:t.t0===s.MESSAGE_TYPE.DECLINE_CALL?29:t.t0===s.MESSAGE_TYPE.END_CALL?42:t.t0===s.MESSAGE_TYPE.MUTE?60:t.t0===s.MESSAGE_TYPE.UNMUTE?71:t.t0===s.MESSAGE_TYPE.HOLD?82:t.t0===s.MESSAGE_TYPE.RESUME?99:t.t0===s.MESSAGE_TYPE.SET_AGENT_STATUS?116:t.t0===s.MESSAGE_TYPE.GET_AGENT_STATUS?136:t.t0===s.MESSAGE_TYPE.DIAL?148:t.t0===s.MESSAGE_TYPE.SEND_DIGITS?170:t.t0===s.MESSAGE_TYPE.GET_PHONE_CONTACTS?179:t.t0===s.MESSAGE_TYPE.SWAP_PARTICIPANTS?192:t.t0===s.MESSAGE_TYPE.CONFERENCE?203:t.t0===s.MESSAGE_TYPE.ADD_PARTICIPANT?214:t.t0===s.MESSAGE_TYPE.PAUSE_RECORDING?233:t.t0===s.MESSAGE_TYPE.RESUME_RECORDING?244:t.t0===s.MESSAGE_TYPE.LOGOUT?255:t.t0===s.MESSAGE_TYPE.MESSAGE?268:t.t0===s.MESSAGE_TYPE.WRAP_UP_CALL?270:t.t0===s.MESSAGE_TYPE.AGENT_AVAILABLE?272:t.t0===s.MESSAGE_TYPE.SET_AGENT_CONFIG?310:t.t0===s.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL?322:t.t0===s.MESSAGE_TYPE.DOWNLOAD_VENDOR_LOGS?337:t.t0===s.MESSAGE_TYPE.LOG?339:t.t0===s.MESSAGE_TYPE.SUPERVISE_CALL?342:t.t0===s.MESSAGE_TYPE.SUPERVISOR_DISCONNECT?359:t.t0===s.MESSAGE_TYPE.SUPERVISOR_BARGE_IN?372:384;break;case 5:if(t.prev=5,!e.data.call||!e.data.call.callType||e.data.call.callType.toLowerCase()!==s.CALL_TYPE.OUTBOUND.toLowerCase()){t.next=8;break}return t.abrupt("return");case 8:if(Rt(),!y){t.next=16;break}return t.next=12,g.supervisorDisconnect();case 12:n=t.sent,nt.validateClassObject(n,Nt),y=!1,St(s.EVENT_TYPE.SUPERVISOR_HANGUP,n.calls);case 16:return t.next=18,g.acceptCall(e.data.call);case 18:r=t.sent,nt.validateClassObject(r,W),St((T=r.call).callType.toLowerCase()===s.CALL_TYPE.CALLBACK.toLowerCase()?s.EVENT_TYPE.CALL_STARTED:s.EVENT_TYPE.CALL_CONNECTED,T),t.next=28;break;case 24:t.prev=24,t.t1=t.catch(5),y=!1,It(s.ERROR_TYPE.CAN_NOT_ACCEPT_THE_CALL,t.t1,s.MESSAGE_TYPE.ACCEPT_CALL);case 28:return t.abrupt("break",385);case 29:return t.prev=29,t.next=32,g.declineCall(e.data.call);case 32:_=t.sent,nt.validateClassObject(_,W),i=_.call,St(s.EVENT_TYPE.HANGUP,i),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(29),It(s.ERROR_TYPE.CAN_NOT_DECLINE_THE_CALL,t.t2,s.MESSAGE_TYPE.DECLINE_CALL);case 41:return t.abrupt("break",385);case 42:return t.prev=42,t.next=45,g.endCall(e.data.call,e.data.agentStatus);case 45:return o=t.sent,nt.validateClassObject(o,K),t.next=49,g.getActiveCalls();case 49:N=t.sent,nt.validateClassObject(N,H),A=N.activeCalls,c=o.calls,0===A.length?St(s.EVENT_TYPE.HANGUP,c):St(s.EVENT_TYPE.PARTICIPANT_REMOVED,c.length>0&&c[0]),t.next=59;break;case 56:t.prev=56,t.t3=t.catch(42),It(s.ERROR_TYPE.CAN_NOT_END_THE_CALL,t.t3,s.MESSAGE_TYPE.END_CALL);case 59:return t.abrupt("break",385);case 60:return t.prev=60,t.next=63,g.mute();case 63:l=t.sent,Vt({eventType:s.EVENT_TYPE.MUTE_TOGGLE,payload:l}),t.next=70;break;case 67:t.prev=67,t.t4=t.catch(60),It(s.ERROR_TYPE.CAN_NOT_MUTE_CALL,t.t4,s.MESSAGE_TYPE.MUTE);case 70:return t.abrupt("break",385);case 71:return t.prev=71,t.next=74,g.unmute();case 74:R=t.sent,Vt({eventType:s.EVENT_TYPE.MUTE_TOGGLE,payload:R}),t.next=81;break;case 78:t.prev=78,t.t5=t.catch(71),It(s.ERROR_TYPE.CAN_NOT_UNMUTE_CALL,t.t5,s.MESSAGE_TYPE.UNMUTE);case 81:return t.abrupt("break",385);case 82:return t.prev=82,t.next=85,g.hold(e.data.call);case 85:u=t.sent,Vt({eventType:s.EVENT_TYPE.HOLD_TOGGLE,payload:u}),t.next=98;break;case 89:t.prev=89,t.t6=t.catch(82),t.t7=Ot(t.t6),t.next=t.t7===s.ERROR_TYPE.INVALID_PARTICIPANT?94:96;break;case 94:return It(s.ERROR_TYPE.INVALID_PARTICIPANT,Pt(t.t6),s.MESSAGE_TYPE.HOLD),t.abrupt("break",98);case 96:return It(s.ERROR_TYPE.CAN_NOT_HOLD_CALL,Pt(t.t6),s.MESSAGE_TYPE.HOLD),t.abrupt("break",98);case 98:return t.abrupt("break",385);case 99:return t.prev=99,t.next=102,g.resume(e.data.call);case 102:O=t.sent,Vt({eventType:s.EVENT_TYPE.HOLD_TOGGLE,payload:O}),t.next=115;break;case 106:t.prev=106,t.t8=t.catch(99),t.t9=Ot(t.t8),t.next=t.t9===s.ERROR_TYPE.INVALID_PARTICIPANT?111:113;break;case 111:return It(s.ERROR_TYPE.INVALID_PARTICIPANT,Pt(t.t8),s.MESSAGE_TYPE.RESUME),t.abrupt("break",115);case 113:return It(s.ERROR_TYPE.CAN_NOT_RESUME_CALL,Pt(t.t8),s.MESSAGE_TYPE.RESUME),t.abrupt("break",115);case 115:return t.abrupt("break",385);case 116:return t.prev=116,P=e.data.statusInfo||{},t.next=120,g.setAgentStatus(e.data.agentStatus,P);case 120:C=t.sent,nt.validateClassObject(C,X),S=C.success,St(s.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:S}),t.next=135;break;case 126:t.prev=126,t.t10=t.catch(116),t.t11=Ot(t.t10),t.next=t.t11===s.ERROR_TYPE.INVALID_AGENT_STATUS?131:133;break;case 131:return It(s.ERROR_TYPE.INVALID_AGENT_STATUS,Pt(t.t10),s.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",135);case 133:return It(s.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,Pt(t.t10),s.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",135);case 135:return t.abrupt("break",385);case 136:return t.prev=136,t.next=139,g.getAgentStatus();case 139:I=t.sent,nt.validateClassObject(I,at),St(s.EVENT_TYPE.GET_AGENT_STATUS_RESULT,I),t.next=147;break;case 144:t.prev=144,t.t12=t.catch(136),It(s.ERROR_TYPE.CAN_NOT_GET_AGENT_STATUS,Pt(t.t12),s.MESSAGE_TYPE.GET_AGENT_STATUS);case 147:return t.abrupt("break",385);case 148:return t.prev=148,t.next=151,g.dial(new Z(e.data.contact));case 151:L=t.sent,nt.validateClassObject(L,W),d=L.call,St(s.EVENT_TYPE.CALL_STARTED,d),t.next=169;break;case 157:t.prev=157,t.t13=t.catch(148),St(s.EVENT_TYPE.CALL_FAILED),t.t14=Ot(t.t13),t.next=t.t14===s.ERROR_TYPE.INVALID_DESTINATION?163:t.t14===s.ERROR_TYPE.GENERIC_ERROR?165:167;break;case 163:return It(s.ERROR_TYPE.INVALID_DESTINATION,Pt(t.t13),s.MESSAGE_TYPE.DIAL),t.abrupt("break",169);case 165:return It(s.ERROR_TYPE.GENERIC_ERROR,Pt(t.t13),s.MESSAGE_TYPE.DIAL),t.abrupt("break",169);case 167:return It(s.ERROR_TYPE.CAN_NOT_START_THE_CALL,Pt(t.t13),s.MESSAGE_TYPE.DIAL),t.abrupt("break",169);case 169:return t.abrupt("break",385);case 170:return t.prev=170,t.next=173,g.sendDigits(e.data.digits);case 173:t.next=178;break;case 175:t.prev=175,t.t15=t.catch(170),Ct(s.MESSAGE_TYPE.SEND_DIGITS,e.data.digits,!0);case 178:return t.abrupt("break",385);case 179:return t.prev=179,t.next=182,g.getPhoneContacts(e.data.filter);case 182:p=t.sent,nt.validateClassObject(p,F),h=p.contacts.map((function(t){return{id:t.id,endpointARN:t.endpointARN,queue:t.queue,phoneNumber:t.phoneNumber,name:t.name,type:t.type,extension:t.extension,availability:t.availability}})),St(s.EVENT_TYPE.PHONE_CONTACTS,{contacts:h}),t.next=191;break;case 188:t.prev=188,t.t16=t.catch(179),It(s.ERROR_TYPE.CAN_NOT_GET_PHONE_CONTACTS,t.t16,s.MESSAGE_TYPE.GET_PHONE_CONTACTS);case 191:return t.abrupt("break",385);case 192:return t.prev=192,t.next=195,g.swap(e.data.callToHold,e.data.callToResume);case 195:f=t.sent,Vt({eventType:s.EVENT_TYPE.PARTICIPANTS_SWAPPED,payload:f}),t.next=202;break;case 199:t.prev=199,t.t17=t.catch(192),It(s.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,t.t17,s.MESSAGE_TYPE.SWAP_PARTICIPANTS);case 202:return t.abrupt("break",385);case 203:return t.prev=203,t.next=206,g.conference(e.data.calls);case 206:G=t.sent,Vt({eventType:s.EVENT_TYPE.PARTICIPANTS_CONFERENCED,payload:G}),t.next=213;break;case 210:t.prev=210,t.t18=t.catch(203),It(s.ERROR_TYPE.CAN_NOT_CONFERENCE,t.t18,s.MESSAGE_TYPE.CONFERENCE);case 213:return t.abrupt("break",385);case 214:return t.prev=214,t.next=217,g.addParticipant(new Z(e.data.contact),e.data.call,e.data.isBlindTransfer);case 217:D=t.sent,Vt({eventType:s.EVENT_TYPE.PARTICIPANT_ADDED,payload:D}),e.data.isBlindTransfer&&St(s.EVENT_TYPE.HANGUP,e.data.call),t.next=232;break;case 222:t.prev=222,t.t19=t.catch(214),St(s.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:s.EVENT_TYPE.ERROR.toLowerCase()}),t.t20=Ot(t.t19),t.next=t.t20===s.ERROR_TYPE.INVALID_DESTINATION?228:230;break;case 228:return It(s.ERROR_TYPE.INVALID_DESTINATION,Pt(t.t19),s.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",232);case 230:return It(s.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,Pt(t.t19),s.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",232);case 232:return t.abrupt("break",385);case 233:return t.prev=233,t.next=236,g.pauseRecording(e.data.call);case 236:v=t.sent,Vt({eventType:s.EVENT_TYPE.RECORDING_TOGGLE,payload:v}),t.next=243;break;case 240:t.prev=240,t.t21=t.catch(233),It(s.ERROR_TYPE.CAN_NOT_PAUSE_RECORDING,t.t21,s.MESSAGE_TYPE.PAUSE_RECORDING);case 243:return t.abrupt("break",385);case 244:return t.prev=244,t.next=247,g.resumeRecording(e.data.call);case 247:b=t.sent,Vt({eventType:s.EVENT_TYPE.RECORDING_TOGGLE,payload:b}),t.next=254;break;case 251:t.prev=251,t.t22=t.catch(244),It(s.ERROR_TYPE.CAN_NOT_RESUME_RECORDING,t.t22,s.MESSAGE_TYPE.RESUME_RECORDING);case 254:return t.abrupt("break",385);case 255:return t.prev=255,t.next=258,g.logout();case 258:Y=t.sent,nt.validateClassObject(Y,z),U=Y.success,V=Y.loginFrameHeight,St(s.EVENT_TYPE.LOGOUT_RESULT,{success:U,loginFrameHeight:V}),t.next=267;break;case 264:t.prev=264,t.t23=t.catch(255),It(s.ERROR_TYPE.CAN_NOT_LOG_OUT,t.t23,s.MESSAGE_TYPE.LOGOUT);case 267:return t.abrupt("break",385);case 268:return g.handleMessage(e.data.message),t.abrupt("break",385);case 270:return g.wrapUpCall(e.data.call),t.abrupt("break",385);case 272:if(!e.data.isAvailable){t.next=309;break}return t.next=276,g.getActiveCalls();case 276:m=t.sent,nt.validateClassObject(m,H),M=m.activeCalls,t.t24=a.a.keys(M);case 280:if((t.t25=t.t24()).done){t.next=309;break}if(k=t.t25.value,w=M[k],x=!w.callInfo||w.callInfo.isReplayable,B=w.callAttributes&&w.callAttributes.participantType===s.PARTICIPANT_TYPE.SUPERVISOR,!x){t.next=307;break}w.isReplayedCall=!0,t.t26=w.state,t.next=t.t26===s.CALL_STATE.CONNECTED?290:t.t26===s.CALL_STATE.RINGING?296:t.t26===s.CALL_STATE.TRANSFERRING?302:t.t26===s.CALL_STATE.TRANSFERRED?304:306;break;case 290:if(!B){t.next=294;break}return y=!0,St(s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,w),t.abrupt("break",307);case 294:return St(s.EVENT_TYPE.CALL_CONNECTED,w),t.abrupt("break",307);case 296:if(!B){t.next=300;break}return y=!0,St(s.EVENT_TYPE.SUPERVISOR_CALL_STARTED,w),t.abrupt("break",307);case 300:return St(s.EVENT_TYPE.CALL_STARTED,w),t.abrupt("break",307);case 302:return St(s.EVENT_TYPE.PARTICIPANT_ADDED,{phoneNumber:w.contact.phoneNumber,callInfo:w.callInfo,initialCallHasEnded:w.callAttributes.initialCallHasEnded,callId:w.callId}),t.abrupt("break",307);case 304:return St(s.EVENT_TYPE.PARTICIPANT_CONNECTED,{phoneNumber:w.contact.phoneNumber,callInfo:w.callInfo,initialCallHasEnded:w.callAttributes.initialCallHasEnded,callId:w.callId}),t.abrupt("break",307);case 306:return t.abrupt("break",307);case 307:t.next=280;break;case 309:return t.abrupt("break",385);case 310:return t.prev=310,t.next=313,g.setAgentConfig(e.data.config);case 313:j=t.sent,nt.validateClassObject(j,X),St(s.EVENT_TYPE.AGENT_CONFIG_UPDATED,j),t.next=321;break;case 318:t.prev=318,t.t27=t.catch(310),It(Ot(t.t27)===s.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER?s.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER:s.ERROR_TYPE.CAN_NOT_SET_AGENT_CONFIG,Pt(t.t27),s.MESSAGE_TYPE.SET_AGENT_CONFIG);case 321:return t.abrupt("break",385);case 322:return t.prev=322,Q=e.data,J=Q.recordingUrl,$=Q.vendorCallKey,tt=Q.callId,t.next=326,g.getSignedRecordingUrl(J,$,tt);case 326:et=t.sent,nt.validateClassObject(et,q),St(s.EVENT_TYPE.SIGNED_RECORDING_URL,et),t.next=336;break;case 331:t.prev=331,t.t28=t.catch(322),Et=new q({success:!1}),St(s.EVENT_TYPE.SIGNED_RECORDING_URL,Et,!1),Ct(s.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL,Et,!0);case 336:return t.abrupt("break",385);case 337:return g.downloadLogs(),t.abrupt("break",385);case 339:return rt=e.data,Tt=rt.logLevel,_t=rt.logMessage,it=rt.payload,g.logMessageToVendor(Tt,_t,it),t.abrupt("break",385);case 342:return t.prev=342,y=!0,t.next=346,g.superviseCall(e.data.call);case 346:return st=t.sent,nt.validateClassObject(st,ot),t.next=350,g.getAgentConfig();case 350:t.sent.selectedPhone.type===s.PHONE_TYPE.SOFT_PHONE?St(s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,st.call):St(s.EVENT_TYPE.SUPERVISOR_CALL_STARTED,st.call),t.next=358;break;case 354:t.prev=354,t.t29=t.catch(342),y=!1,It(s.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,t.t29,s.MESSAGE_TYPE.SUPERVISE_CALL);case 358:return t.abrupt("break",385);case 359:return t.prev=359,t.next=362,g.supervisorDisconnect(e.data.call);case 362:At=t.sent,nt.validateClassObject(At,Nt),y=!1,St(s.EVENT_TYPE.SUPERVISOR_HANGUP,At.calls),t.next=371;break;case 368:t.prev=368,t.t30=t.catch(359),It(s.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,t.t30,s.MESSAGE_TYPE.SUPERVISOR_DISCONNECT);case 371:return t.abrupt("break",385);case 372:return t.prev=372,t.next=375,g.supervisorBargeIn(e.data.call);case 375:ct=t.sent,nt.validateClassObject(ct,ot),St(s.EVENT_TYPE.SUPERVISOR_BARGED_IN,ct.call),t.next=383;break;case 380:t.prev=380,t.t31=t.catch(372),It(s.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,t.t31,s.MESSAGE_TYPE.SUPERVISOR_BARGE_IN);case 383:case 384:return t.abrupt("break",385);case 385:case"end":return t.stop()}}),t,null,[[5,24],[29,38],[42,56],[60,67],[71,78],[82,89],[99,106],[116,126],[136,144],[148,157],[170,175],[179,188],[192,199],[203,210],[214,222],[233,240],[244,251],[255,264],[310,318],[322,331],[342,354],[359,368],[372,380]])})))).apply(this,arguments)}function ft(t){return Gt.apply(this,arguments)}function Gt(){return(Gt=i()(a.a.mark((function t(e){var E,n,r,T;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next=t.t0===s.MESSAGE_TYPE.SETUP_CONNECTOR?3:29;break;case 3:if(E=/^http[s]?:\/\/[\w-.]+(\.lightning\.force\.com|\.lightning\.pc-rnd\.force\.com|\.stm\.force\.com|\.salesforce\.com|\.my\.salesforce-sites\.com|\.lightning\.localhost\.[\w]+\.force.com)$/,n=new URL(e.origin),r=n.protocol+"//"+n.hostname,!E.test(r)){t.next=27;break}return(V=e.ports[0]).onmessage=pt,Ct(s.MESSAGE_TYPE.SETUP_CONNECTOR,Dt(e.data.connectorConfig),!1),t.prev=10,t.next=13,g.init(e.data.connectorConfig);case 13:T=t.sent,nt.validateClassObject(T,J),T.showLogin?St(s.EVENT_TYPE.SHOW_LOGIN,{loginFrameHeight:T.loginFrameHeight}):Lt(),t.next=27;break;case 18:t.prev=18,t.t1=t.catch(10),t.t2=Ot(t.t1),t.next=t.t2===s.ERROR_TYPE.INVALID_PARAMS?23:25;break;case 23:return It(s.ERROR_TYPE.INVALID_PARAMS,Pt(t.t1),s.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 25:return It(s.ERROR_TYPE.CAN_NOT_LOG_IN,Pt(t.t1),s.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 27:return window.removeEventListener("message",ft),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:case"end":return t.stop()}}),t,null,[[10,18]])})))).apply(this,arguments)}function Dt(t){t=t||{};var e={};return A.forEach((function(E){t.hasOwnProperty(E)&&(e[E]=t[E])})),c.forEach((function(E){Object.keys(t).forEach((function(n){n.startsWith(E)&&(e[n]=t[n])}))})),e}function vt(t,e,E,n){try{return nt.validateClassObject(t,e),!0}catch(t){return E&&It(E,t,n),!1}}function bt(t){g=t,window.addEventListener("message",ft)}function Yt(t){Ct(t.eventType,t.payload,t.isError)}function Ut(t){var e=t.eventType,E=t.error;switch(e){case s.EVENT_TYPE.LOGIN_RESULT:It(s.ERROR_TYPE.CAN_NOT_LOG_IN,E,s.EVENT_TYPE.LOGIN_RESULT);break;case s.EVENT_TYPE.LOGOUT_RESULT:It(s.ERROR_TYPE.CAN_NOT_LOG_OUT,E,s.EVENT_TYPE.LOGOUT_RESULT);break;case s.EVENT_TYPE.CALL_STARTED:It(s.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,s.EVENT_TYPE.CALL_STARTED);break;case s.EVENT_TYPE.QUEUED_CALL_STARTED:It(s.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,s.EVENT_TYPE.QUEUED_CALL_STARTED);break;case s.EVENT_TYPE.CALL_CONNECTED:It(s.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,s.EVENT_TYPE.CALL_CONNECTED);break;case s.EVENT_TYPE.HANGUP:It(s.ERROR_TYPE.CAN_NOT_END_THE_CALL,E,s.EVENT_TYPE.HANGUP);break;case s.EVENT_TYPE.PARTICIPANT_ADDED:It(Ot(E)===s.ERROR_TYPE.INVALID_PARTICIPANT?s.ERROR_TYPE.INVALID_PARTICIPANT:s.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,E,s.EVENT_TYPE.PARTICIPANT_ADDED);break;case s.EVENT_TYPE.PARTICIPANT_CONNECTED:It(s.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,E,s.EVENT_TYPE.PARTICIPANT_CONNECTED);break;case s.EVENT_TYPE.PARTICIPANT_REMOVED:It(s.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,E,s.EVENT_TYPE.PARTICIPANT_REMOVED);break;case s.EVENT_TYPE.MUTE_TOGGLE:It(s.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,E,s.EVENT_TYPE.MUTE_TOGGLE);break;case s.EVENT_TYPE.HOLD_TOGGLE:It(Ot(E)===s.ERROR_TYPE.INVALID_PARTICIPANT?s.ERROR_TYPE.INVALID_PARTICIPANT:s.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,E,s.EVENT_TYPE.HOLD_TOGGLE);break;case s.EVENT_TYPE.RECORDING_TOGGLE:It(s.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,E,s.EVENT_TYPE.RECORDING_TOGGLE);break;case s.EVENT_TYPE.PARTICIPANTS_SWAPPED:It(s.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,E,s.EVENT_TYPE.PARTICIPANTS_SWAPPED);break;case s.EVENT_TYPE.PARTICIPANTS_CONFERENCED:It(s.ERROR_TYPE.CAN_NOT_CONFERENCE,E,s.EVENT_TYPE.PARTICIPANTS_CONFERENCED);break;case s.EVENT_TYPE.AGENT_ERROR:It(s.ERROR_TYPE.AGENT_ERROR,E,s.EVENT_TYPE.AGENT_ERROR);break;case s.EVENT_TYPE.SOFTPHONE_ERROR:switch(Ot(E)){case s.ERROR_TYPE.UNSUPPORTED_BROWSER:It(s.ERROR_TYPE.UNSUPPORTED_BROWSER,E,s.EVENT_TYPE.SOFTPHONE_ERROR);break;case s.ERROR_TYPE.MICROPHONE_NOT_SHARED:It(s.ERROR_TYPE.MICROPHONE_NOT_SHARED,E,s.EVENT_TYPE.SOFTPHONE_ERROR);break;default:It(s.ERROR_TYPE.GENERIC_ERROR,E,s.EVENT_TYPE.SOFTPHONE_ERROR)}break;default:console.error("Unhandled error scenario with arguments ",arguments)}}function Vt(t){return gt.apply(this,arguments)}function gt(){return(gt=i()(a.a.mark((function t(e){var E,n,r,T,_,i,o,N,A,c,l,R,u,O,P,C,S,I,L,d,p,h,f,G,D,v,b,Y,U,V,m,M,w;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E=e.eventType,n=e.payload,r=e.registerLog,T=void 0===r||r,t.t0=E,t.next=t.t0===s.EVENT_TYPE.LOGIN_RESULT?4:t.t0===s.EVENT_TYPE.LOGOUT_RESULT?6:t.t0===s.EVENT_TYPE.CALL_STARTED?8:t.t0===s.EVENT_TYPE.QUEUED_CALL_STARTED?10:t.t0===s.EVENT_TYPE.PREVIEW_CALL_STARTED?12:t.t0===s.EVENT_TYPE.CALL_CONNECTED?14:t.t0===s.EVENT_TYPE.HANGUP?27:t.t0===s.EVENT_TYPE.PARTICIPANT_ADDED?29:t.t0===s.EVENT_TYPE.PARTICIPANT_CONNECTED?31:t.t0===s.EVENT_TYPE.PARTICIPANT_REMOVED?33:t.t0===s.EVENT_TYPE.MESSAGE?40:t.t0===s.EVENT_TYPE.AFTER_CALL_WORK_STARTED?42:t.t0===s.EVENT_TYPE.WRAP_UP_ENDED?44:t.t0===s.EVENT_TYPE.REMOTE_CONTROLLER?46:t.t0===s.EVENT_TYPE.MUTE_TOGGLE?48:t.t0===s.EVENT_TYPE.HOLD_TOGGLE?50:t.t0===s.EVENT_TYPE.RECORDING_TOGGLE?53:t.t0===s.EVENT_TYPE.PARTICIPANTS_SWAPPED?56:t.t0===s.EVENT_TYPE.PARTICIPANTS_CONFERENCED?58:t.t0===s.EVENT_TYPE.UPDATE_AUDIO_STATS?60:t.t0===s.EVENT_TYPE.SUPERVISOR_BARGED_IN?62:t.t0===s.EVENT_TYPE.CALL_BARGED_IN?64:t.t0===s.EVENT_TYPE.SUPERVISOR_CALL_STARTED?66:t.t0===s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED?68:t.t0===s.EVENT_TYPE.SUPERVISOR_HANGUP?70:t.t0===s.EVENT_TYPE.SET_AGENT_STATUS?72:t.t0===s.EVENT_TYPE.GET_AGENT_STATUS?74:76;break;case 4:return vt(n,X,s.ERROR_TYPE.CAN_NOT_LOG_IN,s.EVENT_TYPE.LOGIN_RESULT)&&(St(s.EVENT_TYPE.LOGIN_RESULT,n,T),n.success&&Lt()),t.abrupt("break",76);case 6:return vt(n,z,s.ERROR_TYPE.CAN_NOT_LOG_OUT,s.EVENT_TYPE.LOGOUT_RESULT)&&St(s.EVENT_TYPE.LOGOUT_RESULT,{success:n.success,loginFrameHeight:n.loginFrameHeight},T),t.abrupt("break",76);case 8:return vt(n,W,s.ERROR_TYPE.CAN_NOT_START_THE_CALL,s.EVENT_TYPE.CALL_STARTED)&&St(s.EVENT_TYPE.CALL_STARTED,n.call,T),t.abrupt("break",76);case 10:return vt(n,W,s.ERROR_TYPE.CAN_NOT_START_THE_CALL,s.EVENT_TYPE.QUEUED_CALL_STARTED)&&St(s.EVENT_TYPE.QUEUED_CALL_STARTED,n.call,T),t.abrupt("break",76);case 12:return vt(n,W,s.ERROR_TYPE.CAN_NOT_START_THE_CALL,s.EVENT_TYPE.PREVIEW_CALL_STARTED)&&St(s.EVENT_TYPE.CALL_STARTED,n.call,T),t.abrupt("break",76);case 14:if(!vt(n,W,s.ERROR_TYPE.CAN_NOT_START_THE_CALL,s.EVENT_TYPE.CALL_CONNECTED)){t.next=26;break}if(Rt(),!y){t.next=25;break}return t.next=19,g.supervisorDisconnect();case 19:return _=t.sent,nt.validateClassObject(_,Nt),y=!1,St(s.EVENT_TYPE.SUPERVISOR_HANGUP,_,T),St(s.EVENT_TYPE.CALL_CONNECTED,n.call,T),t.abrupt("break",76);case 25:St(s.EVENT_TYPE.CALL_CONNECTED,n.call,T);case 26:return t.abrupt("break",76);case 27:return vt(n,K,s.ERROR_TYPE.CAN_NOT_END_THE_CALL,s.EVENT_TYPE.HANGUP)&&St(s.EVENT_TYPE.HANGUP,n.calls,T),t.abrupt("break",76);case 29:return vt(n,j,s.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,s.EVENT_TYPE.PARTICIPANT_ADDED)&&(i=n.initialCallHasEnded,o=n.callInfo,N=n.phoneNumber,A=n.callId,St(s.EVENT_TYPE.PARTICIPANT_ADDED,{initialCallHasEnded:i,callInfo:o,phoneNumber:N,callId:A},T)),t.abrupt("break",76);case 31:return vt(n,j,s.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,s.EVENT_TYPE.PARTICIPANT_CONNECTED)&&(c=n.initialCallHasEnded,l=n.callInfo,R=n.phoneNumber,u=n.callId,St(s.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:c,callInfo:l,phoneNumber:R,callId:u},T)),t.abrupt("break",76);case 33:if(!vt(n,W,s.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,s.EVENT_TYPE.PARTICIPANT_REMOVED)){t.next=39;break}return O=n.call,t.next=37,g.getActiveCalls();case 37:vt(P=t.sent,H)&&(0===(C=P.activeCalls).length?St(s.EVENT_TYPE.HANGUP,O,T):O&&O.callAttributes&&O.callAttributes.participantType===s.PARTICIPANT_TYPE.INITIAL_CALLER?(S=Object.values(C).filter((function(t){return t.callType===s.CALL_TYPE.ADD_PARTICIPANT})).pop(),St(S.state===s.CALL_STATE.TRANSFERRING?s.EVENT_TYPE.PARTICIPANT_ADDED:s.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:!0})):St(s.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:O?O.reason:null},T));case 39:return t.abrupt("break",76);case 40:return St(s.EVENT_TYPE.MESSAGE,n,T),t.abrupt("break",76);case 42:return St(s.EVENT_TYPE.AFTER_CALL_WORK_STARTED,n,T),t.abrupt("break",76);case 44:return St(s.EVENT_TYPE.WRAP_UP_ENDED,n,T),t.abrupt("break",76);case 46:return pt(n),t.abrupt("break",76);case 48:return vt(n,k,s.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,s.EVENT_TYPE.MUTE_TOGGLE)&&St(s.EVENT_TYPE.MUTE_TOGGLE,n,T),t.abrupt("break",76);case 50:return I=n.isThirdPartyOnHold,L=n.isCustomerOnHold,d=n.calls,vt(n,Q,s.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,s.EVENT_TYPE.HOLD_TOGGLE)&&St(s.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:I,isCustomerOnHold:L,calls:d},T),t.abrupt("break",76);case 53:return p=n.isRecordingPaused,h=n.contactId,f=n.initialContactId,G=n.instanceId,D=n.region,vt(n,B,s.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,s.EVENT_TYPE.RECORDING_TOGGLE)&&St(s.EVENT_TYPE.RECORDING_TOGGLE,{isRecordingPaused:p,contactId:h,initialContactId:f,instanceId:G,region:D},T),t.abrupt("break",76);case 56:return vt(n,Q,s.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,s.EVENT_TYPE.PARTICIPANTS_SWAPPED)&&(v=n.isThirdPartyOnHold,b=n.isCustomerOnHold,Y=n.calls,St(s.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:v,isCustomerOnHold:b,calls:Y},T)),t.abrupt("break",76);case 58:return vt(n,Q,s.ERROR_TYPE.CAN_NOT_CONFERENCE,s.EVENT_TYPE.PARTICIPANTS_CONFERENCED)&&(U=n.isThirdPartyOnHold,V=n.isCustomerOnHold,St(s.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:U,isCustomerOnHold:V},T)),t.abrupt("break",76);case 60:return vt(n,Tt)&&(n.stats&&ut(n.stats),n.isAudioStatsCompleted&&n.callId&&(m=n.callId,M=lt(),St(s.EVENT_TYPE.UPDATE_AUDIO_STATS_COMPLETED,{callId:m,mos:M},T))),t.abrupt("break",76);case 62:return vt(n,ot,s.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,s.EVENT_TYPE.SUPERVISOR_BARGED_IN)&&St(s.EVENT_TYPE.SUPERVISOR_BARGED_IN,n.call,T),t.abrupt("break",76);case 64:return vt(n,rt,s.ERROR_TYPE.GENERIC_ERROR,s.EVENT_TYPE.CALL_BARGED_IN)&&St(s.EVENT_TYPE.CALL_BARGED_IN,n,T),t.abrupt("break",76);case 66:return vt(n,ot,s.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,s.EVENT_TYPE.SUPERVISOR_CALL_STARTED)&&(y=!0,St(s.EVENT_TYPE.SUPERVISOR_CALL_STARTED,n.call,T)),t.abrupt("break",76);case 68:return vt(n,ot,s.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED)&&(y=!0,St(s.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,n.call,T)),t.abrupt("break",76);case 70:return vt(n,Nt,s.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,s.EVENT_TYPE.SUPERVISOR_HANGUP)&&(y=!1,St(s.EVENT_TYPE.SUPERVISOR_HANGUP,n.calls,T)),t.abrupt("break",76);case 72:return vt(n,at,s.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,s.EVENT_TYPE.SET_AGENT_STATUS)&&(w=n.statusId,St(s.EVENT_TYPE.SET_AGENT_STATUS,{statusId:w},T)),t.abrupt("break",76);case 74:return vt(n,at,s.ERROR_TYPE.CAN_NOT_GET_AGENT_STATUS,s.EVENT_TYPE.GET_AGENT_STATUS)&&St(s.EVENT_TYPE.GET_AGENT_STATUS,n),t.abrupt("break",76);case 76:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}])}));
//# sourceMappingURL=scv-connector-base.js.map
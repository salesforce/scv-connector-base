!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SCVConnectorBase",[],e):"object"==typeof exports?exports.SCVConnectorBase=e():t.SCVConnectorBase=e()}(this,(function(){return function(t){var e={};function E(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,E),n.l=!0,n.exports}return E.m=t,E.c=e,E.d=function(t,e,r){E.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},E.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},E.t=function(t,e){if(1&e&&(t=E(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(E.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)E.d(r,n,function(e){return t[e]}.bind(null,n));return r},E.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return E.d(e,"a",e),e},E.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},E.p="",E(E.s=12)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,E){return e in t?Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[e]=E,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){t.exports=E(9)},function(t,e){function E(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=E=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=E=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),E(e)}t.exports=E,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e){for(var E=0;E<e.length;E++){var r=e[E];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e,E,r,n,a,T){try{var o=t[a](T),_=o.value}catch(t){return void E(t)}o.done?e(_):Promise.resolve(_).then(r,n)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var T=t.apply(e,r);function o(t){E(T,n,a,o,_,"next",t)}function _(t){E(T,n,a,o,_,"throw",t)}o(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(e){return t.exports=E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,E(e)}t.exports=E,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){var r=E(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){var r=E(3).default,n=E(11);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){var r=function(t){"use strict";var e=Object.prototype,E=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",T=r.toStringTag||"@@toStringTag";function o(t,e,E){return Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,E){return t[e]=E}}function _(t,e,E,r){var n=e&&e.prototype instanceof N?e:N,a=Object.create(n.prototype),T=new p(r||[]);return a._invoke=function(t,e,E){var r="suspendedStart";return function(n,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw a;return f()}for(E.method=n,E.arg=a;;){var T=E.delegate;if(T){var o=S(T,E);if(o){if(o===s)continue;return o}}if("next"===E.method)E.sent=E._sent=E.arg;else if("throw"===E.method){if("suspendedStart"===r)throw r="completed",E.arg;E.dispatchException(E.arg)}else"return"===E.method&&E.abrupt("return",E.arg);r="executing";var _=i(t,e,E);if("normal"===_.type){if(r=E.done?"completed":"suspendedYield",_.arg===s)continue;return{value:_.arg,done:E.done}}"throw"===_.type&&(r="completed",E.method="throw",E.arg=_.arg)}}}(t,E,T),a}function i(t,e,E){try{return{type:"normal",arg:t.call(e,E)}}catch(t){return{type:"throw",arg:t}}}t.wrap=_;var s={};function N(){}function l(){}function c(){}var u={};o(u,n,(function(){return this}));var A=Object.getPrototypeOf,R=A&&A(A(L([])));R&&R!==e&&E.call(R,n)&&(u=R);var O=c.prototype=N.prototype=Object.create(u);function P(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){var r;this._invoke=function(n,a){function T(){return new e((function(r,T){!function r(n,a,T,o){var _=i(t[n],t,a);if("throw"!==_.type){var s=_.arg,N=s.value;return N&&"object"==typeof N&&E.call(N,"__await")?e.resolve(N.__await).then((function(t){r("next",t,T,o)}),(function(t){r("throw",t,T,o)})):e.resolve(N).then((function(t){s.value=t,T(s)}),(function(t){return r("throw",t,T,o)}))}o(_.arg)}(n,a,r,T)}))}return r=r?r.then(T,T):T()}}function S(t,e){var E=t.iterator[e.method];if(void 0===E){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=i(E,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var n=r.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function L(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(E.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:f}}function f(){return{value:void 0,done:!0}}return l.prototype=c,o(O,"constructor",c),o(c,"constructor",l),l.displayName=o(c,T,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,o(t,T,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},P(C.prototype),o(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,E,r,n,a){void 0===a&&(a=Promise);var T=new C(_(e,E,r,n),a);return t.isGeneratorFunction(E)?T:T.next().then((function(t){return t.done?t.value:T.next()}))},P(O),o(O,T,"Generator"),o(O,n,(function(){return this})),o(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var E in t)e.push(E);return e.reverse(),function E(){for(;e.length;){var r=e.pop();if(r in t)return E.value=r,E.done=!1,E}return E.done=!0,E}},t.values=L,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&E.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(E,r){return T.type="throw",T.arg=t,e.next=E,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],T=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=E.call(a,"catchLoc"),_=E.call(a,"finallyLoc");if(o&&_){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&E.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var T=a?a.completion:{};return T.type=t,T.arg=e,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(T)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.finallyLoc===t)return this.complete(E.completion,E.afterLoc),I(E),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.tryLoc===t){var r=E.completion;if("throw"===r.type){var n=r.arg;I(E)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,E){return this.delegate={iterator:L(t),resultName:e,nextLoc:E},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e){function E(e,r){return t.exports=E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,E(e,r)}t.exports=E,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){"use strict";E.r(e),E.d(e,"initializeConnector",(function(){return vt})),E.d(e,"publishEvent",(function(){return Yt})),E.d(e,"publishError",(function(){return bt})),E.d(e,"publishLog",(function(){return Gt})),E.d(e,"downloadData",(function(){return I})),E.d(e,"logger",(function(){return At})),E.d(e,"Constants",(function(){return D})),E.d(e,"ActiveCallsResult",(function(){return b})),E.d(e,"AgentConfigResult",(function(){return Y})),E.d(e,"AgentConfig",(function(){return U})),E.d(e,"RecordingToggleResult",(function(){return V})),E.d(e,"ParticipantResult",(function(){return g})),E.d(e,"SignedRecordingUrlResult",(function(){return H})),E.d(e,"PhoneContactsResult",(function(){return y})),E.d(e,"CallResult",(function(){return m})),E.d(e,"HangupResult",(function(){return M})),E.d(e,"HoldToggleResult",(function(){return k})),E.d(e,"InitResult",(function(){return x})),E.d(e,"GenericResult",(function(){return w})),E.d(e,"MuteToggleResult",(function(){return G})),E.d(e,"LogoutResult",(function(){return B})),E.d(e,"CallInfo",(function(){return j})),E.d(e,"PhoneCall",(function(){return K})),E.d(e,"PhoneCallAttributes",(function(){return W})),E.d(e,"Contact",(function(){return F})),E.d(e,"Phone",(function(){return v})),E.d(e,"AgentStatusInfo",(function(){return q})),E.d(e,"AudioStatsElement",(function(){return $})),E.d(e,"AudioStats",(function(){return z})),E.d(e,"StatsInfo",(function(){return X})),E.d(e,"VendorConnector",(function(){return Q})),E.d(e,"SuperviseCallResult",(function(){return Z})),E.d(e,"SupervisorHangupResult",(function(){return tt}));var r=E(1),n=E.n(r),a=E(5),T=E.n(a),o=E(3),_=E.n(o),i=E(2),s=E.n(i),N={MESSAGE_TYPE:{SETUP_CONNECTOR:"SETUP_CONNECTOR",CONNECTOR_READY:"CONNECTOR_READY",LOG:"LOG",TELEPHONY_EVENT_DISPATCHED:"TELEPHONY_EVENT_DISPATCHED",ACCEPT_CALL:"ACCEPT_CALL",DECLINE_CALL:"DECLINE_CALL",END_CALL:"END_CALL",MUTE:"MUTE",UNMUTE:"UNMUTE",HOLD:"HOLD",RESUME:"RESUME",SET_AGENT_STATUS:"SET_AGENT_STATUS",DIAL:"DIAL",SEND_DIGITS:"SEND_DIGITS",GET_PHONE_CONTACTS:"GET_PHONE_CONTACTS",SWAP_PARTICIPANTS:"SWAP_PARTICIPANTS",ADD_PARTICIPANT:"ADD_PARTICIPANT",CONFERENCE:"CONFERENCE",PAUSE_RECORDING:"PAUSE_RECORDING",RESUME_RECORDING:"RESUME_RECORDING",LOGOUT:"LOGOUT",MESSAGE:"MESSAGE",WRAP_UP_CALL:"WRAP_UP_CALL",AGENT_AVAILABLE:"AGENT_AVAILABLE",SET_AGENT_CONFIG:"SET_AGENT_CONFIG",GET_SIGNED_RECORDING_URL:"GET_SIGNED_RECORDING_URL",DOWNLOAD_VENDOR_LOGS:"DOWNLOAD_VENDOR_LOGS",DOWNLOAD_RESELL_LOGS:"DOWNLOAD_RESELL_LOGS",SUPERVISE_CALL:"SUPERVISE_CALL",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN",SUPERVISOR_DISCONNECT:"SUPERVISOR_DISCONNECT"},EVENT_TYPE:{PREVIEW_CALL_STARTED:"PREVIEW_CALL_STARTED",QUEUED_CALL_STARTED:"QUEUED_CALL_STARTED",CALL_STARTED:"CALL_STARTED",CALL_CONNECTED:"CALL_CONNECTED",CALL_FAILED:"CALL_FAILED",MUTE_TOGGLE:"MUTE_TOGGLE",HOLD_TOGGLE:"HOLD_TOGGLE",HANGUP:"HANGUP",ERROR:"ERROR",PHONE_CONTACTS:"PHONE_CONTACTS",PARTICIPANT_ADDED:"PARTICIPANT_ADDED",PARTICIPANT_CONNECTED:"PARTICIPANT_CONNECTED",PARTICIPANT_REMOVED:"PARTICIPANT_REMOVED",LOGIN_STARTED:"LOGIN_STARTED",LOGIN_RESULT:"LOGIN_RESULT",LOGOUT_RESULT:"LOGOUT_RESULT",RECORDING_TOGGLE:"RECORDING_TOGGLE",PARTICIPANTS_SWAPPED:"PARTICIPANTS_SWAPPED",PARTICIPANTS_CONFERENCED:"PARTICIPANTS_CONFERENCED",SHOW_LOGIN:"SHOW_LOGIN",SET_AGENT_STATUS_RESULT:"SET_AGENT_STATUS_RESULT",WRAP_UP_ENDED:"WRAP_UP_ENDED",MESSAGE:"MESSAGE",AFTER_CALL_WORK_STARTED:"AFTER_CALL_WORK_STARTED",AGENT_CONFIG_UPDATED:"AGENT_CONFIG_UPDATED",AGENT_ERROR:"AGENT_ERROR",SOFTPHONE_ERROR:"SOFTPHONE_ERROR",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",UPDATE_AUDIO_STATS:"UPDATE_AUDIO_STATS",UPDATE_AUDIO_STATS_COMPLETED:"UPDATE_AUDIO_STATS_COMPLETED",SUPERVISOR_BARGED_IN:"SUPERVISOR_BARGED_IN",SUPERVISOR_CALL_STARTED:"SUPERVISOR_CALL_STARTED",SUPERVISOR_CALL_CONNECTED:"SUPERVISOR_CALL_CONNECTED",SUPERVISOR_HANGUP:"SUPERVISOR_HANGUP",SET_AGENT_STATUS:"SET_AGENT_STATUS"},ERROR_TYPE:{GENERIC_ERROR:"GENERIC_ERROR",AGENT_ERROR:"AGENT_ERROR",MICROPHONE_NOT_SHARED:"MICROPHONE_NOT_SHARED",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",INVALID_AGENT_STATUS:"INVALID_AGENT_STATUS",CAN_NOT_SET_AGENT_STATUS:"CAN_NOT_SET_AGENT_STATUS",LOGIN_REQUIRED:"LOGIN_REQUIRED",CAN_NOT_ACCEPT_THE_CALL:"CAN_NOT_ACCEPT_THE_CALL",CAN_NOT_DECLINE_THE_CALL:"CAN_NOT_DECLINE_THE_CALL",CAN_NOT_END_THE_CALL:"CAN_NOT_END_THE_CALL",CAN_NOT_HOLD_CALL:"CAN_NOT_HOLD_CALL",CAN_NOT_RESUME_CALL:"CAN_NOT_RESUME_CALL",CAN_NOT_MUTE_CALL:"CAN_NOT_MUTE_CALL",CAN_NOT_UNMUTE_CALL:"CAN_NOT_UNMUTE_CALL",CAN_NOT_TOGGLE_MUTE:"CAN_NOT_TOGGLE_MUTE",CAN_NOT_TOGGLE_HOLD:"CAN_NOT_TOGGLE_HOLD",CAN_NOT_TOGGLE_RECORD:"CAN_NOT_TOGGLE_RECORD",INVALID_PARTICIPANT:"INVALID_PARTICIPANT",CAN_NOT_LOG_IN:"CAN_NOT_LOG_IN",CAN_NOT_LOG_OUT:"CAN_NOT_LOG_OUT",INVALID_PARAMS:"INVALID_PARAMS",CAN_NOT_GET_PHONE_CONTACTS:"CAN_NOT_GET_PHONE_CONTACTS",CAN_NOT_SWAP_PARTICIPANTS:"CAN_NOT_SWAP_PARTICIPANTS",CAN_NOT_CONFERENCE:"CAN_NOT_CONFERENCE",INVALID_DESTINATION:"INVALID_DESTINATION",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",CAN_NOT_HANGUP_PARTICIPANT:"CAN_NOT_HANGUP_PARTICIPANT",CAN_NOT_ADD_PARTICIPANT:"CAN_NOT_ADD_PARTICIPANT",CAN_NOT_CONNECT_PARTICIPANT:"CAN_NOT_CONNECT_PARTICIPANT",CAN_NOT_START_THE_CALL:"CAN_NOT_START_THE_CALL",CAN_NOT_PAUSE_RECORDING:"CAN_NOT_PAUSE_RECORDING",CAN_NOT_RESUME_RECORDING:"CAN_NOT_RESUME_RECORDING",CAN_NOT_SET_AGENT_CONFIG:"CAN_NOT_SET_AGENT_CONFIG",CAN_NOT_UPDATE_PHONE_NUMBER:"CAN_NOT_UPDATE_PHONE_NUMBER",CAN_NOT_GET_SIGNED_RECORDING_URL:"CAN_NOT_GET_SIGNED_RECORDING_URL",CAN_NOT_SUPERVISE_CALL:"CAN_NOT_SUPERVISE_CALL",CAN_NOT_DISCONNECT_SUPERVISOR:"CAN_NOT_DISCONNECT_SUPERVISOR",CAN_NOT_BARGE_IN_SUPERVISOR:"CAN_NOT_BARGE_IN_SUPERVISOR"},AGENT_STATUS:{ONLINE:"Online",OFFLINE:"Offline",ACW:"AfterCallWork",CALLBACK_MISSED_OR_REJECTED:"CallbackMissedOrRejected"},PARTICIPANT_TYPE:{AGENT:"Agent",INITIAL_CALLER:"Initial_Caller",THIRD_PARTY:"Third_Party",SUPERVISOR:"Supervisor"},CALL_TYPE:{INBOUND:"Inbound",OUTBOUND:"Outbound",CALLBACK:"Callback",ADD_PARTICIPANT:"AddParticipant"},DIALER_TYPE:{OUTBOUND_PREVIEW:"OutboundPreview",NONE:"None"},CONTACT_TYPE:{PHONEBOOK:"PhoneBook",QUEUE:"Queue",PHONENUMBER:"PhoneNumber",AGENT:"Agent"},AGENT_CONFIG_TYPE:{SHOW_AGENT_SETTINGS:"SHOW_AGENT_SETTINGS",MUTE:"MUTE",RECORD:"RECORD",MERGE:"MERGE",SWAP:"SWAP",PHONES:"PHONES",SELECTED_PHONE:"SELECTED_PHONE",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL",DEBUG_ENABLED:"DEBUG_ENABLED",CONTACT_SEARCH:"CONTACT_SEARCH",VENDOR_PROVIDED_AVAILABILITY:"VENDOR_PROVIDED_AVAILABILITY",SUPERVISOR_LISTEN_IN:"SUPERVISOR_LISTEN_IN",SUPERVISOR_BARGE_IN:"SUPERVISOR_BARGE_IN"},CALL_STATE:{RINGING:"ringing",CONNECTED:"connected",TRANSFERRING:"transferring",TRANSFERRED:"transferred",ENDED:"ended"},PHONE_TYPE:{DESK_PHONE:"DESK_PHONE",SOFT_PHONE:"SOFT_PHONE"},HANGUP_REASON:{PHONE_CALL_ERROR:"error",PHONE_CALL_ENDED:"ended"},AGENT_AVAILABILITY:{AVAILABLE:"AVAILABLE",BUSY:"BUSY",OFFLINE:"OFFLINE"}},l=E(7),c=E.n(l),u=E(8),A=E.n(u),R=E(6),O=E.n(R),P=E(4),C=E.n(P),S=E(0),d=E.n(S);function I(t,e,E){if(document&&t){var r="string"==typeof t?t:JSON.stringify(t),n=new Blob([r],{type:E}),a=document.createElement("a"),T=URL.createObjectURL(n);a.download=e,a.href=T,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(T)}}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var E,r=O()(t);if(e){var n=O()(this).constructor;E=Reflect.construct(r,arguments,n)}else E=r.apply(this,arguments);return A()(this,E)}}function L(t,e){var E=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),E.push.apply(E,r)}return E}function f(t){for(var e=1;e<arguments.length;e++){var E=null!=arguments[e]?arguments[e]:{};e%2?L(Object(E),!0).forEach((function(e){n()(t,e,E[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(E)):L(Object(E)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(E,e))}))}return t}var h,D={EVENT_TYPE:{LOGIN_RESULT:N.EVENT_TYPE.LOGIN_RESULT,LOGOUT_RESULT:N.EVENT_TYPE.LOGOUT_RESULT,CALL_STARTED:N.EVENT_TYPE.CALL_STARTED,QUEUED_CALL_STARTED:N.EVENT_TYPE.QUEUED_CALL_STARTED,PREVIEW_CALL_STARTED:N.EVENT_TYPE.PREVIEW_CALL_STARTED,CALL_CONNECTED:N.EVENT_TYPE.CALL_CONNECTED,HANGUP:N.EVENT_TYPE.HANGUP,MUTE_TOGGLE:N.EVENT_TYPE.MUTE_TOGGLE,HOLD_TOGGLE:N.EVENT_TYPE.HOLD_TOGGLE,RECORDING_TOGGLE:N.EVENT_TYPE.RECORDING_TOGGLE,PARTICIPANTS_SWAPPED:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,PARTICIPANTS_CONFERENCED:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_ADDED,PARTICIPANT_CONNECTED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,PARTICIPANT_REMOVED:N.EVENT_TYPE.PARTICIPANT_REMOVED,MESSAGE:N.EVENT_TYPE.MESSAGE,AFTER_CALL_WORK_STARTED:N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,WRAP_UP_ENDED:N.EVENT_TYPE.WRAP_UP_ENDED,AGENT_ERROR:N.EVENT_TYPE.AGENT_ERROR,SOFTPHONE_ERROR:N.EVENT_TYPE.SOFTPHONE_ERROR,UPDATE_AUDIO_STATS:N.EVENT_TYPE.UPDATE_AUDIO_STATS,SUPERVISOR_BARGED_IN:N.EVENT_TYPE.SUPERVISOR_BARGED_IN,SUPERVISOR_CALL_STARTED:N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,SUPERVISOR_CALL_CONNECTED:N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,SUPERVISOR_HANGUP:N.EVENT_TYPE.SUPERVISOR_HANGUP,SET_AGENT_STATUS:N.EVENT_TYPE.SET_AGENT_STATUS},ERROR_TYPE:{GENERIC_ERROR:N.ERROR_TYPE.GENERIC_ERROR,INVALID_PARTICIPANT:N.ERROR_TYPE.INVALID_PARTICIPANT,INVALID_DESTINATION:N.ERROR_TYPE.INVALID_DESTINATION,INVALID_PARAMS:N.ERROR_TYPE.INVALID_PARAMS,INVALID_AGENT_STATUS:N.ERROR_TYPE.INVALID_AGENT_STATUS,CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER},AGENT_STATUS:f({},N.AGENT_STATUS),PARTICIPANT_TYPE:f({},N.PARTICIPANT_TYPE),CALL_TYPE:f({},N.CALL_TYPE),DIALER_TYPE:f({},N.DIALER_TYPE),CONTACT_TYPE:f({},N.CONTACT_TYPE),CALL_STATE:f({},N.CALL_STATE),HANGUP_REASON:f({},N.HANGUP_REASON),PHONE_TYPE:f({},N.PHONE_TYPE),AGENT_AVAILABILITY:f({},N.AGENT_AVAILABILITY)},v=function t(e){var E=e.type,r=e.number;d()(this,t),J.validateEnum(E,Object.values(N.PHONE_TYPE)),r&&J.validateString(r),this.type=E,this.number=r},G=function t(e){var E=e.isMuted;d()(this,t),this.isMuted=E},b=function t(e){var E=e.activeCalls,r=void 0===E?[]:E;d()(this,t),r.length>0&&r.forEach((function(t){J.validateClassObject(t,K)})),this.activeCalls=r},Y=function t(e){var E=e.hasMute,r=void 0===E||E,n=e.hasRecord,a=void 0===n||n,T=e.hasMerge,o=void 0===T||T,_=e.hasSwap,i=void 0===_||_,s=e.hasSignedRecordingUrl,l=void 0!==s&&s,c=e.phones,u=void 0===c?[N.PHONE_TYPE.SOFT_PHONE]:c,A=e.selectedPhone,R=void 0===A?new v({type:N.PHONE_TYPE.SOFT_PHONE}):A,O=e.debugEnabled,P=void 0!==O&&O,C=e.hasContactSearch,S=void 0!==C&&C,I=e.hasAgentAvailability,p=void 0!==I&&I,L=e.supportsMos,f=void 0!==L&&L,h=e.hasSupervisorListenIn,D=void 0!==h&&h,G=e.hasSupervisorBargeIn,b=void 0!==G&&G;d()(this,t),J.validateBoolean(r),J.validateBoolean(a),J.validateBoolean(o),J.validateBoolean(i),J.validateBoolean(l),J.validateClassObject(u,Array),J.validateBoolean(P),J.validateClassObject(R,v),J.validateBoolean(S),J.validateBoolean(p),J.validateBoolean(f),J.validateBoolean(D),J.validateBoolean(b),this.hasMute=r,this.hasRecord=a,this.hasMerge=o,this.hasSwap=i,this.hasSignedRecordingUrl=l,this.phones=u,this.selectedPhone=R,this.debugEnabled=P,this.hasContactSearch=S,this.hasAgentAvailability=p,this.supportsMos=f,this.hasSupervisorListenIn=D,this.hasSupervisorBargeIn=b},U=function t(e){var E=e.selectedPhone;d()(this,t),J.validateClassObject(E,v),this.selectedPhone=E},V=function t(e){var E=e.isRecordingPaused,r=e.contactId,n=void 0===r?null:r,a=e.initialContactId,T=void 0===a?null:a,o=e.instanceId,_=void 0===o?null:o,i=e.region,s=void 0===i?null:i;d()(this,t),this.isRecordingPaused=E,this.contactId=n,this.initialContactId=T,this.instanceId=_,this.region=s},g=function t(e){var E=e.initialCallHasEnded,r=e.callInfo,n=e.phoneNumber,a=e.callId;d()(this,t),J.validateClassObject(r,j),this.initialCallHasEnded=E,this.callInfo=r,this.phoneNumber=n,this.callId=a},y=function t(e){var E=e.contacts,r=void 0===E?[]:E;d()(this,t),r.length>0&&r.forEach((function(t){J.validateClassObject(t,F)})),this.contacts=r},m=function t(e){var E=e.call;d()(this,t),void 0!==E&&J.validateClassObject(E,K),this.call=E},M=function t(e){var E=e.calls;d()(this,t),E instanceof Array?(E.forEach((function(t){return J.validateClassObject(t,K)})),this.calls=E):(J.validateClassObject(E,K),this.calls=[E])},k=function t(e){var E=e.isThirdPartyOnHold,r=e.isCustomerOnHold,n=e.calls;d()(this,t),n&&(Object.values(n).forEach((function(t){J.validateClassObject(t,K)})),this.calls=n),this.isThirdPartyOnHold=E,this.isCustomerOnHold=r},H=function t(e){var E=e.success,r=e.url,n=e.duration,a=e.callId;d()(this,t),E&&(J.validateString(r),J.validateString(a),n&&J.validateNumber(n)),this.success=E,this.url=r,this.duration=n,this.callId=a},x=function t(e){var E=e.showLogin,r=void 0!==E&&E,n=e.loginFrameHeight,a=void 0===n?350:n;d()(this,t),this.showLogin=r,this.loginFrameHeight=a},w=function t(e){var E=e.success;d()(this,t),this.success=E},B=function t(e){var E=e.success,r=e.loginFrameHeight,n=void 0===r?350:r;d()(this,t),this.success=E,this.loginFrameHeight=n},j=function t(e){var E=e.callStateTimestamp,r=void 0===E?null:E,n=e.isOnHold,a=e.isMuted,T=void 0!==a&&a,o=e.isRecordingPaused,_=void 0!==o&&o,i=e.initialCallId,s=e.isSoftphoneCall,N=void 0===s||s,l=e.acceptEnabled,c=void 0===l||l,u=e.declineEnabled,A=void 0===u||u,R=e.muteEnabled,O=void 0===R||R,P=e.swapEnabled,C=void 0===P||P,S=e.conferenceEnabled,I=void 0===S||S,p=e.holdEnabled,L=void 0===p||p,f=e.recordEnabled,h=void 0===f||f,D=e.addCallerEnabled,v=void 0===D||D,G=e.extensionEnabled,b=void 0===G||G,Y=e.isReplayable,U=void 0===Y||Y,V=e.isBargeable,g=void 0!==V&&V;d()(this,t),r&&J.validateDate(r),J.validateBoolean(_),J.validateBoolean(T),J.validateBoolean(N),J.validateBoolean(c),J.validateBoolean(A),J.validateBoolean(O),J.validateBoolean(C),J.validateBoolean(I),J.validateBoolean(L),J.validateBoolean(h),J.validateBoolean(v),J.validateBoolean(b),J.validateBoolean(g),this.callStateTimestamp=r,this.isRecordingPaused=_,this.isMuted=T,this.isOnHold=n,this.initialCallId=i,this.isSoftphoneCall=N,this.acceptEnabled=c,this.declineEnabled=A,this.muteEnabled=O,this.swapEnabled=C,this.conferenceEnabled=I,this.holdEnabled=L,this.recordEnabled=h,this.addCallerEnabled=v,this.extensionEnabled=b,this.isReplayable=U,this.isBargeable=g},F=function t(e){var E=e.phoneNumber,r=e.id,n=e.type,a=e.name,T=e.prefix,o=e.extension,_=e.endpointARN,i=e.queue,s=e.availability;d()(this,t),E&&J.validateString(E),n&&J.validateEnum(n,Object.values(N.CONTACT_TYPE)),r&&J.validateString(r),a&&J.validateString(a),T&&J.validateString(T),o&&J.validateString(o),s&&J.validateEnum(s,Object.values(N.AGENT_AVAILABILITY)),this.phoneNumber=E,this.id=r,this.type=n,this.name=a,this.prefix=T,this.extension=o,this.endpointARN=_,this.queue=i,N.CONTACT_TYPE.AGENT===this.type?this.availability=s:this.availability=null},W=function t(e){var E=e.voiceCallId,r=e.participantType,n=e.dialerType,a=void 0===n?D.DIALER_TYPE.NONE:n,T=e.parentId,o=e.isOnHold;d()(this,t),E&&J.validateString(E),r&&J.validateEnum(r,Object.values(N.PARTICIPANT_TYPE)),T&&J.validateString(T),void 0!==o&&J.validateBoolean(o),J.validateEnum(a,Object.values(N.DIALER_TYPE)),this.voiceCallId=E,this.participantType=r,this.parentId=T,this.isOnHold=o,this.dialerType=a},K=function t(e){var E=e.callId,r=e.callType,n=e.contact,a=e.state,T=e.callAttributes,o=e.phoneNumber,_=e.callInfo,i=e.reason,s=e.closeCallOnError,l=e.agentStatus;d()(this,t),E&&(J.validateString(E),this.callId=E),r&&(J.validateEnum(r,Object.values(N.CALL_TYPE)),this.callType=r),o&&(J.validateString(o),this.phoneNumber=o),_&&(J.validateClassObject(_,j),this.callInfo=_),n&&(J.validateClassObject(n,F),this.contact=n),i&&(this.reason=i),s&&(this.closeCallOnError=s),l&&(this.agentStatus=l),this.state=a,this.callAttributes=T},Q=function(){function t(){d()(this,t)}return C()(t,[{key:"init",value:function(t){throw new Error("Not implemented")}},{key:"getActiveCalls",value:function(){throw new Error("Not implemented")}},{key:"acceptCall",value:function(t){throw new Error("Not implemented")}},{key:"declineCall",value:function(t){throw new Error("Not implemented")}},{key:"endCall",value:function(t,e){throw new Error("Not implemented")}},{key:"mute",value:function(){throw new Error("Not implemented")}},{key:"unmute",value:function(){throw new Error("Not implemented")}},{key:"hold",value:function(t){throw new Error("Not implemented")}},{key:"resume",value:function(t){throw new Error("Not implemented")}},{key:"setAgentStatus",value:function(t,e){throw new Error("Not implemented")}},{key:"dial",value:function(t){throw new Error("Not implemented")}},{key:"sendDigits",value:function(t){throw new Error("Not implemented")}},{key:"getPhoneContacts",value:function(){throw new Error("Not implemented")}},{key:"swap",value:function(t,e){throw new Error("Not implemented")}},{key:"conference",value:function(t){throw new Error("Not implemented")}},{key:"addParticipant",value:function(t,e){throw new Error("Not implemented")}},{key:"pauseRecording",value:function(t){throw new Error("Not implemented")}},{key:"resumeRecording",value:function(t){throw new Error("Not implemented")}},{key:"getAgentConfig",value:function(){throw new Error("Not implemented")}},{key:"setAgentConfig",value:function(t){throw new Error("Not implemented")}},{key:"logout",value:function(){throw new Error("Not implemented")}},{key:"handleMessage",value:function(t){throw new Error("Not implemented")}},{key:"wrapUpCall",value:function(t){throw new Error("Not implemented")}},{key:"getSignedRecordingUrl",value:function(t,e,E){throw new Error("Not implemented")}},{key:"downloadLogs",value:function(){throw new Error("Not implemented")}},{key:"logMessageToVendor",value:function(t,e,E){}},{key:"superviseCall",value:function(t){throw new Error("Not implemented")}},{key:"supervisorDisconnect",value:function(t){throw new Error("Not implemented")}},{key:"supervisorBargeIn",value:function(t){throw new Error("Not implemented")}}]),t}(),J=function(){function t(){d()(this,t)}return C()(t,null,[{key:"validateString",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument. Expecting a string but got ".concat(_()(t)));return this}},{key:"validateNumber",value:function(t){if("number"!=typeof t)throw new Error("Invalid argument. Expecting a number but got ".concat(_()(t)));return this}},{key:"validateBoolean",value:function(t){if("boolean"!=typeof t)throw new Error("Invalid argument. Expecting a boolean but got ".concat(_()(t)));return this}},{key:"validateEnum",value:function(t,e){if(!new RegExp(e.join("|"),"i").test(t))throw new Error("Invalid argument. Expecting a value from ".concat(JSON.stringify(e)," but got ").concat(t));return this}},{key:"validateDate",value:function(t){if(!(t instanceof Date))throw new Error("Invalid argument. Expecting a Date object but got ".concat(_()(t)));return this}},{key:"validateClassObject",value:function(t,e){if(!(t instanceof e))throw new Error("Invalid className. Expecting object of class ".concat(e," but got ").concat(_()(t)));return this}}]),t}(),q=function t(e){var E=e.statusId,r=e.statusApiName,n=e.statusName;d()(this,t),J.validateString(E),r&&J.validateString(r),n&&J.validateString(n),this.statusId=E,this.statusApiName=r,this.statusName=n},z=function t(e){var E=e.callId,r=e.stats,n=e.isAudioStatsCompleted;d()(this,t),E&&(J.validateString(E),this.callId=E),r&&(J.validateClassObject(r,Array),r.forEach((function(t){return J.validateClassObject(t,$)})),this.stats=r),n&&(J.validateBoolean(n),this.isAudioStatsCompleted=n)},$=function t(e){var E=e.inputChannelStats,r=e.outputChannelStats;d()(this,t),E&&J.validateClassObject(E,X),r&&J.validateClassObject(r,X),this.inputChannelStats=E,this.outputChannelStats=r},X=function t(e){var E=e.packetsCount,r=e.packetsLost,n=e.jitterBufferMillis,a=e.roundTripTimeMillis;d()(this,t),E=null==E||E<0?0:E,r=null==r||r<0?0:r,n=null==n||n<0?0:n,a=null==a||a<0?0:a,this.statsCount=0,this.packetsCount=E,this.packetsLost=r,this.jitterBufferMillis=n,this.roundTripTimeMillis=a},Z=function t(e){var E=e.call;d()(this,t),J.validateClassObject(E,K),this.call=E},tt=function(t){c()(E,t);var e=p(E);function E(t){var r=t.calls;return d()(this,E),e.call(this,{calls:r})}return E}(M),et=!1;function Et(t){var e=function(t){var e=h[t];return{packetsCount:e.packetsCount/e.statsCount,packetsLost:e.packetsLost/e.statsCount,jitterBufferMillis:e.jitterBufferMillis/e.statsCount,roundTripTimeMillis:e.roundTripTimeMillis/e.statsCount}}(t),E=e.roundTripTimeMillis+2*e.jitterBufferMillis+10,r=0;return r=E<160?93.2-E/40:93.2-(E-120)/10,1+.035*(r-=e.packetsLost/e.packetsCount*2.5)+7e-6*r*(r-60)*(100-r)}function rt(){et=!0}function nt(){if(et&&h){var t=Et("inputChannelStats"),e=Et("outputChannelStats");return h=null,isNaN(e)&&isNaN(t)?0:isNaN(e)?t:isNaN(t)?e:Math.min(t,e)}}function at(){h=new $({inputChannelStats:new X({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0}),outputChannelStats:new X({packetsCount:0,packetsLost:0,jitterBufferMillis:0,roundTripTimeMillis:0})})}function Tt(t){h&&t.forEach((function(t){t.inputChannelStats&&(h.inputChannelStats.statsCount++,h.inputChannelStats.packetsCount+=0|t.inputChannelStats.packetsCount,h.inputChannelStats.packetsLost+=0|t.inputChannelStats.packetsLost,h.inputChannelStats.jitterBufferMillis+=0|t.inputChannelStats.jitterBufferMillis,h.inputChannelStats.roundTripTimeMillis+=0|t.inputChannelStats.roundTripTimeMillis),t.outputChannelStats&&(h.outputChannelStats.statsCount++,h.outputChannelStats.packetsCount+=0|t.outputChannelStats.packetsCount,h.outputChannelStats.packetsLost+=0|t.outputChannelStats.packetsLost,h.outputChannelStats.jitterBufferMillis+=0|t.outputChannelStats.jitterBufferMillis,h.outputChannelStats.roundTripTimeMillis+=0|t.outputChannelStats.roundTripTimeMillis)}))}var ot="ERROR",_t="INFO",it={SYSTEM:"SYSTEM",VENDOR:"VENDOR"},st=[];function Nt(t,e,E,r){if(!e)throw new Error("Log Message required");t="string"==typeof t?t:JSON.stringify(t),E="string"==typeof E?E:JSON.stringify(E),st.push({logLevel:t||_t,logSource:E||it.VENDOR,timestamp:r||(new Date).getTime(),log:e})}var lt,ct,ut,At=new(function(){function t(){d()(this,t),st.splice(0,st.length)}return C()(t,[{key:"customLog",value:function(t,e,E){Nt(t,e,E)}},{key:"errorLog",value:function(t,e){Nt(ot,t,e)}},{key:"infoLog",value:function(t,e){Nt(_t,t,e)}},{key:"getLogs",value:function(){return JSON.parse(JSON.stringify(st))}},{key:"downloadLogs",value:function(){I(st.reduce((function(t,e){return"".concat(t).concat(new Date(e.timestamp).toLocaleString()," - ").concat(e.logLevel," - ").concat(e.logSource," - ").concat(JSON.stringify(e.log),"\n")}),""),"log-".concat((new Date).getTime(),".txt"),"text/plain")}}]),t}());function Rt(t){return t&&t.type?t.type:t}function Ot(t){return t&&t.message?t.message:t}function Pt(t,e,E){var r=function t(e){if(e&&"object"===_()(e)){var E=Array.isArray(e),r=E?[]:{};if(E)e.forEach((function(e){r.push(t(e))}));else for(var n in e)"phoneNumber"!==n&&"number"!==n&&"name"!==n&&"callAttributes"!==n&&(r[n]=t(e[n]));return r}return e}(e);lt.postMessage({type:N.MESSAGE_TYPE.LOG,payload:{eventType:t,payload:r,isError:E}})}function Ct(t,e){var E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];lt.postMessage({type:N.MESSAGE_TYPE.TELEPHONY_EVENT_DISPATCHED,payload:{telephonyEventType:t,telephonyEventPayload:e}});var r=t===N.EVENT_TYPE.ERROR?"errorLog":"infoLog";At[r]({eventType:t,payload:e},it.SYSTEM),E&&Pt(t,e,!1)}function St(t,e,E){console.error("SCV dispatched error ".concat(t," for eventType ").concat(E),e),Ct(N.EVENT_TYPE.ERROR,{message:N.ERROR_TYPE[t]},!1),Pt(E,{errorType:t,error:e},!0)}function dt(){return It.apply(this,arguments)}function It(){return(It=T()(s.a.mark((function t(){var e,E,r,a,T,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct.getAgentConfig();case 3:return E=t.sent,J.validateClassObject(E,Y),E.supportsMos&&rt(),t.next=8,ct.getActiveCalls();case 8:r=t.sent,J.validateClassObject(r,b),a=r.activeCalls,T=N.MESSAGE_TYPE.CONNECTOR_READY,o={agentConfig:(e={},n()(e,N.AGENT_CONFIG_TYPE.MUTE,E.hasMute),n()(e,N.AGENT_CONFIG_TYPE.RECORD,E.hasRecord),n()(e,N.AGENT_CONFIG_TYPE.MERGE,E.hasMerge),n()(e,N.AGENT_CONFIG_TYPE.SWAP,E.hasSwap),n()(e,N.AGENT_CONFIG_TYPE.PHONES,E.phones),n()(e,N.AGENT_CONFIG_TYPE.SIGNED_RECORDING_URL,E.hasSignedRecordingUrl),n()(e,N.AGENT_CONFIG_TYPE.SELECTED_PHONE,E.selectedPhone),n()(e,N.AGENT_CONFIG_TYPE.DEBUG_ENABLED,E.debugEnabled),n()(e,N.AGENT_CONFIG_TYPE.CONTACT_SEARCH,E.hasContactSearch),n()(e,N.AGENT_CONFIG_TYPE.VENDOR_PROVIDED_AVAILABILITY,E.hasAgentAvailability),n()(e,N.AGENT_CONFIG_TYPE.SUPERVISOR_LISTEN_IN,E.hasSupervisorListenIn),n()(e,N.AGENT_CONFIG_TYPE.SUPERVISOR_BARGE_IN,E.hasSupervisorBargeIn),e),callInProgress:a.length>0?a[0]:null},lt.postMessage({type:T,payload:o}),Pt(T,o,!1),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),lt.postMessage({type:N.MESSAGE_TYPE.CONNECTOR_READY,payload:{}}),Pt(N.MESSAGE_TYPE.CONNECTOR_READY,{},!1);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}function pt(t){return Lt.apply(this,arguments)}function Lt(){return(Lt=T()(s.a.mark((function t(e){var E,r,n,a,T,o,_,i,l,c,u,A,R,O,P,C,S,d,I,p,L,f,h,D,v,G,Y,U,V,g,k,x,j,W,K,Q,q,z,$,X,et,Et,rt,nt,Tt,ot,_t,it;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Pt(E=e.data.type,e.data,!1),t.t0=E,t.next=t.t0===N.MESSAGE_TYPE.ACCEPT_CALL?5:t.t0===N.MESSAGE_TYPE.DECLINE_CALL?29:t.t0===N.MESSAGE_TYPE.END_CALL?42:t.t0===N.MESSAGE_TYPE.MUTE?58:t.t0===N.MESSAGE_TYPE.UNMUTE?69:t.t0===N.MESSAGE_TYPE.HOLD?80:t.t0===N.MESSAGE_TYPE.RESUME?97:t.t0===N.MESSAGE_TYPE.SET_AGENT_STATUS?114:t.t0===N.MESSAGE_TYPE.DIAL?134:t.t0===N.MESSAGE_TYPE.SEND_DIGITS?156:t.t0===N.MESSAGE_TYPE.GET_PHONE_CONTACTS?165:t.t0===N.MESSAGE_TYPE.SWAP_PARTICIPANTS?178:t.t0===N.MESSAGE_TYPE.CONFERENCE?189:t.t0===N.MESSAGE_TYPE.ADD_PARTICIPANT?200:t.t0===N.MESSAGE_TYPE.PAUSE_RECORDING?218:t.t0===N.MESSAGE_TYPE.RESUME_RECORDING?229:t.t0===N.MESSAGE_TYPE.LOGOUT?240:t.t0===N.MESSAGE_TYPE.MESSAGE?253:t.t0===N.MESSAGE_TYPE.WRAP_UP_CALL?255:t.t0===N.MESSAGE_TYPE.AGENT_AVAILABLE?257:t.t0===N.MESSAGE_TYPE.SET_AGENT_CONFIG?295:t.t0===N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL?307:t.t0===N.MESSAGE_TYPE.DOWNLOAD_VENDOR_LOGS?322:t.t0===N.MESSAGE_TYPE.DOWNLOAD_RESELL_LOGS?324:t.t0===N.MESSAGE_TYPE.LOG?326:t.t0===N.MESSAGE_TYPE.SUPERVISE_CALL?329:t.t0===N.MESSAGE_TYPE.SUPERVISOR_DISCONNECT?346:t.t0===N.MESSAGE_TYPE.SUPERVISOR_BARGE_IN?359:371;break;case 5:if(t.prev=5,!e.data.call||!e.data.call.callType||e.data.call.callType.toLowerCase()!==N.CALL_TYPE.OUTBOUND.toLowerCase()){t.next=8;break}return t.abrupt("return");case 8:if(at(),!ut){t.next=16;break}return t.next=12,ct.supervisorDisconnect();case 12:r=t.sent,J.validateClassObject(r,tt),ut=!1,Ct(N.EVENT_TYPE.SUPERVISOR_HANGUP,r);case 16:return t.next=18,ct.acceptCall(e.data.call);case 18:n=t.sent,J.validateClassObject(n,m),Ct((a=n.call).callType.toLowerCase()===N.CALL_TYPE.CALLBACK.toLowerCase()?N.EVENT_TYPE.CALL_STARTED:N.EVENT_TYPE.CALL_CONNECTED,a),t.next=28;break;case 24:t.prev=24,t.t1=t.catch(5),ut=!1,St(N.ERROR_TYPE.CAN_NOT_ACCEPT_THE_CALL,t.t1,N.MESSAGE_TYPE.ACCEPT_CALL);case 28:return t.abrupt("break",372);case 29:return t.prev=29,t.next=32,ct.declineCall(e.data.call);case 32:T=t.sent,J.validateClassObject(T,m),o=T.call,Ct(N.EVENT_TYPE.HANGUP,o),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(29),St(N.ERROR_TYPE.CAN_NOT_DECLINE_THE_CALL,t.t2,N.MESSAGE_TYPE.DECLINE_CALL);case 41:return t.abrupt("break",372);case 42:return t.prev=42,t.next=45,ct.endCall(e.data.call,e.data.agentStatus);case 45:return _=t.sent,t.next=48,ct.getActiveCalls();case 48:i=t.sent,J.validateClassObject(i,b),0===i.activeCalls.length&&(J.validateClassObject(_,M),l=_.calls,Ct(N.EVENT_TYPE.HANGUP,l)),t.next=57;break;case 54:t.prev=54,t.t3=t.catch(42),St(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,t.t3,N.MESSAGE_TYPE.END_CALL);case 57:return t.abrupt("break",372);case 58:return t.prev=58,t.next=61,ct.mute();case 61:c=t.sent,Yt({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:c}),t.next=68;break;case 65:t.prev=65,t.t4=t.catch(58),St(N.ERROR_TYPE.CAN_NOT_MUTE_CALL,t.t4,N.MESSAGE_TYPE.MUTE);case 68:return t.abrupt("break",372);case 69:return t.prev=69,t.next=72,ct.unmute();case 72:u=t.sent,Yt({eventType:N.EVENT_TYPE.MUTE_TOGGLE,payload:u}),t.next=79;break;case 76:t.prev=76,t.t5=t.catch(69),St(N.ERROR_TYPE.CAN_NOT_UNMUTE_CALL,t.t5,N.MESSAGE_TYPE.UNMUTE);case 79:return t.abrupt("break",372);case 80:return t.prev=80,t.next=83,ct.hold(e.data.call);case 83:A=t.sent,Yt({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:A}),t.next=96;break;case 87:t.prev=87,t.t6=t.catch(80),t.t7=Rt(t.t6),t.next=t.t7===N.ERROR_TYPE.INVALID_PARTICIPANT?92:94;break;case 92:return St(N.ERROR_TYPE.INVALID_PARTICIPANT,Ot(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",96);case 94:return St(N.ERROR_TYPE.CAN_NOT_HOLD_CALL,Ot(t.t6),N.MESSAGE_TYPE.HOLD),t.abrupt("break",96);case 96:return t.abrupt("break",372);case 97:return t.prev=97,t.next=100,ct.resume(e.data.call);case 100:R=t.sent,Yt({eventType:N.EVENT_TYPE.HOLD_TOGGLE,payload:R}),t.next=113;break;case 104:t.prev=104,t.t8=t.catch(97),t.t9=Rt(t.t8),t.next=t.t9===N.ERROR_TYPE.INVALID_PARTICIPANT?109:111;break;case 109:return St(N.ERROR_TYPE.INVALID_PARTICIPANT,Ot(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",113);case 111:return St(N.ERROR_TYPE.CAN_NOT_RESUME_CALL,Ot(t.t8),N.MESSAGE_TYPE.RESUME),t.abrupt("break",113);case 113:return t.abrupt("break",372);case 114:return t.prev=114,O=e.data.statusInfo||{},t.next=118,ct.setAgentStatus(e.data.agentStatus,O);case 118:P=t.sent,J.validateClassObject(P,w),C=P.success,Ct(N.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:C}),t.next=133;break;case 124:t.prev=124,t.t10=t.catch(114),t.t11=Rt(t.t10),t.next=t.t11===N.ERROR_TYPE.INVALID_AGENT_STATUS?129:131;break;case 129:return St(N.ERROR_TYPE.INVALID_AGENT_STATUS,Ot(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",133);case 131:return St(N.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,Ot(t.t10),N.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",133);case 133:return t.abrupt("break",372);case 134:return t.prev=134,t.next=137,ct.dial(new F(e.data.contact));case 137:S=t.sent,J.validateClassObject(S,m),d=S.call,Ct(N.EVENT_TYPE.CALL_STARTED,d),t.next=155;break;case 143:t.prev=143,t.t12=t.catch(134),Ct(N.EVENT_TYPE.CALL_FAILED),t.t13=Rt(t.t12),t.next=t.t13===N.ERROR_TYPE.INVALID_DESTINATION?149:t.t13===N.ERROR_TYPE.GENERIC_ERROR?151:153;break;case 149:return St(N.ERROR_TYPE.INVALID_DESTINATION,Ot(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",155);case 151:return St(N.ERROR_TYPE.GENERIC_ERROR,Ot(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",155);case 153:return St(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,Ot(t.t12),N.MESSAGE_TYPE.DIAL),t.abrupt("break",155);case 155:return t.abrupt("break",372);case 156:return t.prev=156,t.next=159,ct.sendDigits(e.data.digits);case 159:t.next=164;break;case 161:t.prev=161,t.t14=t.catch(156),Pt(N.MESSAGE_TYPE.SEND_DIGITS,e.data.digits,!0);case 164:return t.abrupt("break",372);case 165:return t.prev=165,t.next=168,ct.getPhoneContacts(e.data.filter);case 168:I=t.sent,J.validateClassObject(I,y),p=I.contacts.map((function(t){return{id:t.id,endpointARN:t.endpointARN,queue:t.queue,phoneNumber:t.phoneNumber,name:t.name,type:t.type,extension:t.extension,availability:t.availability}})),Ct(N.EVENT_TYPE.PHONE_CONTACTS,{contacts:p}),t.next=177;break;case 174:t.prev=174,t.t15=t.catch(165),St(N.ERROR_TYPE.CAN_NOT_GET_PHONE_CONTACTS,t.t15,N.MESSAGE_TYPE.GET_PHONE_CONTACTS);case 177:return t.abrupt("break",372);case 178:return t.prev=178,t.next=181,ct.swap(e.data.callToHold,e.data.callToResume);case 181:L=t.sent,Yt({eventType:N.EVENT_TYPE.PARTICIPANTS_SWAPPED,payload:L}),t.next=188;break;case 185:t.prev=185,t.t16=t.catch(178),St(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,t.t16,N.MESSAGE_TYPE.SWAP_PARTICIPANTS);case 188:return t.abrupt("break",372);case 189:return t.prev=189,t.next=192,ct.conference(e.data.calls);case 192:f=t.sent,Yt({eventType:N.EVENT_TYPE.PARTICIPANTS_CONFERENCED,payload:f}),t.next=199;break;case 196:t.prev=196,t.t17=t.catch(189),St(N.ERROR_TYPE.CAN_NOT_CONFERENCE,t.t17,N.MESSAGE_TYPE.CONFERENCE);case 199:return t.abrupt("break",372);case 200:return t.prev=200,t.next=203,ct.addParticipant(new F(e.data.contact),e.data.call);case 203:h=t.sent,Yt({eventType:N.EVENT_TYPE.PARTICIPANT_ADDED,payload:h}),t.next=217;break;case 207:t.prev=207,t.t18=t.catch(200),Ct(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:N.EVENT_TYPE.ERROR.toLowerCase()}),t.t19=Rt(t.t18),t.next=t.t19===N.ERROR_TYPE.INVALID_DESTINATION?213:215;break;case 213:return St(N.ERROR_TYPE.INVALID_DESTINATION,Ot(t.t18),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",217);case 215:return St(N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,Ot(t.t18),N.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",217);case 217:return t.abrupt("break",372);case 218:return t.prev=218,t.next=221,ct.pauseRecording(e.data.call);case 221:D=t.sent,Yt({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:D}),t.next=228;break;case 225:t.prev=225,t.t20=t.catch(218),St(N.ERROR_TYPE.CAN_NOT_PAUSE_RECORDING,t.t20,N.MESSAGE_TYPE.PAUSE_RECORDING);case 228:return t.abrupt("break",372);case 229:return t.prev=229,t.next=232,ct.resumeRecording(e.data.call);case 232:v=t.sent,Yt({eventType:N.EVENT_TYPE.RECORDING_TOGGLE,payload:v}),t.next=239;break;case 236:t.prev=236,t.t21=t.catch(229),St(N.ERROR_TYPE.CAN_NOT_RESUME_RECORDING,t.t21,N.MESSAGE_TYPE.RESUME_RECORDING);case 239:return t.abrupt("break",372);case 240:return t.prev=240,t.next=243,ct.logout();case 243:G=t.sent,J.validateClassObject(G,B),Y=G.success,U=G.loginFrameHeight,Ct(N.EVENT_TYPE.LOGOUT_RESULT,{success:Y,loginFrameHeight:U}),t.next=252;break;case 249:t.prev=249,t.t22=t.catch(240),St(N.ERROR_TYPE.CAN_NOT_LOG_OUT,t.t22,N.MESSAGE_TYPE.LOGOUT);case 252:return t.abrupt("break",372);case 253:return ct.handleMessage(e.data.message),t.abrupt("break",372);case 255:return ct.wrapUpCall(e.data.call),t.abrupt("break",372);case 257:if(!e.data.isAvailable){t.next=294;break}return t.next=261,ct.getActiveCalls();case 261:V=t.sent,J.validateClassObject(V,b),g=V.activeCalls,t.t23=s.a.keys(g);case 265:if((t.t24=t.t23()).done){t.next=294;break}if(k=t.t24.value,x=g[k],j=!x.callInfo||x.callInfo.isReplayable,W=x.callAttributes&&x.callAttributes.participantType===N.PARTICIPANT_TYPE.SUPERVISOR,!j){t.next=292;break}x.isReplayedCall=!0,t.t25=x.state,t.next=t.t25===N.CALL_STATE.CONNECTED?275:t.t25===N.CALL_STATE.RINGING?281:t.t25===N.CALL_STATE.TRANSFERRING?287:t.t25===N.CALL_STATE.TRANSFERRED?289:291;break;case 275:if(!W){t.next=279;break}return ut=!0,Ct(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,x),t.abrupt("break",292);case 279:return Ct(N.EVENT_TYPE.CALL_CONNECTED,x),t.abrupt("break",292);case 281:if(!W){t.next=285;break}return ut=!0,Ct(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,x),t.abrupt("break",292);case 285:return Ct(N.EVENT_TYPE.CALL_STARTED,x),t.abrupt("break",292);case 287:return Ct(N.EVENT_TYPE.PARTICIPANT_ADDED,{phoneNumber:x.contact.phoneNumber,callInfo:x.callInfo,initialCallHasEnded:x.callAttributes.initialCallHasEnded,callId:x.callId}),t.abrupt("break",292);case 289:return Ct(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{phoneNumber:x.contact.phoneNumber,callInfo:x.callInfo,initialCallHasEnded:x.callAttributes.initialCallHasEnded,callId:x.callId}),t.abrupt("break",292);case 291:return t.abrupt("break",292);case 292:t.next=265;break;case 294:return t.abrupt("break",372);case 295:return t.prev=295,t.next=298,ct.setAgentConfig(e.data.config);case 298:K=t.sent,J.validateClassObject(K,w),Ct(N.EVENT_TYPE.AGENT_CONFIG_UPDATED,K),t.next=306;break;case 303:t.prev=303,t.t26=t.catch(295),St(Rt(t.t26)===N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER?N.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER:N.ERROR_TYPE.CAN_NOT_SET_AGENT_CONFIG,Ot(t.t26),N.MESSAGE_TYPE.SET_AGENT_CONFIG);case 306:return t.abrupt("break",372);case 307:return t.prev=307,Q=e.data,q=Q.recordingUrl,z=Q.vendorCallKey,$=Q.callId,t.next=311,ct.getSignedRecordingUrl(q,z,$);case 311:X=t.sent,J.validateClassObject(X,H),Ct(N.EVENT_TYPE.SIGNED_RECORDING_URL,X),t.next=321;break;case 316:t.prev=316,t.t27=t.catch(307),et=new H({success:!1}),Ct(N.EVENT_TYPE.SIGNED_RECORDING_URL,et,!1),Pt(N.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL,et,!0);case 321:return t.abrupt("break",372);case 322:return At.downloadLogs(),t.abrupt("break",372);case 324:return ct.downloadLogs(),t.abrupt("break",372);case 326:return Et=e.data,rt=Et.logLevel,nt=Et.logMessage,Tt=Et.payload,ct.logMessageToVendor(rt,nt,Tt),t.abrupt("break",372);case 329:return t.prev=329,ut=!0,t.next=333,ct.superviseCall(e.data.call);case 333:return ot=t.sent,J.validateClassObject(ot,Z),t.next=337,ct.getAgentConfig();case 337:t.sent.selectedPhone.type===N.PHONE_TYPE.SOFT_PHONE?Ct(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,ot.call):Ct(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,ot.call),t.next=345;break;case 341:t.prev=341,t.t28=t.catch(329),ut=!1,St(N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,t.t28,N.MESSAGE_TYPE.SUPERVISE_CALL);case 345:return t.abrupt("break",372);case 346:return t.prev=346,t.next=349,ct.supervisorDisconnect(e.data.call);case 349:_t=t.sent,J.validateClassObject(_t,tt),ut=!1,Ct(N.EVENT_TYPE.SUPERVISOR_HANGUP,_t.calls),t.next=358;break;case 355:t.prev=355,t.t29=t.catch(346),St(N.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,t.t29,N.MESSAGE_TYPE.SUPERVISOR_DISCONNECT);case 358:return t.abrupt("break",372);case 359:return t.prev=359,t.next=362,ct.supervisorBargeIn(e.data.call);case 362:it=t.sent,J.validateClassObject(it,Z),Ct(N.EVENT_TYPE.SUPERVISOR_BARGED_IN,it.call),t.next=370;break;case 367:t.prev=367,t.t30=t.catch(359),St(N.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,t.t30,N.MESSAGE_TYPE.SUPERVISOR_BARGE_IN);case 370:case 371:return t.abrupt("break",372);case 372:case"end":return t.stop()}}),t,null,[[5,24],[29,38],[42,54],[58,65],[69,76],[80,87],[97,104],[114,124],[134,143],[156,161],[165,174],[178,185],[189,196],[200,207],[218,225],[229,236],[240,249],[295,303],[307,316],[329,341],[346,355],[359,367]])})))).apply(this,arguments)}function ft(t){return ht.apply(this,arguments)}function ht(){return(ht=T()(s.a.mark((function t(e){var E,r,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next=t.t0===N.MESSAGE_TYPE.SETUP_CONNECTOR?3:29;break;case 3:if(E=/^http[s]?:\/\/[\w-.]+(\.lightning\.force\.com|\.lightning\.pc-rnd\.force\.com|\.stm\.force\.com|\.salesforce\.com|\.my\.salesforce-sites\.com|\.lightning\.localhost\.[\w]+\.force.com)$/,r=new URL(e.origin),n=r.protocol+"//"+r.hostname,!E.test(n)){t.next=27;break}return(lt=e.ports[0]).onmessage=pt,Pt(N.MESSAGE_TYPE.SETUP_CONNECTOR,null,!1),t.prev=10,t.next=13,ct.init(e.data.connectorConfig);case 13:a=t.sent,J.validateClassObject(a,x),a.showLogin?Ct(N.EVENT_TYPE.SHOW_LOGIN,{loginFrameHeight:a.loginFrameHeight}):dt(),t.next=27;break;case 18:t.prev=18,t.t1=t.catch(10),t.t2=Rt(t.t1),t.next=t.t2===N.ERROR_TYPE.INVALID_PARAMS?23:25;break;case 23:return St(N.ERROR_TYPE.INVALID_PARAMS,Ot(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 25:return St(N.ERROR_TYPE.CAN_NOT_LOG_IN,Ot(t.t1),N.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",27);case 27:return window.removeEventListener("message",ft),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:case"end":return t.stop()}}),t,null,[[10,18]])})))).apply(this,arguments)}function Dt(t,e,E,r){try{return J.validateClassObject(t,e),!0}catch(t){return E&&St(E,t,r),!1}}function vt(t){ct=t,window.addEventListener("message",ft)}function Gt(t){Pt(t.eventType,t.payload,t.isError)}function bt(t){var e=t.eventType,E=t.error;switch(e){case N.EVENT_TYPE.LOGIN_RESULT:St(N.ERROR_TYPE.CAN_NOT_LOG_IN,E,N.EVENT_TYPE.LOGIN_RESULT);break;case N.EVENT_TYPE.LOGOUT_RESULT:St(N.ERROR_TYPE.CAN_NOT_LOG_OUT,E,N.EVENT_TYPE.LOGOUT_RESULT);break;case N.EVENT_TYPE.CALL_STARTED:St(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_STARTED);break;case N.EVENT_TYPE.QUEUED_CALL_STARTED:St(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.QUEUED_CALL_STARTED);break;case N.EVENT_TYPE.CALL_CONNECTED:St(N.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,N.EVENT_TYPE.CALL_CONNECTED);break;case N.EVENT_TYPE.HANGUP:St(N.ERROR_TYPE.CAN_NOT_END_THE_CALL,E,N.EVENT_TYPE.HANGUP);break;case N.EVENT_TYPE.PARTICIPANT_ADDED:St(Rt(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_ADDED);break;case N.EVENT_TYPE.PARTICIPANT_CONNECTED:St(N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_CONNECTED);break;case N.EVENT_TYPE.PARTICIPANT_REMOVED:St(N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,E,N.EVENT_TYPE.PARTICIPANT_REMOVED);break;case N.EVENT_TYPE.MUTE_TOGGLE:St(N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,E,N.EVENT_TYPE.MUTE_TOGGLE);break;case N.EVENT_TYPE.HOLD_TOGGLE:St(Rt(E)===N.ERROR_TYPE.INVALID_PARTICIPANT?N.ERROR_TYPE.INVALID_PARTICIPANT:N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,E,N.EVENT_TYPE.HOLD_TOGGLE);break;case N.EVENT_TYPE.RECORDING_TOGGLE:St(N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,E,N.EVENT_TYPE.RECORDING_TOGGLE);break;case N.EVENT_TYPE.PARTICIPANTS_SWAPPED:St(N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,E,N.EVENT_TYPE.PARTICIPANTS_SWAPPED);break;case N.EVENT_TYPE.PARTICIPANTS_CONFERENCED:St(N.ERROR_TYPE.CAN_NOT_CONFERENCE,E,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED);break;case N.EVENT_TYPE.AGENT_ERROR:St(N.ERROR_TYPE.AGENT_ERROR,E,N.EVENT_TYPE.AGENT_ERROR);break;case N.EVENT_TYPE.SOFTPHONE_ERROR:switch(Rt(E)){case N.ERROR_TYPE.UNSUPPORTED_BROWSER:St(N.ERROR_TYPE.UNSUPPORTED_BROWSER,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;case N.ERROR_TYPE.MICROPHONE_NOT_SHARED:St(N.ERROR_TYPE.MICROPHONE_NOT_SHARED,E,N.EVENT_TYPE.SOFTPHONE_ERROR);break;default:St(N.ERROR_TYPE.GENERIC_ERROR,E,N.EVENT_TYPE.SOFTPHONE_ERROR)}break;default:console.error("Unhandled error scenario with arguments ",arguments)}}function Yt(t){return Ut.apply(this,arguments)}function Ut(){return(Ut=T()(s.a.mark((function t(e){var E,r,n,a,T,o,_,i,l,c,u,A,R,O,P,C,S,d,I,p,L,f,h,D,v,Y,U,y,H,x,j,F,W;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E=e.eventType,r=e.payload,n=e.registerLog,a=void 0===n||n,t.t0=E,t.next=t.t0===N.EVENT_TYPE.LOGIN_RESULT?4:t.t0===N.EVENT_TYPE.LOGOUT_RESULT?6:t.t0===N.EVENT_TYPE.CALL_STARTED?8:t.t0===N.EVENT_TYPE.QUEUED_CALL_STARTED?10:t.t0===N.EVENT_TYPE.PREVIEW_CALL_STARTED?12:t.t0===N.EVENT_TYPE.CALL_CONNECTED?14:t.t0===N.EVENT_TYPE.HANGUP?27:t.t0===N.EVENT_TYPE.PARTICIPANT_ADDED?29:t.t0===N.EVENT_TYPE.PARTICIPANT_CONNECTED?31:t.t0===N.EVENT_TYPE.PARTICIPANT_REMOVED?33:t.t0===N.EVENT_TYPE.MESSAGE?40:t.t0===N.EVENT_TYPE.AFTER_CALL_WORK_STARTED?42:t.t0===N.EVENT_TYPE.WRAP_UP_ENDED?44:t.t0===N.EVENT_TYPE.REMOTE_CONTROLLER?46:t.t0===N.EVENT_TYPE.MUTE_TOGGLE?48:t.t0===N.EVENT_TYPE.HOLD_TOGGLE?50:t.t0===N.EVENT_TYPE.RECORDING_TOGGLE?53:t.t0===N.EVENT_TYPE.PARTICIPANTS_SWAPPED?56:t.t0===N.EVENT_TYPE.PARTICIPANTS_CONFERENCED?58:t.t0===N.EVENT_TYPE.UPDATE_AUDIO_STATS?60:t.t0===N.EVENT_TYPE.SUPERVISOR_BARGED_IN?62:t.t0===N.EVENT_TYPE.SUPERVISOR_CALL_STARTED?64:t.t0===N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED?66:t.t0===N.EVENT_TYPE.SUPERVISOR_HANGUP?68:t.t0===N.EVENT_TYPE.SET_AGENT_STATUS?70:72;break;case 4:return Dt(r,w,N.ERROR_TYPE.CAN_NOT_LOG_IN,N.EVENT_TYPE.LOGIN_RESULT)&&(Ct(N.EVENT_TYPE.LOGIN_RESULT,r,a),r.success&&dt()),t.abrupt("break",72);case 6:return Dt(r,B,N.ERROR_TYPE.CAN_NOT_LOG_OUT,N.EVENT_TYPE.LOGOUT_RESULT)&&Ct(N.EVENT_TYPE.LOGOUT_RESULT,{success:r.success,loginFrameHeight:r.loginFrameHeight},a),t.abrupt("break",72);case 8:return Dt(r,m,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_STARTED)&&Ct(N.EVENT_TYPE.CALL_STARTED,r.call,a),t.abrupt("break",72);case 10:return Dt(r,m,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.QUEUED_CALL_STARTED)&&Ct(N.EVENT_TYPE.QUEUED_CALL_STARTED,r.call,a),t.abrupt("break",72);case 12:return Dt(r,m,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.PREVIEW_CALL_STARTED)&&Ct(N.EVENT_TYPE.CALL_STARTED,r.call,a),t.abrupt("break",72);case 14:if(!Dt(r,m,N.ERROR_TYPE.CAN_NOT_START_THE_CALL,N.EVENT_TYPE.CALL_CONNECTED)){t.next=26;break}if(at(),!ut){t.next=25;break}return t.next=19,ct.supervisorDisconnect();case 19:return T=t.sent,J.validateClassObject(T,tt),ut=!1,Ct(N.EVENT_TYPE.SUPERVISOR_HANGUP,T,a),Ct(N.EVENT_TYPE.CALL_CONNECTED,r.call,a),t.abrupt("break",72);case 25:Ct(N.EVENT_TYPE.CALL_CONNECTED,r.call,a);case 26:return t.abrupt("break",72);case 27:return Dt(r,M,N.ERROR_TYPE.CAN_NOT_END_THE_CALL,N.EVENT_TYPE.HANGUP)&&Ct(N.EVENT_TYPE.HANGUP,r.calls,a),t.abrupt("break",72);case 29:return Dt(r,g,N.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_ADDED)&&(o=r.initialCallHasEnded,_=r.callInfo,i=r.phoneNumber,l=r.callId,Ct(N.EVENT_TYPE.PARTICIPANT_ADDED,{initialCallHasEnded:o,callInfo:_,phoneNumber:i,callId:l},a)),t.abrupt("break",72);case 31:return Dt(r,g,N.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_CONNECTED)&&(c=r.initialCallHasEnded,u=r.callInfo,A=r.phoneNumber,R=r.callId,Ct(N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:c,callInfo:u,phoneNumber:A,callId:R},a)),t.abrupt("break",72);case 33:if(!Dt(r,m,N.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,N.EVENT_TYPE.PARTICIPANT_REMOVED)){t.next=39;break}return O=r.call,t.next=37,ct.getActiveCalls();case 37:Dt(P=t.sent,b)&&(0===(C=P.activeCalls).length?Ct(N.EVENT_TYPE.HANGUP,O,a):O&&O.callAttributes&&O.callAttributes.participantType===N.PARTICIPANT_TYPE.INITIAL_CALLER?(S=Object.values(C).filter((function(t){return t.callType===N.CALL_TYPE.ADD_PARTICIPANT})).pop(),Ct(S.state===N.CALL_STATE.TRANSFERRING?N.EVENT_TYPE.PARTICIPANT_ADDED:N.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:!0})):Ct(N.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:O?O.reason:null},a));case 39:return t.abrupt("break",72);case 40:return Ct(N.EVENT_TYPE.MESSAGE,r,a),t.abrupt("break",72);case 42:return Ct(N.EVENT_TYPE.AFTER_CALL_WORK_STARTED,r,a),t.abrupt("break",72);case 44:return Ct(N.EVENT_TYPE.WRAP_UP_ENDED,r,a),t.abrupt("break",72);case 46:return pt(r),t.abrupt("break",72);case 48:return Dt(r,G,N.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,N.EVENT_TYPE.MUTE_TOGGLE)&&Ct(N.EVENT_TYPE.MUTE_TOGGLE,r,a),t.abrupt("break",72);case 50:return d=r.isThirdPartyOnHold,I=r.isCustomerOnHold,p=r.calls,Dt(r,k,N.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,N.EVENT_TYPE.HOLD_TOGGLE)&&Ct(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:d,isCustomerOnHold:I,calls:p},a),t.abrupt("break",72);case 53:return L=r.isRecordingPaused,f=r.contactId,h=r.initialContactId,D=r.instanceId,v=r.region,Dt(r,V,N.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,N.EVENT_TYPE.RECORDING_TOGGLE)&&Ct(N.EVENT_TYPE.RECORDING_TOGGLE,{isRecordingPaused:L,contactId:f,initialContactId:h,instanceId:D,region:v},a),t.abrupt("break",72);case 56:return Dt(r,k,N.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,N.EVENT_TYPE.PARTICIPANTS_SWAPPED)&&(Y=r.isThirdPartyOnHold,U=r.isCustomerOnHold,y=r.calls,Ct(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:Y,isCustomerOnHold:U,calls:y},a)),t.abrupt("break",72);case 58:return Dt(r,k,N.ERROR_TYPE.CAN_NOT_CONFERENCE,N.EVENT_TYPE.PARTICIPANTS_CONFERENCED)&&(H=r.isThirdPartyOnHold,x=r.isCustomerOnHold,Ct(N.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:H,isCustomerOnHold:x},a)),t.abrupt("break",72);case 60:return Dt(r,z)&&(r.stats&&Tt(r.stats),r.isAudioStatsCompleted&&r.callId&&(j=r.callId,F=nt(),Ct(N.EVENT_TYPE.UPDATE_AUDIO_STATS_COMPLETED,{callId:j,mos:F},a))),t.abrupt("break",72);case 62:return Dt(r,Z,N.ERROR_TYPE.CAN_NOT_BARGE_IN_SUPERVISOR,N.EVENT_TYPE.SUPERVISOR_BARGED_IN)&&Ct(N.EVENT_TYPE.SUPERVISOR_BARGED_IN,r.call,a),t.abrupt("break",72);case 64:return Dt(r,Z,N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,N.EVENT_TYPE.SUPERVISOR_CALL_STARTED)&&(ut=!0,Ct(N.EVENT_TYPE.SUPERVISOR_CALL_STARTED,r.call,a)),t.abrupt("break",72);case 66:return Dt(r,Z,N.ERROR_TYPE.CAN_NOT_SUPERVISE_CALL,N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED)&&(ut=!0,Ct(N.EVENT_TYPE.SUPERVISOR_CALL_CONNECTED,r.call,a)),t.abrupt("break",72);case 68:return Dt(r,tt,N.ERROR_TYPE.CAN_NOT_DISCONNECT_SUPERVISOR,N.EVENT_TYPE.SUPERVISOR_HANGUP)&&(ut=!1,Ct(N.EVENT_TYPE.SUPERVISOR_HANGUP,r.calls,a)),t.abrupt("break",72);case 70:return Dt(r,q,N.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,N.EVENT_TYPE.SET_AGENT_STATUS)&&(W=r.statusId,Ct(N.EVENT_TYPE.SET_AGENT_STATUS,{statusId:W},a)),t.abrupt("break",72);case 72:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object.freeze(At),Object.freeze(it)}])}));
//# sourceMappingURL=scv-connector-base.js.map